{"componentChunkName":"component---src-templates-post-js","path":"/blog/kickstart-a-new-rails-project/","result":{"data":{"markdownRemark":{"html":"<p class=\"markdown-para\">Starting a new Rails project is an exciting time, but it also comes with its fair share of setup tasks to ensure your project kicks off on the right foot. This post will walk through some important steps that I like to follow to set up a Rails project for success. From configuring the database to ensuring code quality and style, and setting up essential development tools.</p>\n<p class=\"markdown-para\">While this post is structured to guide you through each section manually, you can optionally skip to the <a href=\"../kickstart-a-new-rails-project#automation\" class=\"markdown-link\">automation</a> section to learn how to customize the output of <code>rails new</code> using a template file, which will automate and streamline the process. Let's get started.</p>\n<h2 class=\"markdown-subtitle\" id=\"database-setup\" style=\"position:relative;\"><a href=\"#database-setup\" aria-label=\"database setup permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Database Setup</h2>\n<p class=\"markdown-para\">Use the <code>rails new</code> command to generate new project, specifying PostgreSQL as the database:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">rails new my-awesome-app --database=postgresql</span></span></span></code></pre>\n<p class=\"markdown-para\">This assumes you're previously installed Postgres, for example: <code>brew install postgresql@14</code>. If you don't specify the <code>--database</code> flag in the generator command, it will default to SQLite.</p>\n<p class=\"markdown-para\">After the project has been generated, I recommend running Postgres in a Docker container rather than directly on your laptop. This makes it convenient to add other services like Redis for Sidekiq or ActionCable later on. You can check out my detailed guide in this previous post <a href=\"../rails-postgres-docker\" class=\"markdown-link\">Setup a Rails Project with Postgres and Docker</a>.</p>\n<p class=\"markdown-para\">Once you've set up Postgres, ensure that your Rails project is configured to generate a <code>structure.sql</code> file instead of <code>schema.rb</code> for your database schema. This can be done by adding the following line to your <code>config/application.rb</code> file:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">config.</span><span class=\"mtk5\">active_record</span><span class=\"mtk1\">.</span><span class=\"mtk5\">schema_format</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:sql</span></span></span></code></pre>\n<p class=\"markdown-para\">The benefit of this is you may in the future have a migration that executes some SQL that cannot be expressed by the DSL provided by Rails. See the Rails Guides on <a href=\"https://edgeguides.rubyonrails.org/active_record_migrations.html#types-of-schema-dumps\" class=\"markdown-link\">Schema Dumps</a> for more details.</p>\n<p class=\"markdown-para\">Before moving on to further setup, this is a good time to ensure database can be started and created with <code>bin/setup</code>. If the database is configured correctly, the output of this command should include:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">== Preparing database ==</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Created database &#39;my_awesome_app&#39;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Created database &#39;my_awesome_app_test&#39;</span></span></code></pre>\n<p class=\"markdown-para\">Then launch a psql session with <code>bin/rails db</code>, which will connect you to the development database. Then run <code>\\d</code> at the psql prompt to list tables, you should see:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">                 List of relations</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> Schema |         Name         | Type  |    Owner</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">--------+----------------------+-------+-------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> public | ar_internal_metadata | table | my_awesome_app</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> public | schema_migrations    | table | my_awesome_app</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">(2 rows)</span></span></code></pre>\n<h3 class=\"markdown-sub-subtitle\" id=\"annotate\" style=\"position:relative;\"><a href=\"#annotate\" aria-label=\"annotate permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Annotate</h3>\n<p class=\"markdown-para\">For a clearer understanding of the database schema and to save time when working with models, I like to add the <a href=\"https://github.com/ctran/annotate_models\" class=\"markdown-link\">annotate</a> gem to the development and test sections of the Gemfile.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Gemfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;annotate&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">After adding it, run the installation command:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bundle install</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bin/rails generate annotate:install</span></span></span></code></pre>\n<p class=\"markdown-para\">This ensures that anytime database migrations are run, the schema information will be automatically prepended to the models, tests, and factories (more on <a href=\"../testing\" class=\"markdown-link\">testing</a> later). This is beneficial when working with a model, such as adding scopes or other methods, to see what columns, indexes, and constraints are available.</p>\n<p class=\"markdown-para\">For example, given the following migration to create a <code>products</code> table:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">CreateProducts</span><span class=\"mtk5 mtki mtku\"> &lt; ActiveRecord::Migration</span><span class=\"mtk1\">[</span><span class=\"mtk4\">7.0</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">change</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    create_table </span><span class=\"mtk4\">:products</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |t|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.</span><span class=\"mtk5\">string</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:name</span><span class=\"mtk1\">, </span><span class=\"mtk4\">null:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.</span><span class=\"mtk5\">string</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:code</span><span class=\"mtk1\">, </span><span class=\"mtk4\">null:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.</span><span class=\"mtk5\">decimal</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:price</span><span class=\"mtk1\">, </span><span class=\"mtk4\">null:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.</span><span class=\"mtk5\">integer</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:inventory</span><span class=\"mtk1\">, </span><span class=\"mtk4\">null:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">false</span><span class=\"mtk1\">, </span><span class=\"mtk4\">default:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.</span><span class=\"mtk5\">timestamps</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">And the corresponding Product model:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Product</span><span class=\"mtk5 mtki mtku\"> &lt; ApplicationRecord</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">After running the migration with <code>bin/rails db:migrate</code>, the model class will be updated with the schema information as comments at the beginning of the file:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># == Schema Information</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Table name: products</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  id         :integer          not null, primary key</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  code       :string           not null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  inventory  :integer          default(0), not null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  name       :string           not null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  price      :decimal(, )      not null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  created_at :datetime         not null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  updated_at :datetime         not null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Product</span><span class=\"mtk5 mtki mtku\"> &lt; ApplicationRecord</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">The same schema comments will also get added to the model test <code>spec/models/product_spec.rb</code> and factory <code>spec/factories/product.rb</code> (given that these files exist at the time you run migrations).</p>\n<h2 class=\"markdown-subtitle\" id=\"code-quality\" style=\"position:relative;\"><a href=\"#code-quality\" aria-label=\"code quality permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code Quality</h2>\n<p class=\"markdown-para\">Maintaining clean and consistent code is essential for any project. Here's how you can set up code quality and style checks for your Rails project.</p>\n<h3 class=\"markdown-sub-subtitle\" id=\"rubocop\" style=\"position:relative;\"><a href=\"#rubocop\" aria-label=\"rubocop permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rubocop</h3>\n<p class=\"markdown-para\">For code quality checks, add <a href=\"https://github.com/rubocop/rubocop\" class=\"markdown-link\">Rubocop</a> and some extensions to the development group in the Gemfile:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Static code analysis for Ruby</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Additional RuboCop rules for Ruby on Rails</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># RuboCop rules for RSpec tests</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-rspec&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Performance-related RuboCop rules</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-performance&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># RuboCop rules to check for thread safety</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-thread_safety&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># RuboCop rules for FactoryBot usage</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-factory_bot&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># RuboCop rules for Capybara tests</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-capybara&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span></code></pre>\n<p class=\"markdown-para\">After adding these gems, create a <code>.rubocop.yml</code> file in your project's root directory with custom configurations. This is because you'll nearly always want to customize the Rubocop defaults. The details will vary by project, but here's where I like to start:</p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\">Require all the extensions specified in Gemfile.</li>\n<li class=\"markdown-list-item\">Exclude generated files.</li>\n<li class=\"markdown-list-item\">Disable code comment docs (although I'm a huge fan of <a href=\"../about-those-docs\" class=\"markdown-link\">engineering documentation</a>, enforcing it with <code>Style/Documentation</code> can lead to useless comments like <code># This is the product model</code>).</li>\n<li class=\"markdown-list-item\">Increase some max lengths to account for modern high resolution monitors and to avoid arbitrarily splitting up cohesive methods.</li>\n</ul>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"yml\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">require</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk6\">rubocop-rails</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk6\">rubocop-rspec</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk6\">rubocop-performance</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk6\">rubocop-thread_safety</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk6\">rubocop-factory_bot</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  - </span><span class=\"mtk6\">rubocop-capybara</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">AllCops</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">NewCops</span><span class=\"mtk1\">: </span><span class=\"mtk6\">enable</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">Exclude</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;db/schema.rb&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;Gemfile&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;lib/tasks/*.rake&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;bin/*&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;node_modules/**/*&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;config/puma.rb&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;config/spring.rb&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;config/environments/development.rb&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;config/environments/production.rb&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;spec/spec_helper.rb&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Style/FrozenStringLiteralComment</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">Enabled</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Style/Documentation</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">Enabled</span><span class=\"mtk1\">: </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Style/StringLiterals</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">EnforcedStyle</span><span class=\"mtk1\">: </span><span class=\"mtk6\">double_quotes</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Metrics/BlockLength</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">Exclude</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    - </span><span class=\"mtk6\">&#39;spec/**/*.rb&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Metrics/MethodLength</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">Max</span><span class=\"mtk1\">: </span><span class=\"mtk4\">15</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">Layout/LineLength</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">Max</span><span class=\"mtk1\">: </span><span class=\"mtk4\">120</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">RSpec/ExampleLength</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">Max</span><span class=\"mtk1\">: </span><span class=\"mtk4\">15</span></span></span></code></pre>\n<h3 class=\"markdown-sub-subtitle\" id=\"profiler\" style=\"position:relative;\"><a href=\"#profiler\" aria-label=\"profiler permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Profiler</h3>\n<p class=\"markdown-para\">Uncomment the <code>gem \"rack-mini-profiler\"</code> line in the development group of the Gemfile and run <code>bundle install</code> to enable Rack Mini Profiler:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Gemfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Add speed badges [https://github.com/MiniProfiler/rack-mini-profiler]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rack-mini-profiler&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">This tool helps you identify performance bottlenecks in your application by providing real-time metrics on database queries, rendering times, and memory usage. The first time I saw it, I thought it only provides the time it took to render the current view, but it's so much more than that. See this <a href=\"https://stackify.com/rack-mini-profiler-a-complete-guide-on-rails-performance/\" class=\"markdown-link\">guide</a> for more details on how to use it.</p>\n<h2 class=\"markdown-subtitle\" id=\"testing\" style=\"position:relative;\"><a href=\"#testing\" aria-label=\"testing permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing</h2>\n<p class=\"markdown-para\">While Rails comes with minitest for testing, I prefer using <a href=\"https://github.com/rspec/rspec-rails\" class=\"markdown-link\">RSpec</a>, together with <a href=\"https://github.com/thoughtbot/factory_bot\" class=\"markdown-link\">FactoryBot</a> for a BDD (Behavior Driven Development) approach to testing, and explicit test data creation. Here's how to set this up.</p>\n<p class=\"markdown-para\">Add <code>rspec-rails</code> gem to the Gemfile. It's placed in the development and test groups so that generators and rake tasks don't need to be preceded by <code>RAILS_ENV=test</code>. See the <a href=\"https://github.com/rspec/rspec-rails#installation\" class=\"markdown-link\">installation docs</a> for more details.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Gemfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rspec-rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">After adding the gem, run the following commands to install and bootstrap RSpec:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bundle install</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bin/rails generate rspec:install</span></span></span></code></pre>\n<p class=\"markdown-para\">Cleanup the old <code>test</code> directory from rails new generator to avoid confusion (assuming there's nothing important in here):</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">rm -rf </span><span class=\"mtk9\">test</span></span></span></code></pre>\n<p class=\"markdown-para\">Optionally, you can generate a binstub for RSpec to make running tests more convenient:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bundle binstubs rspec-core</span></span></span></code></pre>\n<p class=\"markdown-para\">Now instead of having to type <code>bundle exec rspec</code> to run tests, this can be shortened to <code>bin/rspec</code>.</p>\n<h3 class=\"markdown-sub-subtitle\" id=\"factories\" style=\"position:relative;\"><a href=\"#factories\" aria-label=\"factories permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Factories</h3>\n<p class=\"markdown-para\">By default, Rails supports fixtures, which are yaml files that represent test data. They will be automatically loaded into the test database before every test run. While they are fast (due to database constraints being dropped before data loading), as a project and the data model grows, particularly with associations, fixtures can become a source of complexity. I prefer to use FactoryBot for more explicit data creation for each test that needs it.</p>\n<aside class=\"markdown-aside\">\nA full discussion of the pros and cons of factories and fixtures is outside the scope of this post. See this post <a class=\"markdown-link\" href=\"https://harled.ca/blog/the_battle_of_factories_vs_fixtures_when_using_rspec\">The Battle of Factories vs Fixtures</a> for more on this topic.\n</aside>\n<p class=\"markdown-para\">To create test data easily, add the <code>factory_bot_rails</code> gem to your development and test groups in the Gemfile:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;factory_bot_rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">This will cause Rails to generate factories instead of fixtures when running for example <code>bin/rails generate model SomeModel</code>. See the <a href=\"https://github.com/thoughtbot/factory_bot_rails#generators\" class=\"markdown-link\">generator docs</a> if you want different behavior.</p>\n<p class=\"markdown-para\">Next, configure FactoryBot in <code>spec/rails_helper.rb</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">RSpec</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Other config...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk7\">include</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">FactoryBot</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Syntax</span><span class=\"mtk1\">::Methods</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">The above configuration supports using the FactoryBot methods directly in tests, for example:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># With config</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5\">let</span><span class=\"mtk1\">(</span><span class=\"mtk4\">:product</span><span class=\"mtk1\">) { </span><span class=\"mtk5\">build_stubbed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">:product</span><span class=\"mtk1\">) }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Without config</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk5\">let</span><span class=\"mtk1\">(</span><span class=\"mtk4\">:product</span><span class=\"mtk1\">) { </span><span class=\"mtk9 mtki\">FactoryBot</span><span class=\"mtk1\">.</span><span class=\"mtk5\">build_stubbed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">:product</span><span class=\"mtk1\">) }</span></span></span></code></pre>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Performance tip:</strong> Use FactoryBot's <code>build_stubbed</code> method rather than <code>create</code> where possible to speed up your test suite. Read this <a href=\"https://thoughtbot.com/blog/use-factory-bots-build-stubbed-for-a-faster-test\" class=\"markdown-link\">post from Thoughtbot</a> for more details.</p>\n<h3 class=\"markdown-sub-subtitle\" id=\"shoulda-matchers\" style=\"position:relative;\"><a href=\"#shoulda-matchers\" aria-label=\"shoulda matchers permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Shoulda Matchers</h3>\n<p class=\"markdown-para\">For more expressive model testing, I like to add the <a href=\"https://github.com/thoughtbot/shoulda-matchers\" class=\"markdown-link\">shoulda-matchers</a> gem. Add it to the test group in the Gemfile:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Gemfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;shoulda-matchers&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">After adding the gem, configure it at the end of the <code>spec/rails_helper.rb</code> file:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># spec/rails_helper.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Other config...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Shoulda</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Matchers</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">integrate</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |with|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    with.</span><span class=\"mtk5\">test_framework</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:rspec</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    with.</span><span class=\"mtk5\">library</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:rails</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Here's an example of using shoulda matchers in an RSpec model test. Given the following <code>User</code> model:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># app/models/user.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">User</span><span class=\"mtk5 mtki mtku\"> &lt; ApplicationRecord</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  validates </span><span class=\"mtk4\">:name</span><span class=\"mtk1\">, </span><span class=\"mtk4\">presence:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  validates </span><span class=\"mtk4\">:email</span><span class=\"mtk1\">, </span><span class=\"mtk4\">presence:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">The <code>presence</code> validations can be tested with one-liners as follows:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># spec/models/user_spec.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">RSpec</span><span class=\"mtk1\">.</span><span class=\"mtk5\">describe</span><span class=\"mtk1\"> User, </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:model</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  it { should </span><span class=\"mtk5\">validate_presence_of</span><span class=\"mtk1\">(</span><span class=\"mtk4\">:name</span><span class=\"mtk1\">) }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  it { should </span><span class=\"mtk5\">validate_presence_of</span><span class=\"mtk1\">(</span><span class=\"mtk4\">:email</span><span class=\"mtk1\">) }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">See the docs on <a href=\"https://github.com/thoughtbot/shoulda-matchers#matchers\" class=\"markdown-link\">matchers</a> for a full list of what can be expressed in tests.</p>\n<p class=\"markdown-para\">Before moving on, make sure everything is wired up properly by generating an example model, and ensure both the rspec test and factory is generated for it. For example:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bin/rails generate model Product name:string description:text price:decimal available:boolean</span></span></span></code></pre>\n<p class=\"markdown-para\">The output of this command should show that the migration, model, model spec and product factory have been created:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">invoke  active_record</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">create    db/migrate/20231002125314_create_products.rb</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">create    app/models/product.rb</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">invoke    rspec</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">create      spec/models/product_spec.rb</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">invoke      factory_bot</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">create        spec/factories/products.rb</span></span></code></pre>\n<p class=\"markdown-para\">Afterward, you can safely clean up the generated files since this was just a test:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bin/rails destroy model Product</span></span></span></code></pre>\n<h2 class=\"markdown-subtitle\" id=\"dev-tooling\" style=\"position:relative;\"><a href=\"#dev-tooling\" aria-label=\"dev tooling permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dev Tooling</h2>\n<p class=\"markdown-para\">Here are a few more tools I like to add to enhance my workflow.</p>\n<h3 class=\"markdown-sub-subtitle\" id=\"faker\" style=\"position:relative;\"><a href=\"#faker\" aria-label=\"faker permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Faker</h3>\n<p class=\"markdown-para\">The <code>faker</code> gem is a handy tool for generating seed data during development and can also be used in factories for test data. Add it to your development and test groups in the Gemfile:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Gemfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;faker&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Here's an example of how it can be used to seed the development database:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># db/seeds.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">10</span><span class=\"mtk1\">.</span><span class=\"mtk5\">times</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  product </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Product</span><span class=\"mtk1\">.</span><span class=\"mtk5\">create</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">name:</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Commerce</span><span class=\"mtk1\">.</span><span class=\"mtk5\">product_name</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">description:</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Lorem</span><span class=\"mtk1\">.</span><span class=\"mtk5\">paragraph</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">price:</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Commerce</span><span class=\"mtk1\">.</span><span class=\"mtk5\">price</span><span class=\"mtk1\">(</span><span class=\"mtk4\">range:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">10.0</span><span class=\"mtk7\">..</span><span class=\"mtk4\">1000.0</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">available:</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Boolean</span><span class=\"mtk1\">.</span><span class=\"mtk5\">boolean</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Faker can also be used in factories, for example:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"28\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">FactoryBot</span><span class=\"mtk1\">.</span><span class=\"mtk5\">define</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  factory </span><span class=\"mtk4\">:product</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    name { </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Commerce</span><span class=\"mtk1\">.</span><span class=\"mtk5\">product_name</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    description { </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Lorem</span><span class=\"mtk1\">.</span><span class=\"mtk5\">paragraph</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    price { </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Commerce</span><span class=\"mtk1\">.</span><span class=\"mtk5\">price</span><span class=\"mtk1\">(</span><span class=\"mtk4\">range:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">10.0</span><span class=\"mtk7\">..</span><span class=\"mtk4\">1000.0</span><span class=\"mtk1\">) }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    available { </span><span class=\"mtk9 mtki\">Faker</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Boolean</span><span class=\"mtk1\">.</span><span class=\"mtk5\">boolean</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<h3 class=\"markdown-sub-subtitle\" id=\"solargraph\" style=\"position:relative;\"><a href=\"#solargraph\" aria-label=\"solargraph permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solargraph</h3>\n<p class=\"markdown-para\"><a href=\"https://solargraph.org/\" class=\"markdown-link\">Solargraph</a> is a gem for Intelligent code assistance. When used together with the Solargraph VSCode <a href=\"https://marketplace.visualstudio.com/items?itemName=castwide.solargraph\" class=\"markdown-link\">extension</a>, it supports code navigation, documentation, and autocompletion.</p>\n<p class=\"markdown-para\">Add it to the development group in the Gemfile:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"29\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Gemfile</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;solargraph&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">After running <code>bundle install</code>, solargraph will also install YARD. Run this command to generate documentation for installed gems:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"30\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bundle </span><span class=\"mtk9\">exec</span><span class=\"mtk1\"> yard gems</span></span></span></code></pre>\n<p class=\"markdown-para\">Once Solargraph is setup, here's an example of it in action. Hovering over a Rails class in VSCode with Solargraph setup will show the documentation like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/klEQVR42lWQ3W6CQBSEd9ELa0oUWZa2avmR3QVrRSgUgaaptonv/0TT7GpIe/HlzDnJTCaHTFcF/KQFj3KwuIQTHhDnJ6T1BfH+jFlQYfL4grEnMTIIM8dcDegbdRNYTIBQT8LyFCwzBSgTeNr1eC5PWMgj7oMDbE1YwA4KzOPK6Fn09ocS802FyfIVRIdRJkGZGvCzHmHxPRCVP0jqC5a7T/C0BU87+FkHT7XDzlWLu9X+GmgxdWt5DV/nXwiLszE9bD/gisaYmWjgbCqzM3nEInm/6cY01X5Cdcg/JJykhr/t4coGPOtghyWm63zA4grEFSD6Z+4NJjHyM/wCdcyIJXpqzoAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rails kickstart solargraph hover\"\n        title=\"rails kickstart solargraph hover\"\n        src=\"/static/618673bf01483908e80bf58d73d7595d/5a190/kickstart-rails-solargraph-hover.png\"\n        srcset=\"/static/618673bf01483908e80bf58d73d7595d/772e8/kickstart-rails-solargraph-hover.png 200w,\n/static/618673bf01483908e80bf58d73d7595d/e17e5/kickstart-rails-solargraph-hover.png 400w,\n/static/618673bf01483908e80bf58d73d7595d/5a190/kickstart-rails-solargraph-hover.png 800w,\n/static/618673bf01483908e80bf58d73d7595d/c1b63/kickstart-rails-solargraph-hover.png 1200w,\n/static/618673bf01483908e80bf58d73d7595d/daed9/kickstart-rails-solargraph-hover.png 1426w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Hitting <kbd class=\"markdown-kbd\">F12</kbd> will jump into the code, for example:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACC0lEQVR42oWU2bLaMAyG7bAkJKE9QzayHEIpISFkY5me3rRz3v+l/o7sbCxtL76RYhv5l2TBrN1PuPsfWH2/Qg9raH4JPWyg+ZX4NsIGRnjGIqigR2csowbLoIQRncXeIqphxjeYmwZaWIKRs9rfoAZHzPyBuZ9Lfz2sTb0MzErA7ERawiH20roJmBqcoL9XPYuoBK11zP3Bn61zKHYKxRngbgrutbgpGMmkg+IwHbAPYFbLg0974kzL2O9gmlBYwHgvoUcFZl6K+ToTzLys9yfOAdzaQ7H3UCwJtwa/Q6Q8dSmIrJFiJ1BIiSAZ2QS8tWOfP8AWEdWuhBYWok5TasI6x9S7txM3Ax/Vb5z2GEaBzLh+akR3AVkKytsadnRZcOcepgaF+BGppA53iO93aenpkEJJ2jePOi4623ZY+PNWxZdvZ/FsSNUikpf0ZaDm+Hn7GmStXwUkKxTO/WN/60A6pOakT/tijXz3cK+QmmLGDYy4gb6pW6peoSxH1ac+vMW/pLyML/COv+CdPuFkv2FnHzC2JSZu1+XsfjJGj1sqfAioBhWW8RXm9iqUmHEOfZNDDUsx+GqQP6XK2+6+VGhubtDCG1S/wNQ9gr3txNDz9g+Aj2r4rPBFQCO+wDle8XWXw9iUMLcfmPnFXaDHoP8MqIUnrMsa3qnG6nDB2+ETWnSWo/ViEv4X8A/fi6/MFS/G8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rails kickstart solargraph jump into code\"\n        title=\"rails kickstart solargraph jump into code\"\n        src=\"/static/72ffd331270ca85c9952e11390f422e5/5a190/kickstart-rails-solargraph-jump-into-code.png\"\n        srcset=\"/static/72ffd331270ca85c9952e11390f422e5/772e8/kickstart-rails-solargraph-jump-into-code.png 200w,\n/static/72ffd331270ca85c9952e11390f422e5/e17e5/kickstart-rails-solargraph-jump-into-code.png 400w,\n/static/72ffd331270ca85c9952e11390f422e5/5a190/kickstart-rails-solargraph-jump-into-code.png 800w,\n/static/72ffd331270ca85c9952e11390f422e5/c1b63/kickstart-rails-solargraph-jump-into-code.png 1200w,\n/static/72ffd331270ca85c9952e11390f422e5/5f652/kickstart-rails-solargraph-jump-into-code.png 1302w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<aside class=\"markdown-aside\">\nSince writing this, Shopify's <a class=\"markdown-link\" href=\"https://marketplace.visualstudio.com/items?itemName=Shopify.ruby-lsp\">Ruby LSP extension</a> for VSCode has added go-to definition and showing documentation on hover. I haven't yet tried these features but if they work well, then this could be an option instead of Solargraph.\n</aside>\n<h3 class=\"markdown-sub-subtitle\" id=\"dotenv\" style=\"position:relative;\"><a href=\"#dotenv\" aria-label=\"dotenv permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dotenv</h3>\n<p class=\"markdown-para\">The last bit of dev tooling I like to add is the <a href=\"https://github.com/bkeepers/dotenv\" class=\"markdown-link\">dotenv</a> gem. This automatically loads environment files from a <code>.env</code> file in the project root, into <a href=\"https://docs.ruby-lang.org/en/3.2/ENV.html\" class=\"markdown-link\">ENV</a> for development and testing. Add it to the development and test groups of the Gemfile:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"31\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;dotenv-rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Then modify the <code>.gitignore</code> file in the project root to ignore the <code>.env</code> file, this is because secrets (even dev secrets) should not be committed to version control:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"sh\" data-index=\"32\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Ignore environment variables</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">.env</span></span></span></code></pre>\n<p class=\"markdown-para\">Then create  <code>.env</code> and <code>.env.template</code> files in the project root. The first one will be ignored, the second one is committed to provide developers with an example of what environment variables the application needs:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"33\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">touch .env .env.template</span></span></span></code></pre>\n<aside class=\"markdown-aside\">\nThe above is just a simple setup for dotenv. You can actually define multiple dot files containing env vars, and dotenv will load them according to some override rules. Depending on how you structure these, some of them could be committed. See the dotenv <a class=\"markdown-link\" href=\"https://github.com/bkeepers/dotenv#frequently-answered-questions\">frequently asked questions</a> for more details.\n</aside>\n<h3 class=\"markdown-sub-subtitle\" id=\"editorconfig\" style=\"position:relative;\"><a href=\"#editorconfig\" aria-label=\"editorconfig permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Editorconfig</h3>\n<p class=\"markdown-para\">While not Rails specific, <a href=\"https://EditorConfig.org\" class=\"markdown-link\">editorconfig</a> is useful to have in all projects to maintain consistent whitespace in every file. To use it, add a <code>.editorconfig</code> in the project root such as:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"34\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"># top-most EditorConfig file</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">root = true</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"># Unix-style newlines with a newline ending every file</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">[*]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">end_of_line = lf</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">insert_final_newline = true</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">indent_style = space</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">indent_size = 2</span></span></code></pre>\n<p class=\"markdown-para\">And then install an <a href=\"https://editorconfig.org/#download\" class=\"markdown-link\">editor plugin</a> for your editor/IDE of choice.</p>\n<aside class=\"markdown-aside\">\nIt may seem like there's some overlap between editorconfig and other popular tools for linting and formatting. Here's some <a class=\"markdown-link\" href=\"https://stackoverflow.com/questions/48363647/editorconfig-vs-eslint-vs-prettier-is-it-worthwhile-to-use-them-all\">discussion</a> on how all these tools fit together.\n</aside>\n<h2 class=\"markdown-subtitle\" id=\"services\" style=\"position:relative;\"><a href=\"#services\" aria-label=\"services permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Services</h2>\n<p class=\"markdown-para\">Lastly, consider configuring an <code>app/services</code> directory in your Rails project. While Rails is not opinionated about how you organize business logic, having a services layer from the beginning can keep your codebase organized as the project grows.</p>\n<p class=\"markdown-para\">Add an empty <code>.keep</code> file in this directory so it will get committed to git:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"35\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># from project root</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">mkdir app/services</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">touch app/services/.keep</span></span></span></code></pre>\n<p class=\"markdown-para\">Then add the following line to <code>config/application.rb</code> file to include the <code>app/services</code> directory in Rails' autoload path:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"36\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># config/application.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Application</span><span class=\"mtk5 mtki mtku\"> &lt; Rails::Application</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># other config...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">autoload_paths</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">root</span><span class=\"mtk1\">.</span><span class=\"mtk5\">join</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;services&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># other config...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<aside class=\"markdown-aside\">\nServices are an area that brings about much discussion in the Rails community. There are many different opinions on how to implement them, or whether they are needed at all. This is outside the scope of this post, but if you'd like to learn more about this, checkout this <a class=\"markdown-link\" href=\"https://stackoverflow.com/questions/52526322/what-do-folks-use-app-services-in-rails-applications\">Q & A on SO</a>, <a class=\"markdown-link\" href=\"https://rubyvideo.dev/talks/railsconf-2022-your-service-layer-needn-t-be-fancy-it-just-needs-to-exist-by-david-copeland\">RailsConf 2022 talk</a>, and a post about <a class=\"markdown-link\" href=\"https://www.codewithjason.com/code-without-service-objects/\">not using service objects</a>.\n</aside>\n<h2 class=\"markdown-subtitle\" id=\"automation\" style=\"position:relative;\"><a href=\"#automation\" aria-label=\"automation permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Automation</h2>\n<p class=\"markdown-para\">Since originally writing this post, I have learned about the <a href=\"https://www.writesoftwarewell.com/railsrc-rails-configuration-file/\" class=\"markdown-link\">Rails config file</a> that can make some of these steps faster. It turns out Rails allows you to specify much of this information in a config file, then it will be applied automatically any time <code>rails new some_app</code> is run.</p>\n<p class=\"markdown-para\">To automate most of the steps covered in this post, add a <code>.railsrc</code> file to your home directory, and also create a <code>template.rb</code> file (this can go in any directory):</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"37\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># The config file goes in your home directory</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">touch </span><span class=\"mtk7\">~</span><span class=\"mtk1\">/.railsrc</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># The template file can go anywhere,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># just remember where you put it!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">touch </span><span class=\"mtk7\">~</span><span class=\"mtk1\">/rails/template.rb</span></span></span></code></pre>\n<p class=\"markdown-para\">Then edit the <code>.railsrc</code> file with the following:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"38\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">--database=postgresql</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">--template=~/rails/template.rb</span></span></code></pre>\n<p class=\"markdown-para\">You can add any option that's supported by the <code>rails new</code> command. For example, if you usually use TailwindCSS for styling, you could also add <code>--css tailwind</code> to the config file. The <code>--template</code> option points to wherever you created the <code>template.rb</code> file.</p>\n<p class=\"markdown-para\">Now in <code>template.rb</code>, enter:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"39\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">gem_group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;annotate&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rspec-rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;factory_bot_rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;faker&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;dotenv-rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">gem_group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-rails&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-rspec&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-performance&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-thread_safety&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-factory_bot&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;rubocop-capybara&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;solargraph&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">gem_group </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&quot;shoulda-matchers&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># adds lines to `config/application.rb`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">environment </span><span class=\"mtk6\">&#39;config.active_record.schema_format = :sql&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">environment </span><span class=\"mtk6\">&#39;config.autoload_paths &lt;&lt; Rails.root.join(&quot;services&quot;)&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># commands to run after `bundle install`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">after_bundle </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># setup model annotation</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  run </span><span class=\"mtk6\">&quot;bin/rails generate annotate:install&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># setup RSpec testing</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  run </span><span class=\"mtk6\">&quot;bin/rails generate rspec:install&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  run </span><span class=\"mtk6\">&quot;rm -rf test&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  run </span><span class=\"mtk6\">&quot;bundle binstubs rspec-core&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># documentation for solargraph</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  run </span><span class=\"mtk6\">&quot;bundle exec yard gems&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># create directories and files</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  run </span><span class=\"mtk6\">&quot;mkdir app/services&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  run </span><span class=\"mtk6\">&quot;touch app/services/.keep .rubocop.yml .env .env.template&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># copy new files that should always be in project</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  copy_file </span><span class=\"mtk6\">&quot;/path/to/.editorconfig&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;.editorconfig&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  copy_file </span><span class=\"mtk6\">&quot;/path/to/.rubocop.yml&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;.rubocop.yml&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Notes:</strong></p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\">The <code>gem_group</code> sections will add the gems to the specified group in the project <code>Gemfile</code>.</li>\n<li class=\"markdown-list-item\">The <code>environment</code> command will add the specified line to <code>config/application.rb</code>.</li>\n<li class=\"markdown-list-item\">The <code>run</code> command will run any shell command. Place these in the <code>after_bundle</code> block to have the commands run after <code>bundle install</code> has completed.</li>\n<li class=\"markdown-list-item\">The <code>copy_file</code> command will copy a source file from an absolute path to a target in the generated Rails application. In the example above I keep a copy of my standard <code>.editorconfig</code>, <code>rubocop.yml</code> in a directory on my laptop, then these get copied over to the project root.</li>\n</ul>\n<p class=\"markdown-para\">See the <a href=\"https://guides.rubyonrails.org/rails_application_templates.html\" class=\"markdown-link\">Rails Guides on Templates</a> for all the options that can be specified in this file.</p>\n<p class=\"markdown-para\">With this in place, the next time you run <code>rails new my_app</code>, you'll have an app setup with all the tools and configuration you like to use.</p>\n<p class=\"markdown-para\">This leaves just a small amount of configuration to be done manually for <code>spec/rails_helper.rb</code> to configure FactoryBot and Shoulda Matchers:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"40\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># spec/rails_helper.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">RSpec</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk7\">include</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">FactoryBot</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Syntax</span><span class=\"mtk1\">::Methods</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Shoulda</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Matchers</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">integrate</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |with|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    with.</span><span class=\"mtk5\">test_framework</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:rspec</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    with.</span><span class=\"mtk5\">library</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:rails</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<h2 class=\"markdown-subtitle\" id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p class=\"markdown-para\">This post has covered important steps when starting a Rails project, including database setup, code quality and style, testing, additional dev tooling, and introducing a service layer from the start. Some projects may require more (see this post from Evil Martians on <a href=\"https://evilmartians.com/chronicles/gemfile-of-dreams-libraries-we-use-to-build-rails-apps\" class=\"markdown-link\">Gemfile of Dreams</a>), but this is the baseline that I like to start with. By following these steps and practices, your Rails project should be well prepared for efficient development and maintainability.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk9 { color: #66D9EF; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","timeToRead":12,"tableOfContents":"<ul>\n<li>\n<p><a href=\"#database-setup\">Database Setup</a></p>\n<ul>\n<li><a href=\"#annotate\">Annotate</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#code-quality\">Code Quality</a></p>\n<ul>\n<li><a href=\"#rubocop\">Rubocop</a></li>\n<li><a href=\"#profiler\">Profiler</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#testing\">Testing</a></p>\n<ul>\n<li><a href=\"#factories\">Factories</a></li>\n<li><a href=\"#shoulda-matchers\">Shoulda Matchers</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#dev-tooling\">Dev Tooling</a></p>\n<ul>\n<li><a href=\"#faker\">Faker</a></li>\n<li><a href=\"#solargraph\">Solargraph</a></li>\n<li><a href=\"#dotenv\">Dotenv</a></li>\n<li><a href=\"#editorconfig\">Editorconfig</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#services\">Services</a></p>\n</li>\n<li>\n<p><a href=\"#automation\">Automation</a></p>\n</li>\n<li>\n<p><a href=\"#conclusion\">Conclusion</a></p>\n</li>\n</ul>","frontmatter":{"title":"Kickstart a New Rails Project","date":"04 Aug 2024","description":"Discover the essential steps and gems for launching a new Rails project. From setting up services in Docker containers to harnessing the power of RSpec, FactoryBot, and other must-have tools.","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#483818","images":{"fallback":{"src":"/static/c75600e0db6f0561b1bc85d7ab298e47/d730f/kickstart-rails-alexas_fotos-wdxT3xl8Dfo-unsplash.jpg","srcSet":"/static/c75600e0db6f0561b1bc85d7ab298e47/b834a/kickstart-rails-alexas_fotos-wdxT3xl8Dfo-unsplash.jpg 225w,\n/static/c75600e0db6f0561b1bc85d7ab298e47/21c52/kickstart-rails-alexas_fotos-wdxT3xl8Dfo-unsplash.jpg 450w,\n/static/c75600e0db6f0561b1bc85d7ab298e47/d730f/kickstart-rails-alexas_fotos-wdxT3xl8Dfo-unsplash.jpg 900w","sizes":"(min-width: 900px) 900px, 100vw"},"sources":[{"srcSet":"/static/c75600e0db6f0561b1bc85d7ab298e47/71a10/kickstart-rails-alexas_fotos-wdxT3xl8Dfo-unsplash.webp 225w,\n/static/c75600e0db6f0561b1bc85d7ab298e47/901f1/kickstart-rails-alexas_fotos-wdxT3xl8Dfo-unsplash.webp 450w,\n/static/c75600e0db6f0561b1bc85d7ab298e47/5acd1/kickstart-rails-alexas_fotos-wdxT3xl8Dfo-unsplash.webp 900w","type":"image/webp","sizes":"(min-width: 900px) 900px, 100vw"}]},"width":900,"height":599}}}},"fields":{"slug":"/blog/kickstart-a-new-rails-project/"}},"relatedP":{"edges":[{"node":{"id":"489497a9-2600-5b48-aa26-a2ea8b93b5d0","frontmatter":{"title":"Add Rubocop to an Existing Rails Project","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#181828","images":{"fallback":{"src":"/static/454ad22c79b1d6dca07caa36d2c057f3/26528/rubocop-mark-duffel-U5y077qrMdI-unsplash.jpg","srcSet":"/static/454ad22c79b1d6dca07caa36d2c057f3/26528/rubocop-mark-duffel-U5y077qrMdI-unsplash.jpg 300w,\n/static/454ad22c79b1d6dca07caa36d2c057f3/43429/rubocop-mark-duffel-U5y077qrMdI-unsplash.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/454ad22c79b1d6dca07caa36d2c057f3/5d6c3/rubocop-mark-duffel-U5y077qrMdI-unsplash.webp 300w,\n/static/454ad22c79b1d6dca07caa36d2c057f3/68dbc/rubocop-mark-duffel-U5y077qrMdI-unsplash.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/add-rubocop-to-legacy-project/"}}},{"node":{"id":"05e58406-96e0-5834-a969-f60a98704666","frontmatter":{"title":"Start a Rails 6 Project with RSpec","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#283848","images":{"fallback":{"src":"/static/36121c07924fc545e6336936bc7765a0/26528/scaffold-rails-jack-b-S3SU988T13A-unsplash.jpg","srcSet":"/static/36121c07924fc545e6336936bc7765a0/26528/scaffold-rails-jack-b-S3SU988T13A-unsplash.jpg 300w,\n/static/36121c07924fc545e6336936bc7765a0/43429/scaffold-rails-jack-b-S3SU988T13A-unsplash.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/36121c07924fc545e6336936bc7765a0/5d6c3/scaffold-rails-jack-b-S3SU988T13A-unsplash.webp 300w,\n/static/36121c07924fc545e6336936bc7765a0/68dbc/scaffold-rails-jack-b-S3SU988T13A-unsplash.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/start-rails-6-project-with-rspec/"}}},{"node":{"id":"c7b23da1-58aa-5f7e-8d61-8c308e6ef0ac","frontmatter":{"title":"Setup a Rails Project with Postgres and Docker","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#583838","images":{"fallback":{"src":"/static/03714b36bbd86fee510f6b5b6ed12b0b/26528/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.jpg","srcSet":"/static/03714b36bbd86fee510f6b5b6ed12b0b/26528/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.jpg 300w,\n/static/03714b36bbd86fee510f6b5b6ed12b0b/43429/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/03714b36bbd86fee510f6b5b6ed12b0b/5d6c3/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.webp 300w,\n/static/03714b36bbd86fee510f6b5b6ed12b0b/68dbc/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/rails-postgres-docker/"}}}]}},"pageContext":{"slug":"/blog/kickstart-a-new-rails-project/","relatedPosts":["Setup a Rails Project with Postgres and Docker","Add Rubocop to an Existing Rails Project","Start a Rails 6 Project with RSpec"]}},"staticQueryHashes":["163244226"],"slicesMap":{}}