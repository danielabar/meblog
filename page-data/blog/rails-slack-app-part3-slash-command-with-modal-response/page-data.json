{"componentChunkName":"component---src-templates-post-js","path":"/blog/rails-slack-app-part3-slash-command-with-modal-response/","result":{"data":{"markdownRemark":{"html":"<p class=\"markdown-para\">Welcome to the third installment of this multi-part series on building a Slack application with Rails. This series will guide you through the process of creating a Slack application with Rails and is structured as follows:</p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part1-oauth\" class=\"markdown-link\">Part 1: Rails new, Slack, and OAuth</a></li>\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part2-slash-command-with-text-response\" class=\"markdown-link\">Part 2: Slack Slash Command with Text Response</a></li>\n<li class=\"markdown-list-item\">Part 3: Slack Slash Command with Modal Response === YOU ARE HERE ===</li>\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part4-action-modal-submission\" class=\"markdown-link\">Part 4: Slack Action Modal Submission</a></li>\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part5-slash-block-kit-response\" class=\"markdown-link\">Part 5: Slack Slash Command with Block Kit Response</a></li>\n</ul>\n<p class=\"markdown-para\">Feel free to jump to a specific part of interest using the links above or follow along sequentially. You can also checkout the <a href=\"https://github.com/danielabar/retro-pulse\" class=\"markdown-link\">source code on Github</a> for the application we'll be building.</p>\n<p class=\"markdown-para\">This post assumes the reader has at least a beginner level familiarity with Ruby on Rails. It's also assumed the reader has used <a href=\"https://slack.com/\" class=\"markdown-link\">Slack</a> as an end user with basic interactions such as joining channels, sending messages, and participating in conversations.</p>\n<p class=\"markdown-para\">Part 1 of this series introduced <a href=\"../rails-slack-app-part1-oauth#introducing-retro-pulse\" class=\"markdown-link\">Retro Pulse</a>, a Slack app built with Rails for agile teams to manage their retrospectives with Slack. <a href=\"../rails-slack-app-part2-slash-command-with-text-response\" class=\"markdown-link\">Part 2</a> explained how to implement a Slack slash command to open a retrospective and return a markdown text response to the same Slack channel that initiated the request. Now in Part 3, we will learn how to implement another slash command <code>/retro-feedback</code> that will respond with a modal form, allowing the user to enter some feedback for the retrospective such as something the team should keep on doing, or stop doing, or something new to try.</p>\n<p class=\"markdown-para\">The interaction starts with a user entering the <code>/retro-feedback</code> slash command in a Slack workspace where the Retro Pulse app has been added:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrklEQVR42m2US2/TQBDH/RWQaBI7fq3tXb9f60fiPPpQBRUXTkhVQS1VQWrhwg1x4M4lLUeuXEpPIPEJ/2g3SZWGHn6anRnvaHb+3lVsh2HUzdHN9hCnJfqaBVW3MRhaDxCxx+LrnGYQieKyCO14hsl8H2U1gmF7sBx2j+0yWITCXGG7vrTrnENDuaevmbKw4vkxCt4i5w2KaoRmPEXVTlC1HaqmQ1G14E0H3oxlbDSZY9zN0IymaLsZpvMD1O0ENIihWy4UGiRyY5JxlPVIrnk9luRlIwtlZS19UbDgDdxiDOKnMG1PdizGJjodmg4UUdUPU7AwgR+lMiFiAvGBQBdsxFTThWqQ5Qw35iqPLD4IogxRWiDJuSy4KYK6tUEKsGYlxCaKUPVJb4idgY6easiNIrHuTtOJPIGY0WMF/itYVxVePD9EnFUQAgkFt38P3VoW3+58G1nw6Nk+Li+O0XS7UuWct4gzjjivEKUlopQjTMrlOhPrAixM4Uc5qJx9Jn0hrhTF0G0QkyAvOPK8QJYViOMEcZzC9Ri8FZT6EtMi0DQdw6EBbWjc2/sjZ1mLw6NX2H95gqA5AOW7sNIOZjLCgHEMWLmyHANaQmUC/gBNxAwCVbegqPvn8N//QPb5N6ovfzD++hfaxzvsXN6if/VLon64Q2+1FvTWXN6id3WHp+9+QvdL6IYFZTA9hvFmgfDiBvT8BsHFd9Dza9inC7hnC5DThfSFXa+ds4XMC999ew3j5BuctIHjMii24yHLS+R5iZLX8KgPy3ZgE1dCNuyjOB6I7cK1mbwxiu0FSPIaaVEjySuEaYkgLqSyNEjh+jEcGsFhW9AIhEUgNgWZdeh/eo3+pF5ePfHiiH+QeIFE3E9h1y+OSRhMZ8nSpxCN+FEG5ifwsgLO3hR6GOEf9jnlWtlshBQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro feedback slash hint\"\n        title=\"slack app demo retro feedback slash hint\"\n        src=\"/static/85d36db28d6f0d86d146e59a379f0ff3/5a190/slack-app-demo-retro-feedback-slash-hint.png\"\n        srcset=\"/static/85d36db28d6f0d86d146e59a379f0ff3/772e8/slack-app-demo-retro-feedback-slash-hint.png 200w,\n/static/85d36db28d6f0d86d146e59a379f0ff3/e17e5/slack-app-demo-retro-feedback-slash-hint.png 400w,\n/static/85d36db28d6f0d86d146e59a379f0ff3/5a190/slack-app-demo-retro-feedback-slash-hint.png 800w,\n/static/85d36db28d6f0d86d146e59a379f0ff3/64d87/slack-app-demo-retro-feedback-slash-hint.png 818w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">After hitting <kbd class=\"markdown-kbd\">Enter</kbd>, the app responds with a modal:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB70lEQVR42pWUz27TQBDG/QJwgJbYu+u1d/03tuMmTeqEKGoilJICLUiReAwuXHkJjrzth2aSGBcqFB9+nvHa/mZ2ZtbOrKxRpAVMnCNKhjBRChNlsHHO0BpBfmASCBVC+oYhX2kLHcbwg4jvnf32AbfNLTbbHe4/PGJ35G73Ee+2O7y//4THL3s8fN6jWaww8HQr6MmAA+VFzUGFb+CoIIb0LYTU8ISGpAxU0N4T5B/WgtZ2/cM7AX/rjG+WWG7ukF/N4AUJpMkgTMa2y3NrT56HKWftqOE1dFZDpSPIuIRMqv8Td0gqiLiCSiroquGgjsjGcO0QHomR6InkPEQy4mRUMeUsnfF0jvlyjfq6gfAtPKqntpBU2z5oe+iyjTLkxQhxSuORI81K7pjyTT8oCaphaFOkecUiSVZiWNRsKVofWkG6uDQeMoArAvZdGoHjrJ3DP4J9s+nSFSR4y3TcyNLROtnTC+dCR48znEwbzJolpjdvUY4mzLCs28h9ts1dpu4W1RVHoTr22jIJ6SNHUadP8f9GyRDqjX/A1X+a0gcdRtAmgdYR3DzHxXqOy80CF83kqaA4q06GZ3SxWmOU13i5mkL9/I7y1w+8+PYVHm3Z9Xx4woc6/a461hX+sww8BfpuoEO8jiO8ii0ureX136pX9gIazbxwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack-app-demo-retro-feedback-modal\"\n        title=\"slack-app-demo-retro-feedback-modal\"\n        src=\"/static/04ce075d42c7c65bc1d6af8f2dcc9971/5a190/slack-app-demo-retro-feedback-modal.png\"\n        srcset=\"/static/04ce075d42c7c65bc1d6af8f2dcc9971/772e8/slack-app-demo-retro-feedback-modal.png 200w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/e17e5/slack-app-demo-retro-feedback-modal.png 400w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/5a190/slack-app-demo-retro-feedback-modal.png 800w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/c1b63/slack-app-demo-retro-feedback-modal.png 1200w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/e4611/slack-app-demo-retro-feedback-modal.png 1298w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">The modal has a dropdown for the category of feedback:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACh0lEQVR42oWT2XLTMBiFfdV6l504cSx5l7xkJYvTppOUUjowZbjhjgfgBXgOXvowUtKSMtBefHNkyzqSfp9fcx0Pjk1g6BYM3YR+acA0LFiWDdOyn/XF2LRgnGGax3dyTvNID9JUmriuB9/vwyU9WA6B5XhKbddTWDaB7Xjw/ABe7w/E6yt1XA8acX1I5O6jKMGXwz267gYfHj7j9u4B7+8/YX97j8PdR3x6/IrD3QPSogJNCtCkRJxx1OM5CtHC7w+gyVMR93jCYcgwn20gqjF41YIrHaPgDUrRQNRjpTTOEbFMQeMMcVogTkt4vcHxhI7twrYcDKMYs+tbTLs9Ij7BqBwr5Pj8mYrpCyI+BRNT+E+GpmFDv9AxZDmSeq6uwzKhoBkHPSnLK8R5pfScOBfIJyv4QQjNMl1YpgNdNxFGCaaLNZabKyyWHebLDZbr4/jdegvRTFAIef1W1ewcXk9ONbQcENuBeakjjGIsVltsd3tsrm6w6nborvfYbG+w3R1QtTO1uJR1/ctQvhuEETSPChAq4IQFRgnHYtWpxdJQmlftFKI5Ihe9RhgxaH6xgJ3MoEcthglHknMVhSQXSllaPiOf/02potQbjKARh8C1HRgXlxiGFBlv1KQ0fDI9Zu515I/xe8Ep2MRXOZQ1XG6u1Y9oJws0p8BGcf6qWaRSwY+xkcGWvSx7eDhiKKsWWVljJIMrA/yGGWUZGM0QJ6dgyz6WpjLYg5Cq3d40OfsmrGoETY2oqtHrD0+GCqJOyE41i+L/G+W8wbrboeAtgh/fIH79RP/7I/q+7BTiKzPLtFUNBiFDEFKkcQrKUkSx7NlU1VciN5WMWKq0z0sE4xpBWcIlPn4DT9istnxJplYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo feedback modal\"\n        title=\"slack app demo feedback modal\"\n        src=\"/static/2d01a854408014cfcb9ad59fc2ee3237/5a190/slack-app-demo-feedback-modal.png\"\n        srcset=\"/static/2d01a854408014cfcb9ad59fc2ee3237/772e8/slack-app-demo-feedback-modal.png 200w,\n/static/2d01a854408014cfcb9ad59fc2ee3237/e17e5/slack-app-demo-feedback-modal.png 400w,\n/static/2d01a854408014cfcb9ad59fc2ee3237/5a190/slack-app-demo-feedback-modal.png 800w,\n/static/2d01a854408014cfcb9ad59fc2ee3237/5205c/slack-app-demo-feedback-modal.png 833w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">After selecting a category, the user can enter a multi-line comment containing their feedback, optionally check the Anonymous option if they don't want their Slack username shown alongside their feedback, and Submit the form. For example:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 646px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACG0lEQVR42o1U2W7aUBTkI9IEYoNtvO+7zRIiQkqbVupDqz5X6lv/oH3tF/STp5qDTQCByMPobsdz5mwemKaHL8sVXC9B2cwRJQXSvEacVUjyWvZ52aKs53J3PzYwUvX9qmomprYPbepgpGoYTM0An9ef4AUZ1pstlqsnbN5/xMPjExYPa7TzFdabD3jevshZmUyPCMe6BdMJoJsu7lUdA3rQbR+m4+PdUBXc3Cnd+nru70hyiqGidZhgQGaGlFcz8UbPVHEJfD8HUa5oGHDjhankJysbyZnlhmJE9dfA7yXKPmSqsr0Qjh9LYntvl5RcRK+QzFRHZdwP9wk39onvcY6ovz8JOZGwiSSvEGclwjhHlJYI2UZFjSDOZR/LXQ4vSOQ9KxoYltdFpe8I06JB2SzksWoXUqSqWcjHGQsmRWvlnXa04TdFPUO7WKGo57C9SNQKYZJVqGdL+ZjNTUOuh0QsWN0uxZZRUGXYDYEfZbsUkJAbVpUGbhDDDXbh+2GKKC0kLE6P151tNzybT1ZaQmYhSMYcBVEG148FrDib9bSJz/XpUVEMy0VRzSQsejc5NbYvTX6o5HDcjjDuV0MESA4nuiWSb0fj/Rhda5P9XjWgdGchfH3Q3z5inN/OfjjWcaNMRKH8bU69XwNTwUEIwwzDwIf19xfqf7+h/fmJW9M8JnwLqMr2I9hOiJHlYPL9Bf6Pb1C/bnGnGfgPqLDlyAbN4HIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app modal try filled in\"\n        title=\"slack app modal try filled in\"\n        src=\"/static/b81bea661c909e0477bbb776a2d11e5e/27524/slack-app-modal-try-filled-in.png\"\n        srcset=\"/static/b81bea661c909e0477bbb776a2d11e5e/772e8/slack-app-modal-try-filled-in.png 200w,\n/static/b81bea661c909e0477bbb776a2d11e5e/e17e5/slack-app-modal-try-filled-in.png 400w,\n/static/b81bea661c909e0477bbb776a2d11e5e/27524/slack-app-modal-try-filled-in.png 646w\"\n        sizes=\"(max-width: 646px) 100vw, 646px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">We'll be looking at handling the form submission in the next post. This post is focused on generating the modal response.</p>\n<h2 class=\"markdown-subtitle\" id=\"create-slash-command-in-slack\" style=\"position:relative;\"><a href=\"#create-slash-command-in-slack\" aria-label=\"create slash command in slack permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create Slash Command in Slack</h2>\n<p class=\"markdown-para\">The first step in implementing this is to navigate to <a href=\"https://api.slack.com/apps\" class=\"markdown-link\">Your Apps</a> on Slack, select the \"Retro Pulse\" app you created in <a href=\"../rails-slack-app-part1-oauth#create-slack-app\" class=\"markdown-link\">Part 1 of this series</a>, and then select \"Slash Commands\" from the Features section:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 249px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 247.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAyCAYAAABcfPsmAAAACXBIWXMAAAsTAAALEwEAmpwYAAAGmUlEQVR42o1XSW9bVRT2n2DPHrGABRISsENCrBASgnUlEENFQYBUARKIBQiJDYgyttDQ0qpVR0BASNIkHhO/2PF7tmPHcZzE8ZQ4iafYfoOfP/Sd5DlOaqdxdHwHv3fud+75zndvXIZuQG/rsAwTlmmi3Wqj1WyJ9fedsd7Soe+3HMtcW4fjx8UvXdexXa1ha6eCLrpwPv19fizLgmEaME0ThmHAtjuwbRvt9oFTV8eyUCiV8emrp/D522cQXUhC01SkUinkC3lE1AiSi0mkllLQDV0c211b2mqtikq1gk6nI0h7DkulTbzz+hmcffdDJBJJ+Pw+BINBxONxaFFN+j6fD7V67ZDDYqkoi3Lcc+iEXN6uoLy1IyEcBDwgZOMg5G7XlmcOhex0Dn26QNfuyryTDGfz+82ZN9rGQVKY3cpOFaOjY3C7vbh9+y6mptxQlDkUixswDBPNZhutlj7U2v1ZZqdr6lB8bvin7omN/f0nbl69jMZ2eR+yvQdb2gHWsQ5CJsL42hamExvwpcoILNG24EluYCpewLiaxYS2jnF1HVOxHHyJArwLeTH2p2M5LBcq6BjmHkJ6f+GrMTx+9hae/PgOHj59FY+8fwPPfPIHHv3gBh47ewtPf/InnvjoLh567Xe4XvwJrpd+3rOXz8P1/Dm8/rNXkDJ8FywLn90M49QPbrx3aRanfvTitfN+vPWLH29c8OP0r368ed4j9srXE3j283/w3Bf/ij3/5Sie+vQvfDcaA2xyUYfLJNRWC2vZHJbSGWSWM8hkVpDPF5HJrCKbzaFe35XVuUe2ZcI277deUuiwUd9FeimN+fA85pQ5sVRyEaG5EBLxBdRrNal1ocoR6vSbJIVf5FKj3thbZX9MKvEh8tBZXX+Asx5tmrtNBGeDCPgDmAnMIDIfwezMLDxuD3xeH3YbuzD3EfL548zleD5aCawUB2E/gv52oEOuXK/VEQ6F4ff54fV4ZS8n700itZhCx+oMLL1hjnsIGTYdcy/5crFQlD4LxO7YgpjG/nEo97PcQGIhgcXkIpbTy9KuZ9cFNfuaqsnv8VhcfnekaihCoiP/kokkolpUQs7n8liIL8g8Q+dvbDk+NmROEuWwT3+4JwrZMi1UK1WhzNrqmqDKrmUltFKxBIenRxMzFCEd7mzvYPTfUfw2MoLLly7j1s1bGLk4gumpaUHUf7I9kIfHhtzFiR0dSgrJy2xyw1cyK1LXNCbGqZCTkPqQQ2aQ5cf9o/NYNIbVlVUJmU5P4uyQOHAfWbPkJGnEPpO1Vd5CZadyH/f6UQ8kNiWLgkAORubnRSTUiIqpySkowaA8c5Lwe6XHmmWfWeeLjjgQrZO4/heHIe2JAxFSULmPlCwlqAjKifEJuKfdMqacEbWjQIOc7t0cWnsyxbCcfeT+cc4RDUc4OGY0TNYgp66O3UHLaCEajSIWjSKTychFiYLATHOcTqehqipisRgSiYSM2Zq2CavvTBaHtWIV2jUV/gs+jH87BvdP05j+YVLaye/vwXfBi5mLAXjPe/DfN6O4d25Cnps4Ny7v8X3TOlBzl3o5gpyWw3JyGSvJFWSXssgt57CWWuvZ6uIKMolltKtt6DUd7UobZtNEKVqEdlXtoRSE2hUVeTWHSDACz5gH8VAcyUgSQXcQkZkIwv4QFI+C2elZbOe3Ud+so1aqYndnFwU1j+g1DZbd57BRbgj02QszstrcxaD049diCP82h9CIgti1KOLXY4he1aBdichzbGPXo6iX64dDljtf10BIDSEwF4AyryAYDiKshZFeTSOgBOAP+rFeXBe96KADe/+Pd0PeFe+/Yzd1tHll223JXY/9ZqOJVqMJUzdlni2tY3RgtPaeod1HG4fYJDRLj0JL8lJo2WcpkvAkNlsWwEZpQypq6BHADgldq9ZECByCk9jOeHtruycWBDDs4BeEdMQTjRpI6eeBRIQ86aiRJDjHS6kllDfLUilDzxTn1Mut53qiSnNElscpHVF46ZzhHlWdgQLLlYmUYdF5IV+QcJ0wNzc2ZXxUbQaGzP3SVBVziiIoWMdUcF6amBRJWCCAkKIc0sWhh5SDkgrClgs4W8GXaS3DQqNtos1/ISRc43iEpAgvSERHPeSYau33+bBTqWIyuYE74Sw2ai1YhvFghDTuIflF45iLyVnC/1Wo3iT9A06/HrFJWmaTtCGF2HcuT0wGr8TGSe6Hzl4xCXRAyjAx7HOOxhPxpOdzL2TnMuTIe/8F6aTXYTr8H0nyhFd402zRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app feature slash\"\n        title=\"slack app feature slash\"\n        src=\"/static/24f495ea8719540544c9138d6c4729db/6a5fb/slack-app-feature-slash.png\"\n        srcset=\"/static/24f495ea8719540544c9138d6c4729db/772e8/slack-app-feature-slash.png 200w,\n/static/24f495ea8719540544c9138d6c4729db/6a5fb/slack-app-feature-slash.png 249w\"\n        sizes=\"(max-width: 249px) 100vw, 249px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Then click on the \"Create New Command\" button, and fill in the form as follows:</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Command:</strong> <code>/retro-feedback</code>. This is what the user will type into a Slack message to initiate an interaction with the Retro Pulse Rails app.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Request URL:</strong> For example: <code>https://12e4-203-0-113-42.ngrok-free.app/api/slack/command</code>. This is where Slack will send an HTTP POST request when the user submits this slash command from Slack. The hostname is your ngrok forwarding address that you got from starting <a href=\"../rails-slack-app-part1-oauth#ngrok\" class=\"markdown-link\">ngrok in part 1 of this series</a>. The route <code>/api/slack/command</code> is defined in the <code>slack-ruby-bot-server</code> gem that we included as part of our <a href=\"../rails-slack-app-part1-oauth#create-rails-app\" class=\"markdown-link\">Rails app in part 1 of this series</a>.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Short Description:</strong> <code>Provide some feedback for what's going well, or what to stop doing, or try</code>. This will be displayed as the user types in the slash command.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Usage Hint:</strong> Leave blank.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Escape Channels:</strong> Leave this unchecked. Turning this on will modify the parameters sent with a command by a user such as wrapping URLs in angle brackets and translating channel or user mentions into their correlated IDs. It's not necessary for this app. See the Slack <a href=\"https://api.slack.com/interactivity/slash-commands\" class=\"markdown-link\">documentation</a> if your app needs this option.</p>\n<p class=\"markdown-para\">Then click the \"Save\" button which appears all the way at the bottom right hand corner.</p>\n<h2 class=\"markdown-subtitle\" id=\"receive-slash-command-in-rails\" style=\"position:relative;\"><a href=\"#receive-slash-command-in-rails\" aria-label=\"receive slash command in rails permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Receive Slash Command in Rails</h2>\n<p class=\"markdown-para\">In Part 2 of this series, we learned how to add a <a href=\"../rails-slack-app-part2-slash-command-with-text-response#receive-slash-command-in-rails\" class=\"markdown-link\">handler to receive slash commands</a> using the <a href=\"https://github.com/slack-ruby/slack-ruby-bot-server-events\" class=\"markdown-link\">slack-ruby-bot-server-events</a> gem. Let's add another one to handle the <code>/retro-feedback</code> command.</p>\n<p class=\"markdown-para\">Start by adding a new file in the <code>bot/slash_commands</code> directory named <code>retro_feedback.rb</code>. The structure will be similar to the <code>/retro-open</code> command handler we added in Part 2, except this time, there will be no <code>command[:text]</code> because the <code>/retro-feedback</code> command does not accept any arguments.</p>\n<p class=\"markdown-para\">This command handler will make use of the <code>trigger_id</code> that Slack sends in the request. The <code>trigger_id</code> is a unique identifier generated by Slack when a user interacts with an interactive element (e.g., slash command, button click). It's used to open modals or perform other interactive actions in response to a user's command:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># bot/slash_commands/retro_feedback.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Events</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Essentially this is saying to the SlackRubyBotServer,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># If a &quot;/retro-feedback&quot; slash command is received from Slack,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># then execute this block.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">on</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:command</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;/retro-feedback&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |command|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># Use `command[:team_id]` from request parameters sent to us</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># by Slack to find the Team model persisted in the database</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:team_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Team</span><span class=\"mtk1\">.</span><span class=\"mtk5\">find_by</span><span class=\"mtk1\">(</span><span class=\"mtk4\">team_id:</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># Instantiate a slack client with the team token</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># so we can communicate back to the channel</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    slack_client </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Slack</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Web</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Client</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk4\">token:</span><span class=\"mtk1\"> team.</span><span class=\"mtk5\">token</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># This is the Slack channel we need to respond back to</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    channel_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:channel_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># Use `command[:trigger_id]` from request parameters sent to us Slack</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># This will be needed to generate the modal response.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    trigger_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:trigger_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    command.</span><span class=\"mtk5\">logger</span><span class=\"mtk1\">.</span><span class=\"mtk5\">info</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;=== COMMAND: retro-feedback, Team: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">team.</span><span class=\"mtk5\">name</span><span class=\"mtk7\">}</span><span class=\"mtk6\">, Channel: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">channel_id</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># == Do SOMETHING with trigger_id and slack_client ===</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># Return `nil`, otherwise the slack-ruby-bot-server-events gem</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># replies to the channel with a message &quot;true&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Also, use <code>require_relative</code> to load this command in the <code>bot/slash_commands.rb</code> file. We created this file in Part 2 for <a href=\"../rails-slack-app-part2-slash-command-with-text-response#receive-slash-command-in-rails\" class=\"markdown-link\">receiving slash commands</a>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># bot/slash_commands.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># This line was added in Part 2 of this series</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">require_relative</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;slash_commands/retro_open&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># === NEW ===</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">require_relative</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;slash_commands/retro_feedback&quot;</span></span></span></code></pre>\n<p class=\"markdown-para\">This file is loaded by <code>config.ru</code> to ensure that all the Slack handlers are loaded when Rails starts (which we also did in Part 2).</p>\n<p class=\"markdown-para\">At this point, if you restart the Rails server, and then enter <code>/retro-feedback</code> in any channel in a Slack workspace with the Retro Pulse app has been installed, you should see some info logging in the Rails server output displaying your team name and the channel id. Nothing will happen on the Slack side because the code isn't responding yet. The next section explains how to generate a modal response.</p>\n<h2 class=\"markdown-subtitle\" id=\"respond-with-example-modal\" style=\"position:relative;\"><a href=\"#respond-with-example-modal\" aria-label=\"respond with example modal permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Respond with Example Modal</h2>\n<p class=\"markdown-para\">In order to send back a modal response from the slash command, we'll make use of Slack <a href=\"https://api.slack.com/surfaces/modals\" class=\"markdown-link\">Modals</a> and <a href=\"https://api.slack.com/block-kit/building\" class=\"markdown-link\">Block Kit</a>.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Modal:</strong> The Slack app equivalent of an alert box, pop-up, or dialog box. Modals capture and maintain focus within Slack until the user submits or dismisses the modal.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Block Kit:</strong> A framework provided by Slack for building rich and interactive messages within the Slack platform. It allows developers to create visually appealing messages containing elements such as text, buttons, images, and input fields. Think of Block Kit as a set of building blocks for crafting dynamic user interfaces directly within Slack conversations.</p>\n<p class=\"markdown-para\">This will make more sense with an example. In the following code snippet, the <a href=\"https://api.slack.com/methods/views.open\" class=\"markdown-link\">views_open</a> method from the Slack API is used to trigger the opening of a modal in response to the <code>/retro-feedback</code> command. This method accepts a hash that represents the modal contents. The modal includes a title \"Example Modal\", a submit button, a cancel button, and an input block for users to enter some text:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># bot/slash_commands/retro_feedback.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Events</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">on</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:command</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;/retro-feedback&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |command|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:team_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Team</span><span class=\"mtk1\">.</span><span class=\"mtk5\">find_by</span><span class=\"mtk1\">(</span><span class=\"mtk4\">team_id:</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    slack_client </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Slack</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Web</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Client</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk4\">token:</span><span class=\"mtk1\"> team.</span><span class=\"mtk5\">token</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    channel_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:channel_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    trigger_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:trigger_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    command.</span><span class=\"mtk5\">logger</span><span class=\"mtk1\">.</span><span class=\"mtk5\">info</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;=== COMMAND: retro-feedback, Team: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">team.</span><span class=\"mtk5\">name</span><span class=\"mtk7\">}</span><span class=\"mtk6\">, Channel: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">channel_id</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    modal_payload </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\"> trigger_id,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">view:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;modal&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">callback_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;feedback_form&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Example Modal&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">emoji:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">submit:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Submit&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">emoji:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">close:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Cancel&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          </span><span class=\"mtk4\">emoji:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">blocks:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_block&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">element:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text_input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">action_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">multiline:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">placeholder:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Enter some text&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">label:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Comment&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    slack_client.</span><span class=\"mtk5\">views_open</span><span class=\"mtk1\">(modal_payload)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Details:</strong></p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\"><code>trigger_id</code> was extracted from the Slack request sent to the Rails app when the user entered <code>/retro-feedback</code>, we need to send it back to Slack as part of the request to open a modal so that Slack can \"connect\" the original user's request with this modal response.</li>\n<li class=\"markdown-list-item\"><code>callback_id</code> is a unique identifier assigned to the modal, helping your Slack app distinguish different modals from one another when user submits them.</li>\n<li class=\"markdown-list-item\"><code>title</code> will be displayed at the top of the modal.</li>\n<li class=\"markdown-list-item\">The <code>submit</code> and <code>close</code> attributes are optional. Slack will always generate these buttons, but you can optionally define them in the payload to override the default text that is displayed on the buttons.</li>\n<li class=\"markdown-list-item\">The <code>blocks</code> section is required. It contains an array of Slack block elements that make up the modal content. In this simple example, we only have a single element, a multi-line input with some placeholder text and a label. The Slack <a href=\"https://api.slack.com/reference/block-kit/blocks\" class=\"markdown-link\">reference documentation</a> covers all supported elements and options.</li>\n</ul>\n<p class=\"markdown-para\">After restarting the Rails server <code>bin/dev</code>, go to your Slack workspace, enter <code>/retro-feedback</code> in any channel and hit <kbd class=\"markdown-kbd\">Enter</kbd>, you should be presented with a modal like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABaElEQVR42pWT204CMRCG9xk4bbfttNvtHkCIMSBwIyYkEsCgCS+g8SmMF76EL/yb6SpRI6eLP5tuO9/MP51GnVgi1RZKEtqxRLMdQyoDsg6aUihtESfqoESiIaQGsyIhDZ42W8wmN5gvVliuN1jfP+BuscLmcYvFcg3F4H8ktYVJPXr9S+RlD9qkiJie+j4UeVjnw0ZedpFmBXxRwfkyBO4TgxlUJzCI+OfVcITReIqy20dHKAhJ4XCizC7oFAVgIglFdYGqNwjV+aIL63Jo485UFpJHXEWWVwHKQK6S7R6yuc+6IgaaHEqbYJMviL+chDfPBoYKtQXZDIp+Wzi1b4rPGgdKfVhHiaIAPL9nPKcOJCjISvvVQ0m7co/fYu3GOA9jMijn0bqdoDWfojm7RkI74LfF41Z5kIfjKUbDCURZovH+gsHHKxpvz2g7Vw822+4IiThI1fp6UvEfiZ+ShJZzaGYuwDjmE+kkSU3Lv1NmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app example modal\"\n        title=\"slack app example modal\"\n        src=\"/static/99e1158169394001522213467470a21a/5a190/slack-app-example-modal.png\"\n        srcset=\"/static/99e1158169394001522213467470a21a/772e8/slack-app-example-modal.png 200w,\n/static/99e1158169394001522213467470a21a/e17e5/slack-app-example-modal.png 400w,\n/static/99e1158169394001522213467470a21a/5a190/slack-app-example-modal.png 800w,\n/static/99e1158169394001522213467470a21a/c1b63/slack-app-example-modal.png 1200w,\n/static/99e1158169394001522213467470a21a/6c2de/slack-app-example-modal.png 1334w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"respond-with-retro-feedback-modal\" style=\"position:relative;\"><a href=\"#respond-with-retro-feedback-modal\" aria-label=\"respond with retro feedback modal permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Respond with Retro Feedback Modal</h2>\n<p class=\"markdown-para\">Now that we understand the basics of generating a modal response, we're ready to start building the actual modal to collect feedback on the retrospective. Recall this is what we need to generate:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB70lEQVR42pWUz27TQBDG/QJwgJbYu+u1d/03tuMmTeqEKGoilJICLUiReAwuXHkJjrzth2aSGBcqFB9+nvHa/mZ2ZtbOrKxRpAVMnCNKhjBRChNlsHHO0BpBfmASCBVC+oYhX2kLHcbwg4jvnf32AbfNLTbbHe4/PGJ35G73Ee+2O7y//4THL3s8fN6jWaww8HQr6MmAA+VFzUGFb+CoIIb0LYTU8ISGpAxU0N4T5B/WgtZ2/cM7AX/rjG+WWG7ukF/N4AUJpMkgTMa2y3NrT56HKWftqOE1dFZDpSPIuIRMqv8Td0gqiLiCSiroquGgjsjGcO0QHomR6InkPEQy4mRUMeUsnfF0jvlyjfq6gfAtPKqntpBU2z5oe+iyjTLkxQhxSuORI81K7pjyTT8oCaphaFOkecUiSVZiWNRsKVofWkG6uDQeMoArAvZdGoHjrJ3DP4J9s+nSFSR4y3TcyNLROtnTC+dCR48znEwbzJolpjdvUY4mzLCs28h9ts1dpu4W1RVHoTr22jIJ6SNHUadP8f9GyRDqjX/A1X+a0gcdRtAmgdYR3DzHxXqOy80CF83kqaA4q06GZ3SxWmOU13i5mkL9/I7y1w+8+PYVHm3Z9Xx4woc6/a461hX+sww8BfpuoEO8jiO8ii0ureX136pX9gIazbxwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack-app-demo-retro-feedback-modal\"\n        title=\"slack-app-demo-retro-feedback-modal\"\n        src=\"/static/04ce075d42c7c65bc1d6af8f2dcc9971/5a190/slack-app-demo-retro-feedback-modal.png\"\n        srcset=\"/static/04ce075d42c7c65bc1d6af8f2dcc9971/772e8/slack-app-demo-retro-feedback-modal.png 200w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/e17e5/slack-app-demo-retro-feedback-modal.png 400w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/5a190/slack-app-demo-retro-feedback-modal.png 800w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/c1b63/slack-app-demo-retro-feedback-modal.png 1200w,\n/static/04ce075d42c7c65bc1d6af8f2dcc9971/e4611/slack-app-demo-retro-feedback-modal.png 1298w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Some of this we've already seen how to do including generating the title, a multi-line text input, and the Cancel and Submit buttons. The new parts are the dropdown value for Category (keep, stop, and try), and the optional checkbox for submitting the feedback anonymously.</p>\n<p class=\"markdown-para\">To generate a select input element with a static list of options, Slack provides the <a href=\"https://api.slack.com/reference/block-kit/block-elements#static_select\" class=\"markdown-link\">static_select</a> type. This supports specifying a placeholder such as \"Select category\", and a list of options. Each option has display text and the value that will be submitted if user selects this option. Adding the category <code>static_select</code> input type to our list of blocks looks like this:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># bot/slash_commands/retro_feedback.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Events</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">on</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:command</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;/retro-feedback&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |command|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># extract params from command</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    modal_payload </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\"> trigger_id,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">view:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;modal&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">callback_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;feedback_form&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">submit:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">close:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">blocks:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_block&quot;</span><span class=\"mtk1\">, ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;category_block&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">element:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;static_select&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">action_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;category_select&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">placeholder:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Select category&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">options:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Something we should keep doing&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">value:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;keep&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Something we should stop doing&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">value:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;stop&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Something to try&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">value:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;try&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">label:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Category&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    slack_client.</span><span class=\"mtk5\">views_open</span><span class=\"mtk1\">(modal_payload)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">To complete the modal generation, we also need to add the Anonymous checkbox. This is for user's that don't want their Slack username displayed later when the retrospective feedback is being discussed. The Slack reference documentation explains how to use a <a href=\"https://api.slack.com/reference/block-kit/block-elements#checkboxes\" class=\"markdown-link\">checkbox element</a>. It's type is <code>checkboxes</code>, and requires an array of options. We'll also set <code>optional: true</code> to tell Slack that this isn't required. Here's what the <code>blocks</code> array looks like with the checkbox element added:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># bot/slash_commands/retro_feedback.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Events</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">on</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:command</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;/retro-feedback&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |command|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># extract params from command...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    modal_payload </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\"> trigger_id,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">view:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;modal&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">callback_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;feedback_form&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">submit:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">close:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">blocks:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_block&quot;</span><span class=\"mtk1\">, ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;category_block&quot;</span><span class=\"mtk1\">, ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;anonymous_block&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">optional:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">element:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;checkboxes&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">action_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;anonymous_checkbox&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">options:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                    </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Yes&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                  </span><span class=\"mtk4\">value:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;true&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">                }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            </span><span class=\"mtk4\">label:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">              </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Anonymous&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">            }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    slack_client.</span><span class=\"mtk5\">views_open</span><span class=\"mtk1\">(modal_payload)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Restarting the Rails server at this point, and then running <code>/retro-feedback</code> in Slack will now generate the form with all the required inputs.</p>\n<p class=\"markdown-para\">However, before declaring this task done, there's a problem. This code is way too long (if using Rubocop, the <code>Metrics/BlockLength</code> violation will be indicated). Furthermore, having it in the command handler makes it impossible to test. This will be addressed in the next section.</p>\n<h2 class=\"markdown-subtitle\" id=\"refactor\" style=\"position:relative;\"><a href=\"#refactor\" aria-label=\"refactor permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Refactor</h2>\n<p class=\"markdown-para\">The issue of an overly long command handler can be addressed in a similar manner to what was done in Part 2 of this series, where the command handler was refactored by moving the business logic into an interactor named <code>OpenRetrospective</code>. A brief discussion of <a href=\"../rails-slack-app-part2-slash-command-with-text-response#refactor\" class=\"markdown-link\">how to organize business logic in Rails applications</a> was also covered in Part 2.</p>\n<p class=\"markdown-para\">We'll do something similar now by introducing an <code>InitiateFeedbackForm</code> interactor, which will receive the <code>trigger_id</code> and <code>slack_client</code> from the command handler, build the modal response, and send it back to the slack channel. This will simplify the command handler to look like this:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># bot/slash_commands/retro_feedback.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Events</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">on</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:command</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;/retro-feedback&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |command|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:team_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Team</span><span class=\"mtk1\">.</span><span class=\"mtk5\">find_by</span><span class=\"mtk1\">(</span><span class=\"mtk4\">team_id:</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    slack_client </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Slack</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Web</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Client</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk4\">token:</span><span class=\"mtk1\"> team.</span><span class=\"mtk5\">token</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    channel_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:channel_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    trigger_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:trigger_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    command.</span><span class=\"mtk5\">logger</span><span class=\"mtk1\">.</span><span class=\"mtk5\">info</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;=== COMMAND: retro-feedback, Team: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">team.</span><span class=\"mtk5\">name</span><span class=\"mtk7\">}</span><span class=\"mtk6\">, Channel: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">channel_id</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># Pass in the `trigger_id` and `slack_client` as context to the interactor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">InitiateFeedbackForm</span><span class=\"mtk1\">.</span><span class=\"mtk5\">call</span><span class=\"mtk1\">(</span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\">, </span><span class=\"mtk4\">slack_client:</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">The interactor is responsible for building the modal payload, and sending it back to the channel using the slack client.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># app/interactors/initiate_feedback_form.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">InitiateFeedbackForm</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">include</span><span class=\"mtk1\"> Interactor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">call</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    modal_payload </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> build_modal_payload</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    context.</span><span class=\"mtk5\">slack_client</span><span class=\"mtk1\">.</span><span class=\"mtk5\">views_open</span><span class=\"mtk1\">(modal_payload)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">rescue</span><span class=\"mtk1\"> StandardError =&gt; e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    error_message </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Error in InitiateFeedbackForm: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">error.</span><span class=\"mtk5\">message</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    backtrace </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> error.</span><span class=\"mtk5\">backtrace</span><span class=\"mtk1\">.</span><span class=\"mtk5\">join</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">\\n</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">logger</span><span class=\"mtk1\">.</span><span class=\"mtk5\">error</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">#{</span><span class=\"mtk1\">error_message</span><span class=\"mtk7\">}</span><span class=\"mtk4\">\\n</span><span class=\"mtk7\">#{</span><span class=\"mtk1\">backtrace</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    context.</span><span class=\"mtk5\">fail!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">private</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Use `trigger_id` from context passed in by the Slack command handler</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_modal_payload</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\"> context.</span><span class=\"mtk5\">trigger_id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">view:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;modal&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">callback_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;feedback_form&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">submit:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">close:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">blocks:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_block&quot;</span><span class=\"mtk1\">, ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;category_block&quot;</span><span class=\"mtk1\">, ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;anonymous_block&quot;</span><span class=\"mtk1\">, ... }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">While this eliminates the Rubocop warnings from the Slack command handler <code>bot/slash_commands/retro_feedback.rb</code>, it introduces a new problem. The <code>build_modal_payload</code> method of the <code>InitiateFeedbackForm</code> is too long, which Rubocop will flag with the <code>Metrics/MethodLength</code> rule. It looks condensed above because I've replaced many sections with <code>...</code> to easily fit it in a smaller view, but the actual payload is over 100 lines long!</p>\n<p class=\"markdown-para\">One way to deal with this would be to break up the building of individual portions of the modal payload into smaller methods. For example, extract a method such as <code>build_title_block</code> that only deals with the title logic:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># app/interactors/initiate_feedback_form.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">InitiateFeedbackForm</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">include</span><span class=\"mtk1\"> Interactor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">call</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">private</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_modal_payload</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\"> context.</span><span class=\"mtk5\">trigger_id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">view:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;modal&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">callback_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;feedback_form&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> build_title_block,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">submit:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">close:</span><span class=\"mtk1\"> { ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">blocks:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_block&quot;</span><span class=\"mtk1\">, ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;category_block&quot;</span><span class=\"mtk1\">, ... },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          { </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;anonymous_block&quot;</span><span class=\"mtk1\">, ... }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_title_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Retrospective Feedback&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">emoji:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">This pattern could be carried on for every element of the modal. However, since the logic is so closely tied to the Slack API, it will be cleaner to extract Slack-specific form building logic into the <code>lib</code> directory as a new module <code>SlackFormBuilder</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># lib/slack_form_builder.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">module</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">SlackFormBuilder</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">module_function</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_title_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Retrospective Feedback&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">emoji:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_submit_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Submit&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">emoji:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_close_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Cancel&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">emoji:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_category_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;category_block&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">element:</span><span class=\"mtk1\"> build_static_select_element,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">label:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Category&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_static_select_element</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;static_select&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">action_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;category_select&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">placeholder:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Select category&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">options:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">build_option</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;Something we should keep doing&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;keep&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">build_option</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;Something we should stop doing&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;stop&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">build_option</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;Something to try&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;try&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_option</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">text</span><span class=\"mtk1\">, </span><span class=\"mtk10 mtki\">value</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">text:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">value:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_comment_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_block&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">element:</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_plain_text_input_element</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;Enter your feedback&quot;</span><span class=\"mtk1\">),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">label:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Comment&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_plain_text_input_element</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">placeholder_text</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text_input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">action_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;comment_input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">multiline:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">placeholder:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> placeholder_text</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_anonymous_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;input&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">block_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;anonymous_block&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">optional:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">element:</span><span class=\"mtk1\"> build_checkboxes_element,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">label:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;plain_text&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Anonymous&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_checkboxes_element</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;checkboxes&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">action_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;anonymous_checkbox&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">options:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">build_option</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;Yes&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;true&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<aside class=\"markdown-aside\">\nNote that the <a class=\"markdown-link\" href=\"https://docs.ruby-lang.org/en/3.2/Module.html#method-i-module_function\">module_function</a> method creates module functions for the named methods. This allows these functions to be called with the module as a receiver, and also become available as instance methods to classes that mix in the module. The ability to call the functions directly on the module is convenient for <a class=\"markdown-link\" href=\"https://github.com/danielabar/retro-pulse/blob/main/spec/lib/slack_form_builder_spec.rb\">unit testing</a>.\n</aside>\n<p class=\"markdown-para\">With the <code>SlackFormBuilder</code> module in place that does all the work of building the Slack block kit form components, the <code>InitiateFeedbackForm</code> interactor can be simplified to use it as follows:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">InitiateFeedbackForm</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">include</span><span class=\"mtk1\"> Interactor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Mixin the custom module so we can access the methods</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># such as `build_title_block` as instance methods</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">include</span><span class=\"mtk1\"> SlackFormBuilder</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">call</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    modal_payload </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> build_modal_payload</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    context.</span><span class=\"mtk5\">slack_client</span><span class=\"mtk1\">.</span><span class=\"mtk5\">views_open</span><span class=\"mtk1\">(modal_payload)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">rescue</span><span class=\"mtk1\"> StandardError =&gt; e</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    error_message </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Error in InitiateFeedbackForm: </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">error.</span><span class=\"mtk5\">message</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    backtrace </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> error.</span><span class=\"mtk5\">backtrace</span><span class=\"mtk1\">.</span><span class=\"mtk5\">join</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk4\">\\n</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">logger</span><span class=\"mtk1\">.</span><span class=\"mtk5\">error</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">#{</span><span class=\"mtk1\">error_message</span><span class=\"mtk7\">}</span><span class=\"mtk4\">\\n</span><span class=\"mtk7\">#{</span><span class=\"mtk1\">backtrace</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    context.</span><span class=\"mtk5\">fail!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">private</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Make use of the SlackFormBuilder module methods</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">build_modal_payload</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\"> context.</span><span class=\"mtk5\">trigger_id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">view:</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">type:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;modal&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">callback_id:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;feedback_form&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> build_title_block,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">submit:</span><span class=\"mtk1\"> build_submit_block,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">close:</span><span class=\"mtk1\"> build_close_block,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk4\">blocks:</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          build_category_block,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          build_comment_block,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          build_anonymous_block</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<h2 class=\"markdown-subtitle\" id=\"validation\" style=\"position:relative;\"><a href=\"#validation\" aria-label=\"validation permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Validation</h2>\n<p class=\"markdown-para\">One last thing the <code>InitiateFeedbackForm</code> needs to do is verify that an open retrospective actually exists, and if not, it should notify the user with a direct message (DM) that made the request. There's no point in letting the user provide feedback if there's nowhere to save it to. The <a href=\"../rails-slack-app-part2-slash-command-with-text-response#implement-slash-command\" class=\"markdown-link\">Retrospective model</a> was created in Part 2 of this series.</p>\n<p class=\"markdown-para\">In order to send a direct message, we'll need to know the Slack user that made the <code>/retro-feedback</code> request. This can be extracted from the <code>command</code> object exposed by the command handler, and passed on to the interactor context:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># bot/slash_commands/retro_feedback.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Events</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">on</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:command</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;/retro-feedback&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |command|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:team_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    team </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Team</span><span class=\"mtk1\">.</span><span class=\"mtk5\">find_by</span><span class=\"mtk1\">(</span><span class=\"mtk4\">team_id:</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    slack_client </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Slack</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Web</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Client</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk4\">token:</span><span class=\"mtk1\"> team.</span><span class=\"mtk5\">token</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    channel_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:channel_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    trigger_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:trigger_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># === NEW: Extract the user_id ===</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    user_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> command[</span><span class=\"mtk4\">:user_id</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># === NEW: Also pass in user_id ===</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">InitiateFeedbackForm</span><span class=\"mtk1\">.</span><span class=\"mtk5\">call</span><span class=\"mtk1\">(</span><span class=\"mtk4\">trigger_id:</span><span class=\"mtk1\">, </span><span class=\"mtk4\">slack_client:</span><span class=\"mtk1\">, </span><span class=\"mtk4\">user_id:</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Then the <code>InitiateFeedbackForm</code> is modified to check for an open retrospective, and send the user an error message using the <a href=\"https://api.slack.com/methods/chat.postMessage\" class=\"markdown-link\">chat_postMessage</a> API from the <code>slack_client</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">InitiateFeedbackForm</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">include</span><span class=\"mtk1\"> Interactor</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">include</span><span class=\"mtk1\"> SlackFormBuilder</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">call</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    retrospective </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Retrospective</span><span class=\"mtk1\">.</span><span class=\"mtk5\">find_by</span><span class=\"mtk1\">(</span><span class=\"mtk4\">status:</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Retrospective</span><span class=\"mtk1\">.</span><span class=\"mtk5\">statuses</span><span class=\"mtk1\">[</span><span class=\"mtk4\">:open</span><span class=\"mtk1\">])</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> no_open_retrospective_message </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> retrospective.</span><span class=\"mtk5\">nil?</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">private</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># Specifying `user_id` for the channel will send a direct message to the user</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">no_open_retrospective_message</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    message </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;There is no open retrospective. Please run `/retro-open` to open one.&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    warning_icon </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;:warning:&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    context.</span><span class=\"mtk5\">slack_client</span><span class=\"mtk1\">.</span><span class=\"mtk5\">chat_postMessage</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">channel:</span><span class=\"mtk1\"> context.</span><span class=\"mtk5\">user_id</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">#{</span><span class=\"mtk1\">warning_icon</span><span class=\"mtk7\">}</span><span class=\"mtk6\"> </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">message</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    )</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">With this change in place, if a user enters <code>/retro-feedback</code> in a Slack workspace with the Retro Pulse app installed, and there is no open retrospective, they will get a notification from the app as shown below:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 19.499999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVR42pWPW2rDMBREvYJSUlsPy3rYUpxUbUxCmuYFIQvI/rdzikXz334c5g4MzJ1KqBbfR4wNvC5qGqkRyvAmNY0yXPdH7rcDX98XPjY73vNEGnMhphXLFElpLN6FSJXHzPl05XA8FzoXeBGCR5vZmYQOAyl6jO3p3ID1ERdS0RkfBtzvPWcq6wfWecO03bPOn8wf11LTK0unLcp4tOlpu/AnqlqoMlNqU/TpF1LRqLa0/ocfYsNt9W/41BoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sack app dm notify and message\"\n        title=\"sack app dm notify and message\"\n        src=\"/static/2466eae79504831ae1eb48e21312a1c1/5a190/slack-app-dm-notify-and-message.png\"\n        srcset=\"/static/2466eae79504831ae1eb48e21312a1c1/772e8/slack-app-dm-notify-and-message.png 200w,\n/static/2466eae79504831ae1eb48e21312a1c1/e17e5/slack-app-dm-notify-and-message.png 400w,\n/static/2466eae79504831ae1eb48e21312a1c1/5a190/slack-app-dm-notify-and-message.png 800w,\n/static/2466eae79504831ae1eb48e21312a1c1/c1b63/slack-app-dm-notify-and-message.png 1200w,\n/static/2466eae79504831ae1eb48e21312a1c1/c65fa/slack-app-dm-notify-and-message.png 1434w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"next-steps\" style=\"position:relative;\"><a href=\"#next-steps\" aria-label=\"next steps permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next Steps</h2>\n<p class=\"markdown-para\">At this point, we've built the capability for a Slack user to enter a custom slash command <code>/retro-feedback</code>, and have the app respond with a nicely formatted modal. The user can then select the category of the retrospective feedback (whether it's something the team should keep on doing, stop doing, or try for next time), enter their feedback in a multi-line input, and optionally check off if they wish to remain anonymous. In the <a href=\"../rails-slack-app-part4-action-modal-submission\" class=\"markdown-link\">next post in this series</a>, we'll learn how to handle the form submission, save the user's feedback in the database, and send a direct message back to the user to confirm their feedback was received.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .mtk9 { color: #66D9EF; }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk10 { color: #FD971F; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","timeToRead":13,"tableOfContents":"<ul>\n<li><a href=\"#create-slash-command-in-slack\">Create Slash Command in Slack</a></li>\n<li><a href=\"#receive-slash-command-in-rails\">Receive Slash Command in Rails</a></li>\n<li><a href=\"#respond-with-example-modal\">Respond with Example Modal</a></li>\n<li><a href=\"#respond-with-retro-feedback-modal\">Respond with Retro Feedback Modal</a></li>\n<li><a href=\"#refactor\">Refactor</a></li>\n<li><a href=\"#validation\">Validation</a></li>\n<li><a href=\"#next-steps\">Next Steps</a></li>\n</ul>","frontmatter":{"title":"Build a Rails App with Slack Part 3: Slash Command with Modal Response","date":"03 Jul 2024","description":"Learn how to build a Slack application with Rails in this comprehensive multi-part series. Part 3 covers configuring and handling a Slack Slash Command to perform a business action and responding with a modal form response in the channel.","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#387888","images":{"fallback":{"src":"/static/f10c796645737e9468458b7b67b5120d/0bfce/slack-feat-img-3-ian-stauffer-zPgO1nKX8IU-unsplash.png","srcSet":"/static/f10c796645737e9468458b7b67b5120d/2b366/slack-feat-img-3-ian-stauffer-zPgO1nKX8IU-unsplash.png 225w,\n/static/f10c796645737e9468458b7b67b5120d/75a1e/slack-feat-img-3-ian-stauffer-zPgO1nKX8IU-unsplash.png 450w,\n/static/f10c796645737e9468458b7b67b5120d/0bfce/slack-feat-img-3-ian-stauffer-zPgO1nKX8IU-unsplash.png 900w","sizes":"(min-width: 900px) 900px, 100vw"},"sources":[{"srcSet":"/static/f10c796645737e9468458b7b67b5120d/9c09e/slack-feat-img-3-ian-stauffer-zPgO1nKX8IU-unsplash.webp 225w,\n/static/f10c796645737e9468458b7b67b5120d/aeef2/slack-feat-img-3-ian-stauffer-zPgO1nKX8IU-unsplash.webp 450w,\n/static/f10c796645737e9468458b7b67b5120d/d9df7/slack-feat-img-3-ian-stauffer-zPgO1nKX8IU-unsplash.webp 900w","type":"image/webp","sizes":"(min-width: 900px) 900px, 100vw"}]},"width":900,"height":602}}}},"fields":{"slug":"/blog/rails-slack-app-part3-slash-command-with-modal-response/"}},"relatedP":{"edges":[{"node":{"id":"1415cf2c-484a-5280-88b9-5e30b7c3fb5a","frontmatter":{"title":"ActiveRecord JSON Column with MySQL and MariaDB","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#e8f8f8","images":{"fallback":{"src":"/static/15ee4b0f646465637977f3a98b6d6b27/26528/mariadb-mysql-json.jpg","srcSet":"/static/15ee4b0f646465637977f3a98b6d6b27/26528/mariadb-mysql-json.jpg 300w,\n/static/15ee4b0f646465637977f3a98b6d6b27/43429/mariadb-mysql-json.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/15ee4b0f646465637977f3a98b6d6b27/5d6c3/mariadb-mysql-json.webp 300w,\n/static/15ee4b0f646465637977f3a98b6d6b27/68dbc/mariadb-mysql-json.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/activerecord-json-mysql-mariadb/"}}},{"node":{"id":"7a565b39-3dd4-5740-82a2-867e3565078c","frontmatter":{"title":"Old Ruby and New Mac","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#a8b8a8","images":{"fallback":{"src":"/static/891a432040b9dec710096ad8bac91eed/ad250/ruby-in-box.png","srcSet":"/static/891a432040b9dec710096ad8bac91eed/ad250/ruby-in-box.png 300w,\n/static/891a432040b9dec710096ad8bac91eed/b64d1/ruby-in-box.png 600w","sizes":"300px"},"sources":[{"srcSet":"/static/891a432040b9dec710096ad8bac91eed/5d6c3/ruby-in-box.webp 300w,\n/static/891a432040b9dec710096ad8bac91eed/68dbc/ruby-in-box.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/old-ruby-new-mac/"}}},{"node":{"id":"bb0af7b8-9d5f-597f-90cb-a4da75c3c9a9","frontmatter":{"title":"Roll Your Own Search with Rails and Postgres: Search Engine","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#d8c8a8","images":{"fallback":{"src":"/static/86310660995a38a9254ece85739c237f/26528/roll-search-3.jpg","srcSet":"/static/86310660995a38a9254ece85739c237f/26528/roll-search-3.jpg 300w,\n/static/86310660995a38a9254ece85739c237f/43429/roll-search-3.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/86310660995a38a9254ece85739c237f/5d6c3/roll-search-3.webp 300w,\n/static/86310660995a38a9254ece85739c237f/68dbc/roll-search-3.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/roll-your-own-search-service-for-gatsby-part3/"}}}]}},"pageContext":{"slug":"/blog/rails-slack-app-part3-slash-command-with-modal-response/","relatedPosts":["Old Ruby and New Mac","ActiveRecord JSON Column with MySQL and MariaDB","Roll Your Own Search with Rails and Postgres: Search Engine"]}},"staticQueryHashes":["163244226"],"slicesMap":{}}