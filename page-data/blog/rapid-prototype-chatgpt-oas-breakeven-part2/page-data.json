{"componentChunkName":"component---src-templates-post-js","path":"/blog/rapid-prototype-chatgpt-oas-breakeven-part2/","result":{"data":{"markdownRemark":{"html":"<p class=\"markdown-para\">This is the second of a two-part series on rapid prototyping with ChatGPT. The <a href=\"../rapid-prototype-chatgpt-oas-breakeven-part1\" class=\"markdown-link\">first part</a> covered the foundational steps in building an Old Age Security (OAS) breakeven calculator - a tool designed to help low-income Canadian seniors decide whether to delay their OAS pension. The OAS pension is a monthly payment for Canadians aged 65 and older, and the decision to delay it can have a significant impacts, especially for those eligible for the Guaranteed Income Supplement (GIS).</p>\n<p class=\"markdown-para\">In part one, I introduced the problem, defined the business rules, and, with the help of ChatGPT, built an initial visualization for comparing different retirement scenarios. Throughout the development process, ChatGPT has acted as a valuable pairing partner, assisting with problem-solving and streamlining prototyping decisions. Now, with the core calculations in place, we’ll dive into the next phase: enabling users to interact with the tool by inputting their own data, such as the age they plan to start receiving OAS, their years of residency, and income range for GIS eligibility. Once again, ChatGPT will be used to assist at each step. The final prototype is available <a href=\"https://danielabar.github.io/oas-delay-calculator-prototype/\" class=\"markdown-link\">here</a>.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Disclaimer:</strong> The content in this post is for informational purposes only and should not be considered financial advice. The OAS pension breakeven calculator prototype is a tool designed to illustrate potential outcomes based on specific scenarios. Individual financial situations vary, and it’s important to consult with a qualified financial advisor or professional before making any decisions regarding Old Age Security (OAS) or other financial matters.</p>\n<h2 class=\"markdown-subtitle\" id=\"user-input-form\" style=\"position:relative;\"><a href=\"#user-input-form\" aria-label=\"user input form permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>User Input Form</h2>\n<p class=\"markdown-para\">Where we left off in Part 1, there was a functional visualization comparing the effects of taking OAS at age 65 (the default age), versus delaying it to age 70:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwElEQVR42mVT246bMBTk/38iu1/SVtp226TJZqMqSkJYli7hji/YhqR9mOqcYITUh8HmGM+ZGZvgFEZ4+vqM7esO338ssVytsVm/YLX8yfP15gWrzRa7X3sY20N3ltEZx+8MmhvHtSAvKhyPIeI4wVucIIpi7E5nbA8n7PcHHMMzws0O0SGEcQOut78M11+ZgGF7BpEG1g0QUvPCcP3DaIxDITWk1BBKw5YtOqHx6fMXLBYPWDw8InqL4YYbE1nZwVTirpAeRVmjaSUXyA51stTVK3A9bH/F8XRm0qdvz8jLCr1xEJcS+UeOrBZsP2iFYkKvsptlNOXVOShtcBvtDv0NomyRJhekZYOqM1A+QyKjHInQzFUR4TiyWtejlRpJmuM9SVFWLeR4MJMbUkhkWV6ClM5V+ZOjTaXUSNMC2e+Mm6vOgrL3bvS4jxUSUVU3k0I7qmqMxUUopJcCVVpA1YJJpNJsf+5kjoBIiJCIKYeM1AiFPK8g0gK2kXdL453j77T5Lx5/LwN/f9KqwQepJQVZBVcLaE1h361I1fFITrwbIvZ1Pwa+ExV8bmzJDZyV1pY31007WVW6m/4ar9av/QPWMj1yE04tzAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas breakeven annotation\"\n        title=\"prototype oas breakeven annotation\"\n        src=\"/static/182390898882c12f5dcbac216dac5082/5a190/prototype-oas-breakeven-annotation.png\"\n        srcset=\"/static/182390898882c12f5dcbac216dac5082/772e8/prototype-oas-breakeven-annotation.png 200w,\n/static/182390898882c12f5dcbac216dac5082/e17e5/prototype-oas-breakeven-annotation.png 400w,\n/static/182390898882c12f5dcbac216dac5082/5a190/prototype-oas-breakeven-annotation.png 800w,\n/static/182390898882c12f5dcbac216dac5082/715a3/prototype-oas-breakeven-annotation.png 830w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">The next step is to add user input. For example, what if a user wants to delay to age 68 rather than 70, how would that impact the break even age? The code up to this point was hard-coded assuming a user would be delaying to age 70.</p>\n<p class=\"markdown-para\">Starting with the UI, I asked ChatGPT to generate a responsive form using TailwindCSS styles with a dropdown for which age to delay taking OAS. The dropdown should have values between 66 and 70, and a submit button.  I told it to make the field required, and default to 70.</p>\n<aside class=\"markdown-aside\">\nWhy not delay past age 70? There's no benefit to delaying beyond age 70 because the 0.6% increase per month of delay maxes out at 60 months delay, i.e. 5 years from age 65 which is 70. See the \"Applying to delay your first payment\" section of the <a class=\"markdown-link\" href=\"https://www.canada.ca/en/services/benefits/publicpensions/cpp/old-age-security/benefit-amount.html\">OAS Benefit Amount</a> for more details.\n</aside>\n<p class=\"markdown-para\">ChatGPT added the following form to the markup, just above the chart, contained in a panel with a subtle shadow:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"htm\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- Added a panel for the form --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;bg-white p-4 rounded shadow mb-6&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">form</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;oas-form&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;!-- Age taking OAS: 66, 67, 68, 69, 70 --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">for</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;age-taking-oas&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;block text-xl font-bold mb-2&quot;</span><span class=\"mtk1\">&gt;Delay OAS to Age&lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">select</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;age-taking-oas&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;age_taking_oas&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">required</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">option</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;66&quot;</span><span class=\"mtk1\">&gt;66&lt;/</span><span class=\"mtk7\">option</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">option</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;67&quot;</span><span class=\"mtk1\">&gt;67&lt;/</span><span class=\"mtk7\">option</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">option</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;68&quot;</span><span class=\"mtk1\">&gt;68&lt;/</span><span class=\"mtk7\">option</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">option</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;69&quot;</span><span class=\"mtk1\">&gt;69&lt;/</span><span class=\"mtk7\">option</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">option</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;70&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">selected</span><span class=\"mtk1\">&gt;70&lt;/</span><span class=\"mtk7\">option</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk7\">select</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;!-- Submit Button --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">button</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;submit&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        Calculate</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk7\">button</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">form</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- Existing chart element --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">canvas</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;myChart&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">canvas</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Which looks like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACp0lEQVR42n2TS28cRRSF+/ci5fEDWEVihUhggxKCFJRkxwIhoZgNyBnHsZ0AQmJBJMjY7p7pd9ezq1+e8RdVjWcgKKalo3vrPk7dqj4V/frb7zyfHXB0/IrZ7AUvDo+YHRzy08/77O/Pgu/x8ugEqQzGOrRxwX4IUVnVvJ2fcnYeEycJ89Mz6kZQ1TVZngff15RVRT8MDOPEMI4fwETreiKhFH++ecPf8zlvT085i2Ou+1aXl6zW62vhup5odTEB039br8H6fzBtCP+IR248HrjxuOdmwMDNJ//g9tOBO9+NfPztGHK3ruK3nowBt5+OfPTNwCffT0gzEP2VDdzbG7m3NwTcfTbw+d7IFz+OIe7to4MLHu5PIffZs567W1z1fPrDwKPnA8r2RF3nWA8KLlpYO1h3uEEhbc3kGkYnWJUZoyhYTwYY4LLf2JXb4LILfbbtiLRpSfOaWhikcSjjSIVmUUuqWlE2CrEs0cJwePya+w++5sv7X3F08gttN4UeLVt0WmOUJfLaKcoaIfVGY9ZhraNtNzsGfbmethuIkyXHJ6+CZpNlSmc7ZFZRxBlJUaFMS1TVgsUy3RFuhNvu7NZX2tIPE+O0wrU9shQsz5cs8opCG9RW2Fle4kl9w3XqD9O6HqEsSVYwP0vI8grh820X8ruXkmY5cbKgEeq9qezV0VXrKJQmWeSkcUqelTRSB83t6v91qqgRMkzo36m/s9ZudmusYyk1SVpQxCmqbMIkvlEItbvfLdFuws1PqZBKI01LJjWxkKR5RbPIMGUTJtXOH8+Fu26kCr627XsIhLp1SK05L4pAlAmJWObYskYpgzAWZVuEVChjEUpT1k0g8GtP7n0f9+vI72SuAt63vlAbjOtQ1iK1wbqOoqp3Nd5up9rGfJ0nfAdGl6gTmzRv/gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas simple form\"\n        title=\"prototype oas simple form\"\n        src=\"/static/87800bb143dce6829ab27ec2976eb46f/5a190/prototype-oas-simple-form.png\"\n        srcset=\"/static/87800bb143dce6829ab27ec2976eb46f/772e8/prototype-oas-simple-form.png 200w,\n/static/87800bb143dce6829ab27ec2976eb46f/e17e5/prototype-oas-simple-form.png 400w,\n/static/87800bb143dce6829ab27ec2976eb46f/5a190/prototype-oas-simple-form.png 800w,\n/static/87800bb143dce6829ab27ec2976eb46f/baaa6/prototype-oas-simple-form.png 813w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"responding-to-user-input\" style=\"position:relative;\"><a href=\"#responding-to-user-input\" aria-label=\"responding to user input permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Responding to User Input</h2>\n<p class=\"markdown-para\">I then asked ChatGPT to add a form submit event listener. This listener should extract the age at which the user selected to take OAS, and use that instead of the hard-coded age 70 when calculating the delayed income stream. I explained that for each month of delay, there's a 0.6% increase in the payment amount.</p>\n<p class=\"markdown-para\">It modified the code as follows:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Form submit handler to intercept regular form submission</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;oas-form&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">addEventListener</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;submit&#39;</span><span class=\"mtk1\">, calculate);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Modify data generation to take dynamic starting age into account</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">ageTakingOas</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> recommendedAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">65</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> finalAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">95</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> originalMonthlyAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">713.34</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Use user-provided age rather than hard-coded age 70 to determine the delay period</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> delayedMonths </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (ageTakingOas </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> recommendedAge) </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> </span><span class=\"mtk4\">12</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> multiplier </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">1</span><span class=\"mtk1\"> </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> (delayedMonths </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0.006</span><span class=\"mtk1\">); </span><span class=\"mtk3\">// 0.6% increase per month</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> monthlyAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> originalMonthlyAmount </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> multiplier;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> dataPoints </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  dataPoints.</span><span class=\"mtk5\">push</span><span class=\"mtk1\">({ x: ageTakingOas, y: </span><span class=\"mtk4\">0</span><span class=\"mtk1\"> })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> age </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ageTakingOas </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> </span><span class=\"mtk4\">1</span><span class=\"mtk1\">; age </span><span class=\"mtk7\">&lt;=</span><span class=\"mtk1\"> finalAge; age</span><span class=\"mtk7\">++</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> totalBenefit </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (age </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> ageTakingOas) </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> </span><span class=\"mtk4\">12</span><span class=\"mtk1\"> </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> monthlyAmount;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    dataPoints.</span><span class=\"mtk5\">push</span><span class=\"mtk1\">({ x: age, y: totalBenefit });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> dataPoints;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Add a calculate method as target of event listener to run every time form is submitted</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculate</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">evt</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Prevent regular form submission because this is a client side only app</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  evt.</span><span class=\"mtk5\">preventDefault</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Extract user selected value for when they plan to start OAS</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> ageTakingOas </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Number</span><span class=\"mtk1\">(document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;age-taking-oas&#39;</span><span class=\"mtk1\">).value);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Build data for chart, passing in user provided `ageTakingOas` for delayed income stream</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    datasets: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          label: </span><span class=\"mtk6\">&#39;Starting at Age 65&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          data: </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\">(),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          borderColor: </span><span class=\"mtk6\">&#39;rgb(75, 192, 192)&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          tension: </span><span class=\"mtk4\">0.1</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          fill: </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          label: </span><span class=\"mtk6\">`Starting at Age </span><span class=\"mtk7\">${</span><span class=\"mtk1\">ageTakingOas</span><span class=\"mtk7\">}</span><span class=\"mtk6\"> (Delayed)`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          data: </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\">(ageTakingOas),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          borderColor: </span><span class=\"mtk6\">&#39;rgb(255, 99, 132)&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          tension: </span><span class=\"mtk4\">0.1</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          fill: </span><span class=\"mtk4\">false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Now we generate the chart here in the calculate function so it will be</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// updated every time user submits the form</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> breakEvenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">findBreakevenAge</span><span class=\"mtk1\">()</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> options </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span><span class=\"mtk7\">...</span><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> myChart </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Chart</span><span class=\"mtk1\">(ctx, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    type: </span><span class=\"mtk6\">&#39;line&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    data: data,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    options: options</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">Now that the chart generation has moved inside the calculate function, when first landing on the page, it looks like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3klEQVR42qXQS28SURjG8fk6EEITIFy6sBECddVoTdsQdy7caPwM+jlMjNaom1ojpVCbdKFJE7sRCwUqd7mUFqZAaS0wc2b+ZoZWq8GNnuSXZ8458z6LI925NcdM0MvczXnC4TALC4ssLi0xP38bvz+Ax+vF6/OZfNPTv/H6LtOH0+Uy56QbwSAz168RDM3i9/tNgUAAt9uNw+HAPjWF3W4302q1YrFYsFykzWbD6XTh8XjNf0OhWaTElySbm1tE1+PEYhusRWPE4+9ZebNKJBLlXWSN9dgG0WiMRGKXVCpNMrVHMpU2v1N7GdKZfbLZr3xO7CJ1e30aB00y2X0KxRK5fIFSuUKt3qBc+WamoVqrM1IEmg5C0xHaZeqoQjPPjS7p8KhNp9sjl89RrpRNJ/0+k5bQBKpQUYX4g4qiqhhdZqEQCro2vDKqGeM/6frY+HwS1ew4aslI3eM2nwoq956OePB8+MuysR+Z+Wh1xOO3I+5f7K96+GLE3SdDdoqC056MJMtt8k2F5Y8DXm0PeDnBys7YpLvX2wOefRhQaCp0OzLSwWGL4fAcxCmIs4l0dexv9wajo2m8YUuWOR8qnJwN6H//N8as0dE+7iDlCkWq9QaVau2/VOt18sUSPwBrV9ZeSMwuaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas input only\"\n        title=\"prototype oas input only\"\n        src=\"/static/75e063e612bb11e5109d3de2c6a92406/5a190/prototype-oas-input-only.png\"\n        srcset=\"/static/75e063e612bb11e5109d3de2c6a92406/772e8/prototype-oas-input-only.png 200w,\n/static/75e063e612bb11e5109d3de2c6a92406/e17e5/prototype-oas-input-only.png 400w,\n/static/75e063e612bb11e5109d3de2c6a92406/5a190/prototype-oas-input-only.png 800w,\n/static/75e063e612bb11e5109d3de2c6a92406/38af3/prototype-oas-input-only.png 894w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Let's try it out, selecting to delay just one year to age 66 - notice that the ChatGPT generated code also updated the chart label to show the user selected age:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADEklEQVR42m1UW2/URhj130mkBGVpQxYh0G4U4A2FB8Jjnrj8BvgjVGqQoC8tCLWQKDQIIUQfKl7SdCEJdMlmd22v7bE94/F9bedUM2tbG5GVjs53PTPfN9Yqq9dXsHz9Em6s3sTa2m3curUmsbp6E612GxeWlrDUbEo0L148haVmxU2c/+FH2a+0Ll9Gq30FKytX0W63sby8jFarjcXFRSwsLGD+3LkJ5ucxOzuLmZkZzJQ8NzeHhUZDCjYaDVy9dg3K7l4HOztv8WpzC6//fIPf/3iF7dc7ePb8BTa3tvHy5abMbW1t45+9Dv7tfK7R+bQv8Xn/EAcHX7C7uweF+yFUTcf+wSGOesc4/PIVx/0BBkNV8lDVpC04ywsUJ0BeVDiRqOKUcSiOy0BsG/91uzjq9dA77sEPApz1y4scWX4WMqTjMQyTQLEdivE4QTaOploL0V6jKHIUJ3kZPwsZsmwM03KghJziTWeM9Z8S3NuIcXcj+Q4Pn6V48FuKOz+fjt/bSHD/cYL1Rwk+fsvgMxuKxyg6gxSP3yd4+iHGkw+x5F/+Smr8+ncq8VT6qYw9mardeBehO0pBXRuK5biI4wBZ7AJ5ABQh8syHwS1EPkEc2shMDSnREYcOIm4h9smktsJJiHQcw7AIFOK4oNyHZhA4zIfrBZJN1wMp4TgMts1AqPAZLIfB5QGoH4LyAMRyQV0Gk9iloMehGyYY9+H5ATzugwchuLAFgnDCfijjfhjJGmLa0IY6VFWH4/GJoO1SKabqo1pwmiubl3Aog66bUNURdMOCwzx5YBCVI1eChml9JyhvGYTSNymDajvQTALiUJkXN+XlRMKubyiUhcOqUcWIQQjbZdAMC6pFYLhU7rrOTx1ciZukfBSRELcUCdFkWPZkJM2A+PD51MiMB7XINOobWrYjTxQ8NEwMBxpG2giUslN7FA9Xscu82q4gauUOxZKjJJWiLuOIokSeFsRJvaMwTuRjiCaxfK+MVeOLmKgV0yrdox764p9lMKx5Gv1hafcHE3+qTuT6Zd1A1dD9doT/AbkQ6G/Ns12KAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas input plus chart\"\n        title=\"prototype oas input plus chart\"\n        src=\"/static/b039647a55163bdc1eb07485611c99b7/5a190/prototype-oas-input-plus-chart.png\"\n        srcset=\"/static/b039647a55163bdc1eb07485611c99b7/772e8/prototype-oas-input-plus-chart.png 200w,\n/static/b039647a55163bdc1eb07485611c99b7/e17e5/prototype-oas-input-plus-chart.png 400w,\n/static/b039647a55163bdc1eb07485611c99b7/5a190/prototype-oas-input-plus-chart.png 800w,\n/static/b039647a55163bdc1eb07485611c99b7/4ef49/prototype-oas-input-plus-chart.png 890w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">This time we can see the lines are closer together, and they crossover earlier (at around age 80 rather than 84), than the previous example when delaying to age 70. It makes sense that the lines are closer together (compared to delaying to age 70) because delaying by only one year results in an increased monthly payment of just 0.6% * 12 = 7.2%.</p>\n<h2 class=\"markdown-subtitle\" id=\"bug-no-breakeven\" style=\"position:relative;\"><a href=\"#bug-no-breakeven\" aria-label=\"bug no breakeven permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bug No Breakeven</h2>\n<p class=\"markdown-para\">However, ChatGPT introduced a bug - the breakeven chart annotation is no longer being displayed. The issue is that the <code>findBreakevenAge</code> function is still using the hard-coded age 70 to compare income streams, and so it will not find a match when the user provides a different age. After explaining the issue to ChatGPT it corrected the code by passing in the user selected age to the <code>findBreakevenAge</code> function.</p>\n<p class=\"markdown-para\">Here are the portions of the code it modified - notice it did not update the variable names such as <code>data70</code> or <code>benefitAt70</code>, but it did update the logic:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Modified `findBreakevenAge` to take the user selected age</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">findBreakevenAge</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">ageTakingOas</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data65 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Pass in user selected age to the delayed income stream calculation</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data70 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\">(ageTakingOas);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> breakevenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Start at user selected age because the second dataset only starts there</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> age </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ageTakingOas; age </span><span class=\"mtk7\">&lt;=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">95</span><span class=\"mtk1\">; age</span><span class=\"mtk7\">++</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> benefitAt65 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> data65.</span><span class=\"mtk5\">find</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">item</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> item.x </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> age)?.y </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> benefitAt70 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> data70.</span><span class=\"mtk5\">find</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">item</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> item.x </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> age)?.y </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (</span><span class=\"mtk9\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk9\">abs</span><span class=\"mtk1\">(benefitAt70 </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> benefitAt65) </span><span class=\"mtk7\">&lt;=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">2000</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      breakevenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> age;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">break</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> breakevenAge;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculate</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">evt</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Pass the user selected age to the `breakEvenAge` function</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> ageTakingOas </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Number</span><span class=\"mtk1\">(document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;age-taking-oas&#39;</span><span class=\"mtk1\">).value);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> breakEvenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">findBreakevenAge</span><span class=\"mtk1\">(ageTakingOas)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">With the break even logic updated to take into account user selected starting age, the breakeven annotation is displayed:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADHklEQVR42n2UTW8bVRSG57+QOJXYRCiRsBuipER1PtRuEEvgF/BXUGEDSAghFgjRbqJCSeqUQCVEi4RQF4gmjr9nxh7P99wZz5fdB92JbblNhaXH59xz7n3fc+9ilM21Vd56+022brzLbnWXmzerVKu7bG/fYHV1laXlZUqlEsulEqWVlSusXLtWxDeWliiXKyi71SoHBwfcunWbvb29It/f32dzc5Pr1zeoVCoF5UqF9fX1OWtra5TLZTY23mFnZ4etre1iEOX5WZ3T08ccHdf49bfHPPj5mJNHp9z/8QG1k184Pq7x8OEJtdojzs4vuGi0rtBsdWi1u9TrDZRARGh6n+dn53S6Xc7r9SLKWrfXQ9V0VFVD03XSPGc8eUE+nryWMIpRXM/Hsm0azSbtjnRqI6KQ1/3Gkwn5ZHyF8WRMluc4ro8i/7I0Jk9nIhN59H+YLDCexzxPcT2BEkceh39lvP9ZwodfJHzw+ZSF/ONvL5nXF/joy4T3Pk346e+MPBEoge/xTy/l+z9S7j1NuPvkZe79mXH0LOfoWcYPT2Luzpn2nyZ893vMv2pCFAYoluMRRQEjYTHOBC+ykDQN0FyDwDUwzR524xyn0yQUVlELPKPYO8nE5Zk8JElG2J6PYrseri/QByaOL3CDCNsXWEGIbph89fU33PnkDoeH9/FCeSgokPvk2hMRtuViWw6OPxcMGAxNvEDgi7CIgQiLXPaHtoM3XQdhhIgi/EBgDi20nk5P1ZE3lTqK4/lo/QGqrr8k6E8F5CbH9RBhVJjYrk9fN1B7OvpgiOX6BJE0GeHMrqwPBhivTDibRuam42J4PqploxkmQ+tyYikSLEw+FxwYw7mgbMyQ7qpu0Nb6DFwPZ6E/M140nwvKotbvF26uEAyG1uWVtAFD0yreUcxEphO9ylzQtJ1iYToO3b6B2tHQ1T6O4xUGcpPtuMVbSqS5rMlY1BZyaazIRZLliFFcOMVxShQnjJKUME6Kd4rTrDggc1mfxXAUF8xyOZhSbzRptNo0WvIz1Oai1aLRnCLzae+i0eRisdac9drT+mX+HwoX5PlLbLNQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"oas prototype breakeven bug\"\n        title=\"oas prototype breakeven bug\"\n        src=\"/static/13b83f28028da0805af554e1b34d9d2f/5a190/prototype-oas-breakeven-bug.png\"\n        srcset=\"/static/13b83f28028da0805af554e1b34d9d2f/772e8/prototype-oas-breakeven-bug.png 200w,\n/static/13b83f28028da0805af554e1b34d9d2f/e17e5/prototype-oas-breakeven-bug.png 400w,\n/static/13b83f28028da0805af554e1b34d9d2f/5a190/prototype-oas-breakeven-bug.png 800w,\n/static/13b83f28028da0805af554e1b34d9d2f/efc66/prototype-oas-breakeven-bug.png 885w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"bug-breakeven-incorrect\" style=\"position:relative;\"><a href=\"#bug-breakeven-incorrect\" aria-label=\"bug breakeven incorrect permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bug Breakeven Incorrect</h2>\n<p class=\"markdown-para\">However, this reveals a new issue - its showing a breakeven age of 77 when the lines actually cross over at age 80. This is because the original heuristic of finding the first data point where the differences in income is $2000 or less isn't quite right for a smaller delay age, because in this case, the differences in income are smaller (as can be seen by the lines being closer together in slope).</p>\n<p class=\"markdown-para\">I explained the issue to ChatGPT and asked it to modify the break even logic to determine the absolute minimum difference between the two data streams rather than comparing to $2000. Here's the modified function:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Find the age at which the difference between the two income streams is the smallest</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">findBreakevenAge</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">ageTakingOas</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data65 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data70 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\">(ageTakingOas);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> minDifference </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">Infinity</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> breakevenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Start at ageTakingOas because the second dataset only starts there</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">for</span><span class=\"mtk1\"> (</span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> age </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ageTakingOas; age </span><span class=\"mtk7\">&lt;=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">95</span><span class=\"mtk1\">; age</span><span class=\"mtk7\">++</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> benefitAt65 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> data65.</span><span class=\"mtk5\">find</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">item</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> item.x </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> age)?.y </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> benefitAt70 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> data70.</span><span class=\"mtk5\">find</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">item</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> item.x </span><span class=\"mtk7\">===</span><span class=\"mtk1\"> age)?.y </span><span class=\"mtk7\">||</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> difference </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9\">Math</span><span class=\"mtk1\">.</span><span class=\"mtk9\">abs</span><span class=\"mtk1\">(benefitAt70 </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> benefitAt65);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (difference </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> minDifference) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      minDifference </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> difference;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      breakevenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> age;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> breakevenAge;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p class=\"markdown-para\">With that change in place, we can see the correct breakeven age of 80 displayed on the chart, when user selects age 66 to delay:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 88.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADIElEQVR42n2TXVPbRhSG9XMK5KK4KR4IydASirHb6142/QX5J2kv2unQu05mwj1tAJOSybSBy7QzbShg/ClZsiVZ0u5q9WWZt3PW2NRMUs08Orvn4z1nV7a2ViyguPoh1jc2Ual8jnK5jHK5go2Nz3D37seYm5/H/MKCYuHOnVkWxpZiH8zNYXX1PrSHn66jtFVCpfIFNjdL2Noqo1Tawr17q1heXkaxWJxSKHyEQqGgWFxcxNLSElZWVrC29gnuP3iA9fWH0N7+c46jo1fY2z/A0ctXeL63j+rhC+z+/BzVw1+xv1/FwcEhqtUXOD09w/nFJc7OawpaE7VaHZeXDeXTQhmja1o4O79AR9dxUauh1WorX7vTQUc3FEbXRJoNkY+uZhgS+UghowRawAScwQC1eh3NdhuNZhM8DPGuZzgaIctzDP+D2o9y1cwPODR6ZWmEUSauy/L/YfQecuTDFDSclkYcu28yfPldgq9/TPDV9iyPthM8fjrmdoygGqrd+zPDMBHQhGD4q5Pi6esUOycxnh0TCXaOE2WJ3Tcpfvkjw85JimcnN36VdxLjp99i/N1JEEkBbeAzSMkRCxejLMTVMESWchh+D4LZkKGL0Ogg6DThexY4+QNbXRGRZwJXeYgkieAxDs0LGHwmYPYdeEzA5xIeC2EHHK7HIOIUr38/xjdPvsX3P2zj9KwGJiKVGwgJJiQGboCB68HnE8GAoWc7CLgAE6GyXIRqrfYihGU7cD1f/QKEjMC4gGO7MHUTum7C9QIEJOgzjq7Vg2FaM4JTMRIPpWpKTbyAw7L6MHQTptWH6zMwKcc5kyObvT76tyYkS0kErU3HhW67MPoObNdTU3N5Eyemglbfnh6ZT4SkVN3Nng3DJjEHg4BBXDfht04yI0gB+qtRki9C9GgSw0LXsOC4nhLw/EDdG3uH0OQ0SnB80RKO50Pv9aG3uzANC54XzBQ7A08V0H4yBO0nPrLk1yg5yYbqy1EgjhNIIkkRRrHyx2mmCqgxxchGSapiBPkmuVq90USj1VY0r22j2RrTak1jl40m6s2bfeM9638BPCvk+bkiFVQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas breakeven corrected\"\n        title=\"prototype oas breakeven corrected\"\n        src=\"/static/ddcd7fdf627b073d3c8e26c18c010578/5a190/prototype-oas-breakeven-corrected.png\"\n        srcset=\"/static/ddcd7fdf627b073d3c8e26c18c010578/772e8/prototype-oas-breakeven-corrected.png 200w,\n/static/ddcd7fdf627b073d3c8e26c18c010578/e17e5/prototype-oas-breakeven-corrected.png 400w,\n/static/ddcd7fdf627b073d3c8e26c18c010578/5a190/prototype-oas-breakeven-corrected.png 800w,\n/static/ddcd7fdf627b073d3c8e26c18c010578/fe9f1/prototype-oas-breakeven-corrected.png 883w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">This is proving to be interesting already, note that the breakeven age for just a one year delay is lower, age 80, compared to the 5 year delay which puts the breakeven age at 84.</p>\n<h2 class=\"markdown-subtitle\" id=\"bug-cant-change-age\" style=\"position:relative;\"><a href=\"#bug-cant-change-age\" aria-label=\"bug cant change age permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bug Can't Change Age</h2>\n<p class=\"markdown-para\">The next thing the user might want to do is to select a different age for delaying OAS, to see the effect on the income streams and break even age. However, this reveals another bug, which is that nothing seems to happen when selecting a different age, given that the chart is already rendered from the first selection.</p>\n<p class=\"markdown-para\">For example, given that we just calculated for delay age of 66, then try to select age 67:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADV0lEQVR42n1SWW8bVRSeP8ADFIm+ojZN7EhpGiQaCgJlHCfK0qReknRBgMpPgApQ+3MoqYSgVWjVpE6c2o7YxAsvVGEx2J7tztxZPIvXqF91rjMRYelIn87c75z7ne1KqQuTOH9hDFOpaczPL2Bubk5gakrG2fFxDI+MYCSREEgIJA+RQCKZRHJ0FMnkKE6fHsL8wgKkfD4PwurqGrLZHHK5vLCzs7MCMzMzSBPSM5DlFGRZFnZKlpFOp0URmUwGi4uLuHr1GiTdMPHLk308LlXw3fc/olzZQ7m8h1J5D4XtIkqliuAqe99C1Qww04bBOJh5HK7no1ZXIHHbhR9GqNUb0HQDqqaDOw4Onj5Fq9NFp9tDt9dHt3+A5329/gEMZg0EG4qC9Tt38MX6Oj6/fRtf372L4u4utneK2CkWhd3e2cGjQgFbhYKwMTa3trBbKiOIOtANBimKQtx7WMGrqVs4+dZNvPLmZ3j5jU/w4usfC7z0d5y/cQwnJm/ghdc+wpn0p9CYA9PikMKojY37mxibnMPwxDSGxmWcOZfCyMQ0hs8NQGfih84OfDFH8afG3sHE2xlUFRecc0h+EOFxqYRrV1awtpLBav4SVnLLWMpcRC67hHx2CVeyy3j/8gree/ey8BO3ml/GWv4SsssL+PD6B+COB2ZakJjF0QxC1BoqdJODOy6Y7WBf1VGtK1A0Az//8BM2vvwK9765jyf7v0HRdJjcgWW7sFwPtuMhjFrQaIYkGEQtWLYDt+mLf9o6BdA/bfrXP6rYePAAm1uPQPFRp4uw1QZ153AXmqLDawbQmQnJ5DYcz4OqG6I6qtbzA7h+MLBNH1GrM3hCvb5IZDsuDJ2hUVehagyW4yJotQcVkiCzLCFou56ozjsUI3FCEEbikm7ZUJkFRaWWbZGUuqCY8LggF6KO1zwSIWE/agnOsF3UmAmVumn6whcLxR0dCZIYEWTpMgW6QSiGrqqGWAp3PQGKizuIhf5TkA60FNN2oFFLdRWGxuDSCA5bpmRU3T+F/iVomJbISg6FmbAYF0JxcLwoGo19yMccWVoaJSNeCHLbERukDGRb3R6idkecyRKIj+c28HWOfHFsu9cHFSdV/6qJh9pQteeCYpT/9avilfxe/RPPAF/sjriENcK1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas age selector\"\n        title=\"prototype oas age selector\"\n        src=\"/static/625b8011768c3351b809033c6a0e552c/5a190/prototype-oas-age-selector.png\"\n        srcset=\"/static/625b8011768c3351b809033c6a0e552c/772e8/prototype-oas-age-selector.png 200w,\n/static/625b8011768c3351b809033c6a0e552c/e17e5/prototype-oas-age-selector.png 400w,\n/static/625b8011768c3351b809033c6a0e552c/5a190/prototype-oas-age-selector.png 800w,\n/static/625b8011768c3351b809033c6a0e552c/b3ad9/prototype-oas-age-selector.png 909w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">The age 67 is shown in the dropdown, but after clicking the Calculate button, the chart doesn't change, it's still showing the results for age 66, not 67:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAADDUlEQVR42oWUTW8bVRSG/WOKkpQkqyyKBJXwAlM7UlEhjvuxC2v4MyFlwQqx7q4UECxALTGhLcs2JG6b2jOe7+87nrFDHnTueCIrVGWkV/fcc8685z33npnGxsYG6+vrvP/BVZrNJs0Pm3q9cuU91tbWWFpaYnl5WWNlZeU/uHz5XVZXV7l06R2uXWvT6Ha32d7u0evdZGurS7fb5bOtLdrtDp3NTTqdjrYFrdbHtFotvX7UatFut7l+/RNu3PiUdmeTnZ3PaURxytHRgIeP9nn85C/6fxzQ7x+w3z/g198e8vt+X9sHfz4hCGPSLCdOFElaQew4ycjUBNcLaEhSGMUcDV4wePmK4xcvGRomSabwg1DH4iQljBPyoqSYzijKC5jOmBTTitAPIjKlsMxXRIFF4JlMi4Q3P2fAP2/AKWVZ4ri+EIakecnheMaxAwMX/rbPeGbMeGZWeP4WSPzQnJKqslIYRyFDr+TO1yW93Qk3v6pw527J7bslt/ZKvvyu5ItvC3q7Obf2Cu2T9fZewfZuwc43JUNvShjMFSZZzshVGF5+joGdcGInvLZTbEcRxKf46oyRk2nfYq7p5aT6UnwaniZUuK5DnESoPCPNUoaBh+05hFHA86dPeXDvHt8/uM9weEIYBjonUxn5JEcpeUfh1ISpynG8AD+MiVNFlGTVSKSKNJ9weDzg/g8/8tPPv2B7vvYlKkdGzrU9jKFJGCW4vtxyGCEY2w5BGBGnGVGSaohdj8uknFLOTslUrsfJGtuMhiZjy8GL4rkovyK0HBdjbGliab8mlVUg7Uh10/UwLJeRYel9JDGVz3MWCG3XqxTKEM9JhFjgiXov4MR2MD2fIE6qmFJ64OtuzhXKGYpDNvJVyPmESYrt+hiGhWHa+FGs1QuBkC2qP+9ikVA20oItbY0dRq9N7LGjC9RKRb2ou3gc9f6cUIjqczNsB8+tlNYv+fOLkjyxxS8i6lg0/87rLhtSWU0KXUHlE21n+UTv61V80bzdi7HFHCnUGJljfSly02/D/+VIXP5S/wL6fvIv0/a7QQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas chart not updated\"\n        title=\"prototype oas chart not updated\"\n        src=\"/static/53f818d1badf156dca8a88955691a745/5a190/prototype-oas-chart-not-updated.png\"\n        srcset=\"/static/53f818d1badf156dca8a88955691a745/772e8/prototype-oas-chart-not-updated.png 200w,\n/static/53f818d1badf156dca8a88955691a745/e17e5/prototype-oas-chart-not-updated.png 400w,\n/static/53f818d1badf156dca8a88955691a745/5a190/prototype-oas-chart-not-updated.png 800w,\n/static/53f818d1badf156dca8a88955691a745/b3ad9/prototype-oas-chart-not-updated.png 909w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Opening the browser developer tools and inspecting the Console tab reveals a JavaScript error:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">chart.js@3.7.0:13 Uncaught</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Error: Canvas is already in use. Chart with ID &#39;0&#39; must be destroyed before the canvas can be reused.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    at new dn (chart.js@3.7.0:13:90904)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    at HTMLFormElement.calculate ((index):220:23)</span></span></code></pre>\n<p class=\"markdown-para\">Currently the context for the canvas on which Chart.js draws is defined as a constant outside of any functions. The chart is redefined each time as part of the <code>calculate</code> function, which is called every time the user submits the form. The error message about being unable to reuse the Canvas element is coming the <code>calculate</code> function where it tries to instantiate a new chart for the second time:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> ctx </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;myChart&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">getContext</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;2d&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculate</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">evt</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Error from this line:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Canvas is already in use. Chart with ID &#39;0&#39; must be destroyed before the canvas can be reused.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> myChart </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Chart</span><span class=\"mtk1\">(ctx, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    type: </span><span class=\"mtk6\">&#39;line&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    data: data,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    options: options</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">I gave ChatGPT the error message, and it corrected the code by defining a variable outside of the calculate function for the chart. Then it moved the context declaration inside the <code>calculate</code> function. It then modified the code to check if the <code>myChart</code> variable is already defined, and if so, it calls <code>destroy()</code> on it before attempting to re-use it for another chart:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Keep a reference to the chart because we need to check if its already populated</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// when attempting to re-render</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> myChart </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">null</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculate</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">evt</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Canvas context needed for rendering the chart</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> ctx </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;myChart&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">getContext</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;2d&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// If a chart instance already exists, destroy it</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (myChart) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    myChart.</span><span class=\"mtk5\">destroy</span><span class=\"mtk1\">();</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Now we can safely generate another chart</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  myChart </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Chart</span><span class=\"mtk1\">(ctx, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    type: </span><span class=\"mtk6\">&#39;line&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    data: data,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    options: options</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span></code></pre>\n<p class=\"markdown-para\">At this point, the code is functional, the user can keep selecting different delay ages, click the Calculate button, and see the chart rendered with two streams of income and the breakeven age updated.</p>\n<p class=\"markdown-para\">However, the results are only accurate for someone who is eligible for the full pension amount, which means they've lived for 40 years in Canada by the time they turn 65. Recall one of the goals of this calculator is to encourage immigrant seniors with less than 40 years to apply for OAS at age 65 rather than delaying. For this, the tool needs to take years of residency into account. Let's deal with this next.</p>\n<h2 class=\"markdown-subtitle\" id=\"less-than-40-years-in-canada\" style=\"position:relative;\"><a href=\"#less-than-40-years-in-canada\" aria-label=\"less than 40 years in canada permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Less than 40 years in Canada</h2>\n<p class=\"markdown-para\">If someone has lived in Canada for less than 40 years as an adult (i.e. after age 18) by the time they turn 65, then they're eligible for a fraction of the pension amount rather than the full amount. For example, if someone has lived for 35 years in Canada after age 18, then they would be eligible for 35/40ths of the full pension amount: $713.34 * (35/40) = 624.17. i.e. the fraction they're eligible for is based on how many 40ths of years of residency they have.</p>\n<p class=\"markdown-para\">There's a common, but mistaken belief that delaying OAS in this case will have multiple benefits: Firstly the 0.6% per month of delay increase, <em class=\"markdown-emphasis\">and</em> an increase of 1/40th the pension amount for every year of delay due to the residency increase. For example, someone who has 35 years in Canada at age 65, and delays OAS to age 68, may believe that this would qualify them for an extra 3/40ths of the full pension amount because they delayed for 3 years and now have 3 more qualifying residency years, in addition to the 0.6% increase per month of delay.</p>\n<p class=\"markdown-para\">However, the benefits of delaying do not \"stack\". What the government of Canada does is \"fix\" the pension amount to however many years the person has in Canada by age 65. Then if the person chooses to delay, the government calculates the 0.6% per month increase on the \"fixed\" pension amount.</p>\n<p class=\"markdown-para\">In our example of someone that has 35 years in Canada, if they were to start at age 65, they would qualify for $713.34 * (35/40) = $624.17 per month. Then if they were to delay for 3 years, i.e. 36 months, this would increase the monthly amount to $624.17 * (1 + (36 * 0.006)) = $758.99. i.e. the 0.6% increase per month of delay is applying to the 35/40th fraction of the full pension amount.</p>\n<aside class=\"markdown-aside\">\nTechnically the person could write in a request to the government asking to use the residency increase INSTEAD OF the monthly increase. However, the monthly 0.6% increase (aka actuarially adjusted amount) always results in a greater amount than the residency fraction increase, so in practice, this is never done.\n</aside>\n<p class=\"markdown-para\">I explained the above rules to ChatGPT and asked it to update the form with an input for years lived in Canada between ages 18 and 65, that could be an integer between 1 and 40 years, and update the calculation to extract this value from the form upon submission, and use it to determine the monthly OAS amount.</p>\n<p class=\"markdown-para\">Here's how it updated the input form, notice it maintained the existing look and feel, and added a subtle help text for the years in Canada field.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"htm\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">form</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;oas-form&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;!-- ... --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;!-- NEW: Years Lived in Canada as an Adult --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">for</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;years-in-canada&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;block text-xl font-bold mb-2&quot;</span><span class=\"mtk1\">&gt;Years Lived in Canada as an Adult&lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-gray-600 text-sm mb-2&quot;</span><span class=\"mtk1\">&gt;(Between ages 18 and 65)&lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">input</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;number&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;years-in-canada&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;years_in_canada&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">min</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;1&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5\">max</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;40&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">required</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;40&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;!-- ... --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">form</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 662px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACzUlEQVR42p2RWU8TURTH53tgH6QtVmOECHV7MVFcwE+gkuiTcUk0gVJUWnD7Cmr0QUEjiQ/6DdxY4oqgiUBXSktdAu10uk47nf7MvYWKKJh4J7+5Z8495z/nn6vsbWpkxw4rDudWDrYe4nBbG21t7ZL29iO0th5g9549ODZvxmqzYbPb5V5vtf7Gxvp69u3bj9Lc2MS2bVto3N7Ezp27aG5upqWlBafTibPFSUPDJmw2OxaLhbq6OskGiwWr1SrPHA4HmxwO7PYG2a94+69w5ep1rl27QV9fP5d7e/F6++j1eCWdXS66XN10d7txdbvl3iVyXS7c7h4uXrpEr8dDT89FPB4vyvsPH3nxcphnz1/w5u17Rsde8+z5S969+8Cr4RGGR8aW4lHGxycYGR3D5w9iVqCglyjoBnm9RMkwSWkZlHA4wlw0RjAYIv71G9HYPP5AkNnIHKHwrIynZ3wEgqEasfk4+YJOJpsnm6sivhcTSZTFRILPnz8x45th8tMk/oCfqekp/rXMikll6RGxWFo6jaKmNBYWF0iqSdKZDNlcFjWlUjIMjHKVX3FZUjYF5tJeRYgKLUWI6KUiZqWy7kRikpUCqxE/VFOpquXp6Slp+cvUF4mwPDE5gc/vk/nxj+PE5mN/WP2r5YSqEovHiUSjkuh8XF5SQk2SyWYkWlojX8jXmlcj7NcExUuTtksYpllDlCxTkZNVMMrmn5gmRcOQ/SlNQxETYGQAY7n1L5TXyK88N6QTJfxV49T9Msdu6XTcLtBxW69x/JbOybs6nY90XEM6J+5UcytrBEdvFjgzYDD3XUOJfEvTOVTizH2dc4M65waWGNQ5O6Bz4WGRvidF+p8WOf+gKHOr607f03E/Noj9EJeSSEKlAGZuTcxSlfVqhIbQUpKqRq5gkMkV1ySbr7JejdAQWoo/EGI2EiUUjhCe/T9Er9AIBMP8BNfmezYwa5RjAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas years in canada\"\n        title=\"prototype oas years in canada\"\n        src=\"/static/ab645ecbcf9e0d92ff610c8fe6d5590b/be86f/prototype-oas-years-in-canada.png\"\n        srcset=\"/static/ab645ecbcf9e0d92ff610c8fe6d5590b/772e8/prototype-oas-years-in-canada.png 200w,\n/static/ab645ecbcf9e0d92ff610c8fe6d5590b/e17e5/prototype-oas-years-in-canada.png 400w,\n/static/ab645ecbcf9e0d92ff610c8fe6d5590b/be86f/prototype-oas-years-in-canada.png 662w\"\n        sizes=\"(max-width: 662px) 100vw, 662px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Then it made a number of changes in the JavaScript code. Firstly, it recognized that the base pension amount of <code>713.34</code>was repeated in several places, and extracted it as a constant at the beginning of the script:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> fullPensionAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">713.34</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// ...</span></span></span></code></pre>\n<p class=\"markdown-para\">Then it introduced a new function for calculating the fractional base pension amount, based on how many years in Canada. For someone with a full 40 years in Canada, this would still return 713.34 because it would be multiplying 713.34 * 1:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Function to calculate the base monthly amount based on years in Canada</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculateBaseAmount</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">yearsInCanada</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> fullPensionAmount </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> (yearsInCanada </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> </span><span class=\"mtk4\">40</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p class=\"markdown-para\">Then it modified both chart data functions to accept a new parameter <code>yearsInCanada</code>, and to call the new <code>calculateBaseAmount</code> rather than using the hard-coded <code>713.34</code>. Notice that in the delayed function, it <em class=\"markdown-emphasis\">first</em> calculates the base amount using the number of years in Canada, and <em class=\"markdown-emphasis\">then</em> calculates the percentage increase due to months of delaying upon this fractional base amount:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Function to generate data for starting at age 65</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">yearsInCanada</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> initialAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">65</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> finalAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">95</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// NEW: Consider how many years in Canada</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> baseAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculateBaseAmount</span><span class=\"mtk1\">(yearsInCanada);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> dataPoints </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Function to generate data for starting at a delayed age</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">ageTakingOas</span><span class=\"mtk1\">, </span><span class=\"mtk10 mtki\">yearsInCanada</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> recommendedAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">65</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> finalAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">95</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// NEW: Consider how many years in Canada</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> baseAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculateBaseAmount</span><span class=\"mtk1\">(yearsInCanada);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> delayedMonths </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (ageTakingOas </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> recommendedAge) </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> </span><span class=\"mtk4\">12</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> multiplier </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">1</span><span class=\"mtk1\"> </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> (delayedMonths </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0.006</span><span class=\"mtk1\">); </span><span class=\"mtk3\">// 0.6% increase per month</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> monthlyAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> baseAmount </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> multiplier;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">let</span><span class=\"mtk1\"> dataPoints </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span></code></pre>\n<p class=\"markdown-para\">It recognized that since the <code>findBreakevenAge</code> function calls the chart generation functions, it would also need a new parameter <code>yearsInCanada</code> to pass this through:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// MODIFIED to accept `yearsInCanada` and pass to chart generation functions</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">findBreakevenAge</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">ageTakingOas</span><span class=\"mtk1\">, </span><span class=\"mtk10 mtki\">yearsInCanada</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data65 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\">(yearsInCanada);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data70 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\">(ageTakingOas, yearsInCanada);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">Finally, it modified the <code>calculate</code> function to extract the <code>yearsInCanada</code> value from the form, and pass it to the functions that generate the chart data:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculate</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">evt</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">//...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Extract user selected value for when they plan to start OAS</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> ageTakingOas </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Number</span><span class=\"mtk1\">(document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;age-taking-oas&#39;</span><span class=\"mtk1\">).value);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// NEW: Extract years in Canada</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> yearsInCanada </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Number</span><span class=\"mtk1\">(document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;years-in-canada&#39;</span><span class=\"mtk1\">).value);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// NEW: Pass in yearsInCanada to all functions that need it</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    datasets: [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        label: </span><span class=\"mtk6\">&#39;Starting at Age 65&#39;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        data: </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\">(yearsInCanada),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        label: </span><span class=\"mtk6\">`Starting at Age </span><span class=\"mtk7\">${</span><span class=\"mtk1\">ageTakingOas</span><span class=\"mtk7\">}</span><span class=\"mtk6\"> (Delayed)`</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        data: </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\">(ageTakingOas, yearsInCanada),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> breakEvenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">findBreakevenAge</span><span class=\"mtk1\">(ageTakingOas, yearsInCanada);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">With the code in place, we can now run the analysis for someone with 35 years in Canada who wants to see if its worth it to start OAS at 68 rather than 65. The results below show the break even age to be 82:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADPUlEQVR42oWTXW8bRRSG/YtI0guuIuE0bhQBtkP5KagScNkbWhUoAq6gUosEKhKiSIlCVRUphKRpG+6poEkdNfaud2e/Z7933QfNNHFtYmCld8+cs2eeOXNmtvFmq8niG6/z1tsdOp0unW5X26Xz55lfWOC1uTnm5ua15ucXzmjh3Dktlde6cIHGWrdLu93m4sV36XQ6rK29o8ftdofl5WWazSbNpSVtFxcXz6jVarG6usrKyoqe0zCHNkNLsP3bDru7ezzYe8Sv2zvsPthja2tbx5X/8NFjhOPhegGO659REEoM06KhnCTNMYdDnh8f0x8MtOIkIQhDIin1WMYxZVVR1fVMpVmhwQ1bOBpo2RaGaWALGz/wmfWMXoxmqqor4iTDFq4Cupruui6e7xGEgbZqAeEIbCGoRzX1aPSvUpUn6RQw53hg8NfBM54eKvUYGCamZWEMh1QnE6v/kNrlGKicuoyBmtnP6H9UT1eY5zl39gs+Wi+4frfkk5+LsT7ezPl6q9SajH96t9S5VzYKftwvybKJCrMs44fHBZd/yrm6kXFlPePquhorFXx+L+fL+yXXNiuubZY6rnM2Mi7fyfj+YT4NjJOcPAkYFSGMUhglhKlHLB3K1Kf2bDJrQOgZRO6AKvV1js4l40Ue61MWzkQPHS/EdgKCKMUPE4QvEV6EJTyiMGF3Z4/rn33BzW++ZWh7REmO70UIQ2AO7BOgd1phhu24CNcjihMiGRPJRCvLy/HRJFlOGEmiUCIMm0HfxFR/TySRJ4yGegWR1NfD9QNCGWv5UaQBfzx5ws1bt/jqxg3u3f9F96nfN7AcD1/GyCTViyhrO84r4PP+AMfzNUz5QRhRVDX7+7/z/gcfcum9S3x3+zZBFBOoHcSJBp3mvwSeVKg+KusFIVJtOU5wZYwpXEzTJg4lZVUTp9kYMqkpoCUcnahgluNihxF928HomzimTeCHLyfJWPfYD6Mp0EygLl/GDB0Xw/PxLIHveoSq0iDQE9SVUD1WQGVVTLVI2dPeK1ZDOXlZkeYFWV6QFyWZ8otSx3S8KHUF6pCycXzaKoZiNf58esBh74iDZ70pHf7T9o7Oxibze0co1t8vTYVyjeMQigAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas 35 years residency take at age 68\"\n        title=\"prototype oas 35 years residency take at age 68\"\n        src=\"/static/f1031f453911758683afff9fdd709f9c/5a190/prototype-oas-35-years-residency-take-at-age-68.png\"\n        srcset=\"/static/f1031f453911758683afff9fdd709f9c/772e8/prototype-oas-35-years-residency-take-at-age-68.png 200w,\n/static/f1031f453911758683afff9fdd709f9c/e17e5/prototype-oas-35-years-residency-take-at-age-68.png 400w,\n/static/f1031f453911758683afff9fdd709f9c/5a190/prototype-oas-35-years-residency-take-at-age-68.png 800w,\n/static/f1031f453911758683afff9fdd709f9c/024d6/prototype-oas-35-years-residency-take-at-age-68.png 961w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">What's interesting is that even for someone with a full 40 years of residency, delaying to age 68 puts the breakeven age at 82 as well. And notice that the slopes and distances between the two lines are similar as with only 35 years in Canada (although the absolute amount of OAS will be different):</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAADYUlEQVR42oWUW2tcVRTH5xMlk4JPphiTGIIkYxo/gfoJBP0EKmKbinhBrA8KPglq0eaCWmyaNE2b+uJLsWmaQmfO/X7Z5z75yd4zk1Y7xAM/9l7r7PVfa6+9z2ktL8zy4ksv8OpSh07ntVNmZ+doT00xMTnJ5GR7QLtNuz31L6bOnVNMTEwyP/8KrdULF1haXmJ19XU6nQ4rKytqvtzpMDc3z8zMy0NmmJ4+z/T09DOcVyKLi4ssLCywvNyhpRs2tuNxc+cWt/b22b9zwPb2Dnt7+9zY3mH75i67u3vc3r+L4/p4foTnh88RRgmGadFyHI8sL9ANgyfdLj1No9vrkQpBFMfESYLIMpI0papr6qZ5jqpuyPIS1wtomZajBE3LRDd0bMcmCAPGPf2T/ljqpiYVudppy7Jdpe55Hp7vEUYRfuBj2RaO66gETb+h6ffHIgVl5SLLVUtOBbuazuHRMQ8fPVZohoFh2eimST0Mrs9AZAWOO6xQ5CVNlQIN45/+/9AMBX3ZQ5eyLPjpXskHP5d8vFWytllyaWPIesFXf1RcuVEpe21j8H5ts+LyVsWHv5T8cFCR58Wgh6btUhQFPx4UvHe14OJ6zkfXci5K1qVd8tmvBV/8XnF5s1ZIv1xzaT3n/as53+8X6mBtZ9jDNCsoRMhJGUE/U0RZQJK4VJlP41tkZo/Q04jcHnUWQF9AI4Cck0qoUz49lMH+AyzbJ4wzgkjgBAmOH2M5AXGccXvvDp98+jnffPsdhuURi4IwEvh2gK07JGn2VHCkLi9mnAiiJFVjnApVfXMyaH0qMuIkJUmkkIfRNdAMGysIB/dQnbLjKoGepuN4vppLwjghERlPehq/Xb/OxuYWd+/9ifyyel0d3XJww4hIiEESkT0VlMEycCQo7TCKKaqKv+7f5+133uWtN97kyytf40UJfhQTD6t9NrkSNG1HGfISS0eSDrbqJwmm56NpJq7lkiZCBY52MBIaK5hmOX4YKYcdxWi2i94zcAyb0A9VAonrBwRRfLagrEwujuIU0/XQ/QDPcglcnygVeGGkAuRiLwiVoBylTyYYjVJYtq8ljUL+foqSvKwoyoq8qsnKSvlGflnBaD5uLKpa7bL194NDHh3LH8LxKUf/QfmOH3N0fPb7B4cP+Qdg1oV8WfQj1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas 40 years residency take at age 68\"\n        title=\"prototype oas 40 years residency take at age 68\"\n        src=\"/static/b7778b3a43cfe54a25f81817dedd86ea/5a190/prototype-oas-40-years-residency-delay-to-68.png\"\n        srcset=\"/static/b7778b3a43cfe54a25f81817dedd86ea/772e8/prototype-oas-40-years-residency-delay-to-68.png 200w,\n/static/b7778b3a43cfe54a25f81817dedd86ea/e17e5/prototype-oas-40-years-residency-delay-to-68.png 400w,\n/static/b7778b3a43cfe54a25f81817dedd86ea/5a190/prototype-oas-40-years-residency-delay-to-68.png 800w,\n/static/b7778b3a43cfe54a25f81817dedd86ea/fbf08/prototype-oas-40-years-residency-delay-to-68.png 962w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">This shows that there's no extra benefit to delaying for people that don't have the full residency amount.</p>\n<h2 class=\"markdown-subtitle\" id=\"gis-eligibility\" style=\"position:relative;\"><a href=\"#gis-eligibility\" aria-label=\"gis eligibility permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GIS Eligibility</h2>\n<p class=\"markdown-para\">A factor that should influence the decision to delay OAS is eligibility for the <a href=\"https://www.canada.ca/en/services/benefits/publicpensions/cpp/old-age-security/guaranteed-income-supplement.html\" class=\"markdown-link\">Guaranteed Income Supplement</a> (GIS). GIS is a non-taxable benefit provided to low-income seniors in Canada who are already receiving OAS. It's designed to top up their income, ensuring that people with minimal financial resources can maintain a basic standard of living.</p>\n<p class=\"markdown-para\">It's important for the prototype calculator to take GIS into account because it can significantly increase the monthly payment amounts that a person could receive starting at age 65. If this person were to delay taking OAS, they are necessarily also delaying GIS, because GIS is only available to those claiming OAS. This additional income can make a crucial difference to the standard of living for someone who is low income. And yet, many low income seniors are delaying OAS.</p>\n<p class=\"markdown-para\">Accurately determining the amount of GIS a person is eligible for depends on many <a href=\"https://www.canada.ca/en/services/benefits/publicpensions/cpp/old-age-security/guaranteed-income-supplement/eligibility.html\" class=\"markdown-link\">factors</a>. For the prototype, I simplified the approach by downloading the latest GIS lookup table (which was Apr. 2024 at the time of this writing) for a single person from <a href=\"https://open.canada.ca/data/en/dataset/dfa4daf1-669e-4514-82cd-982f27707ed0\" class=\"markdown-link\">Open Government Canada</a>. The GIS lookup table is a csv file that contains rows for income ranges and the monthly GIS amount for a person whose annual income falls in that range. It's sorted from the lowest to highest income that's eligible.</p>\n<p class=\"markdown-para\">Here are a few example rows from the GIS lookup csv file:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">income_range_from,income_range_to,monthly_gis</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">0,23.99,1065.47</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">24,47.99,1064.47</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">48,71.99,1063.47</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">8664,8671.99,566.47</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">8672,8687.99,565.47</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">8688,8711.99,564.47</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">21552,21575.99,2.43</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">21576,21599.99,1.43</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">21600,21623.99,0.43</span></span></code></pre>\n<p class=\"markdown-para\">At the lowest end, if someone is aged 65 or above and claiming OAS, and their annual income is between $0.00 and $23.99, then they are eligible for an additional $1,065.47 in GIS (in addition to their OAS amount). For an annual income between $8,664 and $8,671.99, monthly GIS is 566.47. As income goes up, the GIS amount is reduced. People with incomes above $21,623.99 are not eligible for GIS.</p>\n<aside class=\"markdown-aside\">\nThe OAS amount does not count as income when determining GIS. However, other sources such as (but not limited to) CPP (Canada Pension Plan), private pension plans, withdrawals from registered retirement accounts, and employment income does.\n</aside>\n<p class=\"markdown-para\">The entire file is over 1000 lines long, and as far as I know, there is no publicly accessible API to access this information. To make use of this data, I decided on a heuristic.</p>\n<p class=\"markdown-para\">I provided ChatGPT with the minimum and maximum income ranges from the CSV as well as a sampling from roughly around the first quarter, middle, and last quarter. I asked ChatGPT to divide these into quartiles, and to create four radio button options for income ranges in the form, and an additional radio button for over the maximum range. Here is the markup it added to the form:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"htm\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;!-- Annual Income --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">for</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;income_range&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;block text-xl font-bold mb-2&quot;</span><span class=\"mtk1\">&gt;Select Your Annual Income Range&lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-gray-600 text-sm mb-2&quot;</span><span class=\"mtk1\">&gt;(required for GIS eligibility)&lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;flex flex-col space-y-2&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;inline-flex items-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">input</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;radio&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;income_range&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;income_range&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;0-4943&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;form-radio text-blue-500&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">required</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;ml-2&quot;</span><span class=\"mtk1\">&gt;0 - 4943&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;inline-flex items-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">input</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;radio&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;income_range&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;4944-9215&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;form-radio text-blue-500&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;ml-2&quot;</span><span class=\"mtk1\">&gt;4944 - 9215&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;inline-flex items-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">input</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;radio&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;income_range&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;9216-15239&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;form-radio text-blue-500&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;ml-2&quot;</span><span class=\"mtk1\">&gt;9216 - 15239&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;inline-flex items-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">input</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;radio&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;income_range&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;15240-21623&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;form-radio text-blue-500&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;ml-2&quot;</span><span class=\"mtk1\">&gt;15240 - 21623&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;inline-flex items-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">input</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;radio&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;income_range&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">value</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;Over 21624&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;form-radio text-blue-500&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;ml-2&quot;</span><span class=\"mtk1\">&gt;Over 21624 &lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Here is the updated form - notice how it kept the overall look and feel consistent:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACtElEQVR42qWS2U4TURjH+0JyIbLWYkTEoCiIgVA0UW+88E28Mi4P4AMYtFYJotGoMaEIbizSdbrMdGa6oC1h2jLLz5xTQVEajJ7JL985c/L9z7f5rl0KcuxkF8Mjo0xNXWIyOEUweJHxiUlOnxnGH+ij92hAIvZ7EP/9fnp6/XR0dnH5ylV8w0ND9PR20n9ikNNnxzl3foKRsUlGLwQZGh7D3zdAt/84PUf76eju40hXgCPdAWl7AgMcbu+kvb2dQ21tDA6ewvf8xUump0M8fPiIB6EZpkMzhJ/McX86THhmjtDjWcIzzwiFZ3k7v8TC0mciix+JLH6S+/nIIvORBSILi7x6/QafbpiklDTRaAxFSbMejRKPJ4jF46yurkkrSCSSbFk1PMBxPVzXa1qveRarVN4QggXMQoFoLEo6kyaZSmLVLPZbrudiOza26/xEnB0b1/NQNR1fXjewajWqm1XpUG/Upd1ZHt6uk+M6OK77i3V3z7bjkNfNZoTFUpFsLksmm0HLayhpRe6FVTVViopHWiEERdIiOFnD8sZX0tksOVUlp2myBJVqhW+VbzLygwR3MpKCWt6g3miwbdu0WntT3R/x6I8IC5TKJXJqDt3QJZqmSUTa4vw3Ke9GaJgFDNMkFk+gZDLEEklUTaNcLmEWTFnfnQ57Lb4/UhYdFE0RNWs1LgdFuSsoWr1lWSSVFNlcTo6QcLd/HQ3vANzfBBt1C01VUHMKllXdiUtO4d/RFNRkU3SDjc1tVhI66+kCxU2XQnUvZqXJ7/8FRXnvsFkH3TDwVcoGd587DN6oMX6nztitP7l+ryHZ7278dl363nzqUP1q4svn8yhmg4X4Fu+T1r58SDVpdf8uvkXKaKDrupjDYrMOnv1/4GGYRXzLK6usxxKsfYmxtv6PfIlJjeWVNb4DZ59A8yEGLr8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas income selection\"\n        title=\"prototype oas income selection\"\n        src=\"/static/56f7bc15c892dbd8f614c3dcf9c0c5e2/5a190/prototype-oas-income-selection.png\"\n        srcset=\"/static/56f7bc15c892dbd8f614c3dcf9c0c5e2/772e8/prototype-oas-income-selection.png 200w,\n/static/56f7bc15c892dbd8f614c3dcf9c0c5e2/e17e5/prototype-oas-income-selection.png 400w,\n/static/56f7bc15c892dbd8f614c3dcf9c0c5e2/5a190/prototype-oas-income-selection.png 800w,\n/static/56f7bc15c892dbd8f614c3dcf9c0c5e2/39a20/prototype-oas-income-selection.png 859w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">I then asked ChatGPT to modify the logic as follows:</p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\">When the form is submitted, extract the income range.</li>\n<li class=\"markdown-list-item\">Create a subset of the csv rows around the quartile income ranges to determine the GIS amount without requiring all 1000+ lines.</li>\n<li class=\"markdown-list-item\">Wite a new function to determine the GIS amount by finding the GIS amount for the min and max of the user selected range, and taking an average of these.</li>\n<li class=\"markdown-list-item\">If the user selects the \"Over\" range, then the GIS amount is 0.</li>\n<li class=\"markdown-list-item\">Pass in the GIS amount to the chart data generation functions and add it to the previously calculated amount.</li>\n</ul>\n<p class=\"markdown-para\">Here are the JavaScript changes ChatGPT generated:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// NEW: Subset of lookup data from the csv file,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// converted to JSON for easier wrangling in JavaScript</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> gisDataRows </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">0</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">23.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">1065.47</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">4928</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">4943.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">799.47</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">4944</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">4967.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">798.47</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">9200</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">9215.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">532.47</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">9216</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">9239.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">531.47</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">15216</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">15239.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">266.43</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">15240</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">15263.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">265.43</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  { annualIncomeFrom: </span><span class=\"mtk4\">21600</span><span class=\"mtk1\">, annualIncomeTo: </span><span class=\"mtk4\">21623.99</span><span class=\"mtk1\">, totalMonthlyGIS: </span><span class=\"mtk4\">0.43</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">];</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// NEW: Function to determine approximate GIS amount, given user selected income range</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// I added a temporary console.log to see what it calculated</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">determineGisAmount</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">incomeRange</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (incomeRange.</span><span class=\"mtk5\">startsWith</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;Over&#39;</span><span class=\"mtk1\">)) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">; </span><span class=\"mtk3\">// Not eligible for GIS</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> [minIncome, maxIncome] </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> incomeRange.</span><span class=\"mtk5\">split</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;-&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">map</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">value</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk9\">parseFloat</span><span class=\"mtk1\">(value.</span><span class=\"mtk5\">trim</span><span class=\"mtk1\">()));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> minRow </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> gisDataRows.</span><span class=\"mtk5\">find</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">row</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> minIncome </span><span class=\"mtk7\">&gt;=</span><span class=\"mtk1\"> row.annualIncomeFrom </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> minIncome </span><span class=\"mtk7\">&lt;=</span><span class=\"mtk1\"> row.annualIncomeTo);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> maxRow </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> gisDataRows.</span><span class=\"mtk5\">find</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">row</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> maxIncome </span><span class=\"mtk7\">&gt;=</span><span class=\"mtk1\"> row.annualIncomeFrom </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> maxIncome </span><span class=\"mtk7\">&lt;=</span><span class=\"mtk1\"> row.annualIncomeTo);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (minRow </span><span class=\"mtk7\">&amp;&amp;</span><span class=\"mtk1\"> maxRow) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> averageGIS </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (minRow.totalMonthlyGIS </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> maxRow.totalMonthlyGIS) </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> </span><span class=\"mtk4\">2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">`=== DETERMINED GIS: </span><span class=\"mtk7\">${</span><span class=\"mtk1\">averageGIS</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> averageGIS</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk7\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">error</span><span class=\"mtk1\">(</span><span class=\"mtk6\">`Could not find rows for income range </span><span class=\"mtk7\">${</span><span class=\"mtk1\">incomeRange</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">return</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// MODIFIED: Chart data generation to add gisAmount (which could be 0)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">yearsInCanada</span><span class=\"mtk1\">, </span><span class=\"mtk10 mtki\">gisAmount</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> monthlyAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">determineOasAmount</span><span class=\"mtk1\">(yearsInCanada, minAge) </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> gisAmount</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">};</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (</span><span class=\"mtk10 mtki\">ageTakingOas</span><span class=\"mtk1\">, </span><span class=\"mtk10 mtki\">yearsInCanada</span><span class=\"mtk1\">, </span><span class=\"mtk10 mtki\">gisAmount</span><span class=\"mtk1\">) </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> monthlyAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (baseAmount </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> multiplier) </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> gisAmount;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// MODIFIED: Calculate function to extract income range from form, determine GIS amount,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// and pass it to chart generation.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculate</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">evt</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> gisRange </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> document.</span><span class=\"mtk5\">querySelector</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;input[name=&quot;income_range&quot;]:checked&#39;</span><span class=\"mtk1\">).value;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> gisAmount </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">determineGisAmount</span><span class=\"mtk1\">(gisRange)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> data </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    data: </span><span class=\"mtk5\">generateChartData</span><span class=\"mtk1\">(yearsInCanada, gisAmount),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    data: </span><span class=\"mtk5\">generateChartDataDelayed</span><span class=\"mtk1\">(ageTakingOas, yearsInCanada, gisAmount),</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> breakEvenAge </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">findBreakevenAge</span><span class=\"mtk1\">(ageTakingOas, yearsInCanada, gisAmount);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">With the GIS code changes in place, we can run the tool again for someone with 35 years in Canada and considering delaying taking OAS to age 68, but this time, select the income range of $9,216 - $15,239. Recall that before taking GIS into account, the breakeven age for this case was 82, at an accumulated OAS income of ~145K. Let's see what happens now:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 134.50000000000003%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsTAAALEwEAmpwYAAAERUlEQVR42o2V2W9UVRzH508pCSTUJ2KMIaG2LAUfjCIBok9oqwaffDP6pjHBN4mJiYZADA9YoBQefFF2igYFlxhB2s7amTt3m5m7zV1nufMx58x0KF0Cd/LJ7ze/k/P9LXPOncxH70/z2sE9HHnrbaan3+PdqSmmpqY5duwdDh8+wv4DB5jcv3/AgTX04/smJ5nYvZvjxz8k8+rkJC+9/CKvjI+za9cYY2NjjI+PMzExwc6dO9m+fTtbt25l27ZtbNmyhZGREUYGVsRGR19gx44djI6OsnfvPjI//XyN2dnLzM1dYWbmAj/MnOfi7Bznzs0we+ky5y/McmnuChcuznL12nVu3brDzZu3Jbduz3Pnzl3m539h/u6vXL9xk4xh1igUSywsLlFaLrO4lJUsZXP8+/CRtCuxKE4QT28NaU+GsSyHjKYZ1Op1srkspeUS+UKeMArZ6OmmXTrdzoakvR5VVSOjagZ+4GM7jlyI4phumq6qpDfcJATF2npEoi6abpDRdBPLtqiqVYlhGlSUCqqmSqvpmhRNe+mmCEGRfCjYsG05x1K5zHK5L2Y7Ng2rgeM6zxQUsCJYVXVa7TbtbofNnietdjdFJB1UaMj5idbMmkmtXkM3dOmLEQj7PC0PK9QNE80wWFhaolAs8lgcn/KyFBKtC/EVwd4mnzUtazKDUlXkvDZ6+pX0nm+G4th4QUKhVKKiKPLYiM0dcRTSVNLtPYP0KUGdIE5QlJIkDLyVuja4E5vRF1RXBL2wxULRIFuuYQVpHz8d+g2/z3BtDfVml6AFuhC06zrfXO+y50TEm18nvHFyPR+cSTj+/fr461/FHDwZsfdExJc/dnFtU9xljaLZ4d5Swv1czO/ZmPtrycU8yD3xf1uKuLcQ8CDf4u/llD+KXbJ6B8MwyChVjSQKiXyHTiskbUfEsU/JMnDtGq5TI9FUIlWRvmuZxIErZ5aEHmqliFLKkkQB4geWM7Rsj3JFxfEC3GYo7WrcgbVdHz9I+POvf7h67Qafff4FH3/yKd+dOsPiQh5xpmWFlu0i7rTXDGj64dCuRsRct4k4IafPnuXgoUMcPXKUb0+dJmp38YMIcY0zyxUF8ZI1a411gt7A9/1QbnD9kFrDQVV0TK0mE9iOh+f5hFEyECwrsnchulZwRcjxQ/SaRbWiYVYNXMslCGO5JrpznxIcVKgZplxo+oHEC0JMt0nVqKMqGnXVxHM8/DDC88WsfUnDcnC8JkEU99/Yiqphux5VTZNCjh+gOS6KbqIrGrZRxxeJwhBXJBqIeQO/YT8RFFqZSlWlGYToZg3FsqiYNYyyimPU8dwmju/jNH25SeAOfHfwvW7ZsiChIbQy4v61u6kM2H5AEiUEfkjYahPGCX4QErfawxaFLyqLkpasSuwTvkDe5Yf/PSZfLJLNF8gVCtL2ya/yCyxmc/IvdXVsSC5Pvlji0eMF/gfGE47w2leDmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas gis\"\n        title=\"prototype oas gis\"\n        src=\"/static/d70eb16cbee4bfe62766a117330ab46b/5a190/prototype-oas-gis.png\"\n        srcset=\"/static/d70eb16cbee4bfe62766a117330ab46b/772e8/prototype-oas-gis.png 200w,\n/static/d70eb16cbee4bfe62766a117330ab46b/e17e5/prototype-oas-gis.png 400w,\n/static/d70eb16cbee4bfe62766a117330ab46b/5a190/prototype-oas-gis.png 800w,\n/static/d70eb16cbee4bfe62766a117330ab46b/77800/prototype-oas-gis.png 855w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Whoa! The breakeven age has jumped up to 91, at an accumulated OAS + GIS income of ~319K. Given the Statistics Canada life expectancy of age 85 (for combined male/female having reached age 65), delaying looks more like a losing proposition in this case.</p>\n<p class=\"markdown-para\">You can also see that the two income streams (start at 65 vs start at 68) are closer together compared to the previous case with no GIS, showing that the delayed start has negligible benefit even beyond age 91.</p>\n<p class=\"markdown-para\">The reason for this dramatic result is GIS eligibility.  The console output is showing <code>=== DETERMINED GIS: 398.95</code>. This (approximate) amount is added to the monthly OAS amount. This greatly increases the amount of income missed during the first 3 years, and is greater in magnitude than the percentage increase in monthly payments due to the delayed start. This means it's going to take longer for the smaller monthly increase to make up for three years of missed regular OAS and the GIS combined.</p>\n<p class=\"markdown-para\">This demonstrates that delaying OAS is probably not a good idea for someone eligible for GIS.</p>\n<h2 class=\"markdown-subtitle\" id=\"explanatory-text\" style=\"position:relative;\"><a href=\"#explanatory-text\" aria-label=\"explanatory text permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Explanatory Text</h2>\n<p class=\"markdown-para\">At this point I was satisfied with the interaction and visuals of the tool. But it needed some explanatory text so the user could follow along with how their input was used for the calculations. I wanted to have the effect of someone getting personalized advice. In the case of the person with 35 years in Canada, eligible for GIS and considering delaying OAS to age 68, it would be nice to show them specific details like this:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">With your 35 years in Canada after age 18,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">you&#39;re eligible for a monthly OAS benefit of 624.17,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">which is 0.875 of the full amount 713.34, starting at age 65.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Delaying OAS to age 68 will increase your payment by 21.6% to 758.99.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">While delaying does result in a larger monthly payment,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">it also means forgoing 3 years of payments</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">from age 65 to your delayed starting age of 68.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Furthermore, your selected income range makes you eligible for an</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">approximate monthly GIS benefit of 398.95</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">which you can only get by claiming OAS.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Those 3 years of missed payments represent an income loss of $36,832.41.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">In order to break even (have the same amount of money) from delaying OAS to 68,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">you would have to live until at least 91 years old. If you live beyond this,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">then you will end up with more OAS overall than if you had started at 65.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">The chart below shows how much total OAS you will have accumulated at each age</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">whether you started at 65 or 68.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Where the two lines cross over is the break even point.</span></span></code></pre>\n<p class=\"markdown-para\">This is where a templating solution from any of the JavaScript frameworks would come in handy, but since this was still a prototype, I didn't want to commit to a framework decision at this point.</p>\n<p class=\"markdown-para\">I explained to ChatGPT that I wanted:</p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\">A results panel with the above content, initially hidden, to be displayed after the form is submitted.</li>\n<li class=\"markdown-list-item\">All the numbers had to be calculated or extracted from the form and placed into the panel.</li>\n<li class=\"markdown-list-item\">Money values should be formatted using dollars and cents, and rounded to two decimal places.</li>\n<li class=\"markdown-list-item\">Dynamic value should be rendered in a different style to make it stand out.</li>\n<li class=\"markdown-list-item\">The GIS sentence should only be shown if the calculated <code>gisAmount</code> is > 0.</li>\n<li class=\"markdown-list-item\">Since GIS is so crucial, use a yellow highlight style on this sentence if it is being rendered.</li>\n<li class=\"markdown-list-item\">Add a new function to update the dynamic portions of the results panel, to be called after form is submitted.</li>\n</ul>\n<p class=\"markdown-para\">It updated the markup to add the results panel with the <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/hidden\" class=\"markdown-link\">hidden</a> attribute. All the numeric values were represented as <code>&#x3C;span></code> elements with an id and TailwindCSS styles to render as medium blue and a little bolder than the regular text.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"htm\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsPanel&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">hidden</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;bg-white p-4 rounded shadow mb-6&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;explanation&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">h2</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-2xl font-semibold mb-4&quot;</span><span class=\"mtk1\">&gt;Your Results&lt;/</span><span class=\"mtk7\">h2</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4 text-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      With your &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsYearsInCanada&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt; years in Canada after</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      age 18, you&#39;re eligible for a monthly OAS benefit of</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsOasAt65&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;, which is</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsCanadaMultiplier&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      of the full amount &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsOasFullAmount&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      starting at age &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDefaultAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4 text-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      Delaying OAS to age &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDelayAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt; will increase</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      your payment by &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsPercentageIncrease&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      to &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsOasDelayed&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4 text-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      While delaying does result in a larger monthly payment, it also means forgoing &lt;</span><span class=\"mtk7\">span</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsYearsMissed&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt; years of payments</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      from age &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDefaultAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt; to your delayed starting</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      age of &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDelayAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;!-- This should only be shown if GIS eligible --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;gisPanel&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">hidden</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4 text-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;bg-yellow-200 inline-block px-2 py-1 rounded-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          Furthermore, your selected income range makes you eligible for an approximate monthly GIS benefit of</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-bold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsGisAmount&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          which you can only get by claiming OAS.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4 text-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      Those &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsYearsMissed&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt; years of missed payments</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      represent an income loss of &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsOasDuringYearsMissed&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4 text-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      In order to break even (have the same amount of money) from delaying OAS to &lt;</span><span class=\"mtk7\">span</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDelayAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;, you would have to</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      live until at least &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsBreakevenAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt; years old. If</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      you live beyond this, then you will end up with more OAS</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      overall than if you had started at &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDefaultAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-4 text-lg&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      The chart below shows how much total OAS you will have accumulated at each age whether you started at</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDefaultAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt; or &lt;</span><span class=\"mtk7\">span</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-blue-500 font-semibold&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;resultsDelayAge&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      Where the two lines cross over is the break even point.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">canvas</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;myChart&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">canvas</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">It then added a few functions to update the results panel with a <code>results</code> object, and constructed this results object in the <code>calculate</code> function:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// NEW: Update all elements matching `selector` with `value`</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">selector</span><span class=\"mtk1\">, </span><span class=\"mtk10 mtki\">value</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> elements </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> document.</span><span class=\"mtk5\">querySelectorAll</span><span class=\"mtk1\">(</span><span class=\"mtk6\">`#</span><span class=\"mtk7\">${</span><span class=\"mtk1\">selector</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  elements.</span><span class=\"mtk5\">forEach</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">element</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    element.textContent </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> value</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// NEW: Update results panel with a `results` object and remove hidden attribute</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">updateResults</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">results</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsYearsInCanada&#39;</span><span class=\"mtk1\">, results.yearsInCanada);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsOasAt65&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">`</span><span class=\"mtk7\">${</span><span class=\"mtk1\">results.oasAt65.</span><span class=\"mtk5\">toFixed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">2</span><span class=\"mtk1\">)</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsCanadaMultiplier&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">`</span><span class=\"mtk7\">${</span><span class=\"mtk1\">results.canadaMultiplier.</span><span class=\"mtk5\">toFixed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">3</span><span class=\"mtk1\">)</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsOasFullAmount&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">`</span><span class=\"mtk7\">${</span><span class=\"mtk4\">713.34</span><span class=\"mtk1\">.</span><span class=\"mtk5\">toFixed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">2</span><span class=\"mtk1\">)</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsDefaultAge&#39;</span><span class=\"mtk1\">, minAge);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsDelayAge&#39;</span><span class=\"mtk1\">, results.delayAge);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsPercentageIncrease&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">`</span><span class=\"mtk7\">${</span><span class=\"mtk1\">(results.percentageIncrease </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> </span><span class=\"mtk4\">100</span><span class=\"mtk1\">).</span><span class=\"mtk5\">toFixed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">1</span><span class=\"mtk1\">)</span><span class=\"mtk7\">}</span><span class=\"mtk6\">%`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsOasDelayed&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">`</span><span class=\"mtk7\">${</span><span class=\"mtk1\">results.oasDelayed.</span><span class=\"mtk5\">toFixed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">2</span><span class=\"mtk1\">)</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsYearsMissed&#39;</span><span class=\"mtk1\">, results.yearsMissed);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsBreakevenAge&#39;</span><span class=\"mtk1\">, results.breakEvenAge);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsOasDuringYearsMissed&#39;</span><span class=\"mtk1\">, results.oasDuringYearsMissed.</span><span class=\"mtk5\">toLocaleString</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;en-CA&#39;</span><span class=\"mtk1\">, { style: </span><span class=\"mtk6\">&#39;currency&#39;</span><span class=\"mtk1\">, currency: </span><span class=\"mtk6\">&#39;CAD&#39;</span><span class=\"mtk1\"> }));</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsPanel&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">removeAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;hidden&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (results.gisAmount </span><span class=\"mtk7\">&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk4\">0</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;gisPanel&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">removeAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;hidden&#39;</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk5\">updateContent</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;resultsGisAmount&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">`</span><span class=\"mtk7\">${</span><span class=\"mtk1\">results.gisAmount.</span><span class=\"mtk5\">toFixed</span><span class=\"mtk1\">(</span><span class=\"mtk4\">2</span><span class=\"mtk1\">)</span><span class=\"mtk7\">}</span><span class=\"mtk6\">`</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  } </span><span class=\"mtk7\">else</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    document.</span><span class=\"mtk5\">getElementById</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;gisPanel&#39;</span><span class=\"mtk1\">).</span><span class=\"mtk5\">setAttribute</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;hidden&#39;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">true</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// MODIFIED: Added calculations and construction of results object</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">function</span><span class=\"mtk1\"> </span><span class=\"mtk5\">calculate</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">evt</span><span class=\"mtk1\">) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Calculate the required values</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> oasAt65 </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">determineOasAmount</span><span class=\"mtk1\">(yearsInCanada, </span><span class=\"mtk4\">65</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> oasDelayed </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">determineOasAmount</span><span class=\"mtk1\">(yearsInCanada, ageTakingOas)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> percentageIncrease </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> (oasDelayed </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> oasAt65) </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> oasAt65;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> yearsMissed </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ageTakingOas </span><span class=\"mtk7\">-</span><span class=\"mtk1\"> </span><span class=\"mtk4\">65</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> oasDuringYearsMissed </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> yearsMissed </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> </span><span class=\"mtk4\">12</span><span class=\"mtk1\"> </span><span class=\"mtk7\">*</span><span class=\"mtk1\"> (oasAt65 </span><span class=\"mtk7\">+</span><span class=\"mtk1\"> gisAmount)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Construct results object</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> results </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    yearsInCanada,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    oasAt65,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    canadaMultiplier: yearsInCanada </span><span class=\"mtk7\">/</span><span class=\"mtk1\"> </span><span class=\"mtk4\">40</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    oasFullAmount: fullOasAmount,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    defaultAge: minAge,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    delayAge: ageTakingOas,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    percentageIncrease,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    oasDelayed,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    yearsMissed,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    breakEvenAge,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    gisAmount,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    oasDuringYearsMissed</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  };</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Update the UI with results</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">updateResults</span><span class=\"mtk1\">(results);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">Note that the first attempt at the above, had some repeated calculations for determining the OAS amount. There was another iteration where I told ChatGPT to extract a common function <code>determineOasAmount(yearsInCanada, ageTakingOas)</code> to reduce the duplication.</p>\n<p class=\"markdown-para\">Finally putting all this together, we now have a functioning input form, with the results containing both a visualization and a customized explanation of the results</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 184%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFw0lEQVR42pWW248cxRXG928iUnggdjZkF6/AyElIwAYrtqO8hLwl/0CebKQgRZFwwlv8gB8TyAPGYoGQ8GRsgTBmd7Znpq/Tt+mee890V99+UVXP7M7uGixq9Km6qqa/PnXOV+fUxm8vv8YLF7a4+Nplrl79DVeuXuPKlWu8/MpFnju3w7Nb2/x0ia3t506hWdvizJmz/O7119l4fmeHM2ef4fkXf84vXv41L128wq9evaaed87/ks2t8/xk+0U2t8/zo80dntk81/Q/PsfZZ1/gzOY2Tz/9Q5566gdcuPAzNh7ttfjqq0fcuXOXjz7+Dx/ufqyw+9EnvH/nLh/c3eXD3U/U+EDr0ukatDsN5HOna6reMG0ePnzERhQPSeYpumGg6waGYSrEgwGe7xOEffpRTD+KKMqKsqpPoFIoypogjNhwvYBFmmHbFrZj43ouo/GIx7WyKh+LoixYpAKn5zWEmcgZjoakWUomMuaLOZPphOlsqnD0cvVY5EVOmuX0XJ8Nzw+ZL1IMU/qiQ7vTQWtrmJaJbdvK6pqaqq6+E9IoRbiycJokpEKQFwVVXR/b6pPIyrokFWsWppkgHsRMl9scT8bKj4PhgOFo9ETCYxauttw60GhpGnutFnv7+7huT23b6Tnff8tC5MxmU/wgUM4/2eQL9bf8TlsoZSNKbK+PaVn045iyrsnLUqEovz26Sn/L/nhQ8oLpOCL0DMYDb2lX/b2w5sOARZZzT5tx5/OQz/YTHhgVn+sl95f40mqwPrfCvW7J1055pMMgCBgngj/cFlz6W8HlvwsuvbXg0s20wVspv7/V4OL6/M2UV2+mvPTXBX+8nTKd57jeMsry6OViQSGRL6grcQxVmVOV63M5VPlhL9ek9A5lIwkNo0tLO+BAa1MUohFsVSmRV5UUe0kpI0qtlCDyXB2C5iCc1KFMDn6M40cYjo/tReoo6oau0AtirF6AprVwHAvL8ehHIZ7vKfE/hlDgRTN6no/nubiDjJ7fx3UdNfaiCW4QNXPBACfOENWRTuvjUW62LL8sE4HT6+H6IV4Y0XNdXN/H6dlqPYwnhIMpbjjCj0aMpwmjyQRR5Ii8WD96GZatY5pt9O4+umXieQ6GodHp7GMYbdVLC5Nkwmw2ZDIZMJmOVV8U2RGh6/fJsjm9vbfR7v0J6+u/0H34Np0Hb2B+eQPjixt0H1xH/+IG7fvX6Ty4TnTwJuH+nwn338T/5g0m9i2ESFeEoUqsgbmLc/Aurv4Blv4pjvYebvtd3PZ72K1/4nX+jXPwLzU/Cv/LNP6Mcvo/mH1Kldwny7J1Hwr68ZggmuAHEWE/ouf18cMBXhDjBzH9eIQfxgTRCMNPcPopw1nFLAUZn0wUx4Nimjpau4Wud1XW7nQ0upZLu9NWacyyLQxTx7JNdF3Dtrrolo3l9Ijj8HSU/cBXBUrmQSmXQI09Vby8/khJSwjpfEGmMnuuxvNFQjJPThNKsm63g271sNxI1VlJJi0z7cZCaalEp9Omq3eVzPpRXxW4Y+lLnkOZ+ofDAckiYy5KrMEAPwrVSRh7PkPPZzAaEkX9plzMpsraVTuesfNClU9peqP7irTMyXKhXiqFoMgyJWCpCNkM0+Cd2+/wj1u36DmOKvrH6nIyn6lavKq/9TLtV8uEIPujgl+p4tWxbcxejzTLTp6UVPlhlswUYZNpjm4Gjc01aS4YjycM4wHpIj1c4+RZTuYL5asVoSJVxaqmqCuSLGM4HDEZjMjm8+Uay4hnp7ONjLJ0siRcbTWrSibpQhHNhmPyNF36tz7chVj6+HQZXQZlMhkzL3JGScJ4MCQdT6iEONxyU+nKJxNKC+XXFyJlnC4Q8zllmioiGVlJID8ob1kSUtQNSbYcC9LV7Svsx+pup35rd5pqWSBX9xyZ6lX0l3MneykbP+izsbffoqsbaG15hrtoEsvnQ6ixvsT6WjOW/+/qJt/stfg/T7GX3bVbudUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas with explanation\"\n        title=\"prototype oas with explanation\"\n        src=\"/static/4b2140f636839e03dc82e2fead04ec30/5a190/prototype-oas-with-explanation.png\"\n        srcset=\"/static/4b2140f636839e03dc82e2fead04ec30/772e8/prototype-oas-with-explanation.png 200w,\n/static/4b2140f636839e03dc82e2fead04ec30/e17e5/prototype-oas-with-explanation.png 400w,\n/static/4b2140f636839e03dc82e2fead04ec30/5a190/prototype-oas-with-explanation.png 800w,\n/static/4b2140f636839e03dc82e2fead04ec30/eb390/prototype-oas-with-explanation.png 935w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"bonus-logo-generation\" style=\"position:relative;\"><a href=\"#bonus-logo-generation\" aria-label=\"bonus logo generation permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bonus: Logo Generation</h2>\n<p class=\"markdown-para\">To add a final touch to the prototype, I wanted a custom logo for the header and favicon, rather than the default grey globe in the browser tab:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 678px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 105%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAADTUlEQVR42pWTW1NbVRTHz/eABxsuw1AoiIA+OKPgtAKOfgS1fgSf/ALFqgVS0ii+dHiyM9aOM4r0QX1pgVISQiCFlqCWNheSnJOUnFzOPT/n7BPCZeLU7jO/Wfusvdf/rLX22dLb57sYequd84P9fDj2EZfG32d8bIKJiQ8YGxtnZGSU/v7Xae/ooK29vYGvrU1wzufjtXM+4RscHEIa6O+nr6+X3qE+Puu4zOXuT7nwZh9DbwwxPDzMwMAAPT09tLa20tLS0rA+n4/Ozk66u7sFXV1d9PZeQJoNBAkG5wh+9y03/fPMfz7P5BeTBOaC+Geuc+NGkOuzAa5NTTM9PcPU9AzfXJsS1u+fZXY2QKC+JxAIIkU3Y/z+x5/cu7dEaCPCwt1FfvMvcv/uMg/CaywsLLK6usbS0gorDx5yf2mFqm5SA2zHw7KP51K+8IJMNks2JyPLeZRCgWwmx/qtdRK7STJyFlnJo+QL5GRFUCqXqWoaleppSuUK0mGxSCgcIhqNshHdIBaLEf87jmM4PF9+RrNRo4ZTc07heg3TRDJMi0q1giOKOAo4EVzz3twg27HreCK28Hlz0zJF1pKm6xReFChXypTKpYZVVVVYl6KqYlpWXbQJ9Y9puoHkbnZLfrT9iPVIhK3YFqFwmFhsi8ePd9je2Sa6GRVVHGVaa/K4Q5TspnmoqnVKFEsl0dyz47jk5lm667phIOmGSams8rJx9hCaIUquVKtkMgfkC3mBklcEsiILsrmswDCNRg/PCp3K8LCoEo6s8yQeZ3tnh82tLSLRKPG9OHt/7bEb3xV9fVkP3ccwTO+U3b6l0mlxmlVdp6Jp//nvNfsHj/xu+yQ3TUWRebr/lIPMAbZteZk4dtOgZhmeEnSPOn2QIpVOCdGiWjxV2isL6q5gJsOzRJL95wmS6TTuRTJtB8v5/9hOXdByr0wph3zwD/nsPlA9cQFfDVdLkosGP67q/LBc4dZylTshi5/WzAZ3Qia/RCx+jVhifvvE2hG3H5r8vG6hFA2kJymD964ajH7p2ZFJrcG7VzQuXtX45Hudj+d0Ln7l+U7uGZ3UeOeKxtjXOrspA6lU1kgqOglZI+mieO+e9XyJOsfrJ/FiU3kdV+tf2lHBbe1ZFWQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas generic favicon\"\n        title=\"prototype oas generic favicon\"\n        src=\"/static/b8ad9ed25dc0aca4280019401c5e3221/38cea/prototype-oas-generic-favicon.png\"\n        srcset=\"/static/b8ad9ed25dc0aca4280019401c5e3221/772e8/prototype-oas-generic-favicon.png 200w,\n/static/b8ad9ed25dc0aca4280019401c5e3221/e17e5/prototype-oas-generic-favicon.png 400w,\n/static/b8ad9ed25dc0aca4280019401c5e3221/38cea/prototype-oas-generic-favicon.png 678w\"\n        sizes=\"(max-width: 678px) 100vw, 678px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Generative AI proved useful here as well. Using <a href=\"https://en.wikipedia.org/wiki/Stable_Diffusion\" class=\"markdown-link\">Stable Diffusion</a> with the <a href=\"https://drawthings.ai/\" class=\"markdown-link\">Draw Things</a> app, I began by asking ChatGPT for a logo prompt. Here’s what it suggested:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">An elegant and modern logo design featuring a stylized hourglass</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">with a dollar sign inside, symbolizing time and financial planning.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">The hourglass should have a smooth, clean look with a minimalistic approach.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Incorporate shades of blue and green to represent trust and growth.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">The overall style should be flat and vector-like,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">suitable for use as both a logo and a favicon.</span></span></code></pre>\n<p class=\"markdown-para\">Initially, simply pasting this prompt into Draw Things didn’t yield the desired results. Here are some of the early attempts:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 346px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFaElEQVR42iWUfVDTdRzHf/90df3TZWbPXWed13U9aXVdXQ9alGVJBIqpICMVVIQxcA/OCWwLwS0ISC1DRBxtpsIYj7IUZRvskY3BeEaoJqmgZmVqYr46xvvuffe51/d938/nc9+7r3D95i16Ri8QHJtgJHyRyUtXmbz0JyPhyQgLnb3Av7emuTU9zcS5ScLhi/z260XOjc96pp5hv09MRTJCs2OI11L2sOtgEzZHN03tHlrsXmwdQbQVTbycXErX0HlC3cPEfqIkOV5L6oY8kiRqRJlqNn2pJmmFhtWxuQS6hhDqnSG05Q24A71El+znwcydzBWriCsrxxMIodxjxj0axufqIyZKSnK2mpd27mRulpK52Upezc1lfaaa+E+UdHb0Inj7xmmzdfF2YSnCchH5Da3kmpsQPhXxvm4PJ9q8jF24hMceYtVaGYu0GhZqilHVNCI/auFFdRGvajQkrduB0x5CmJiYorzxJEJiBot1e4E7cOc2bxWUISSms8/cyo2b/+K2Bfk4Tc4jCjXr9h9iRrf/u038ngM8JM8hLmMnXnsvwuSFy5TWtiCsTWflvtngjKLLDiCsSUN/pJ7pW9O4bN1Epcl5bLuGOenbKbWeRmtpYc5WBY9u17BcrMLv6EXoHz1Hq93LvKxchPjNNAZ6OObxI6zawoNiFTUnbExe/Rt3ew+xG+TMz9UwN0NFKDzByVA/921VsiBPy9pUJS5bCMHqG8DUYOdIu4N7tii4N03J3VsU3JW6jYpmK4Y6G8Fff8fr7GN1tIKYPA0LC/RoWqwoLc08n19IXE4e6+JUuDpDCMdO9fDG5m8x1dtpsXtQGI4hrTRhttow1Tt4PaWUzv4wPmcv772ZQUKskphUOS9syuClTWJiU6WsiVGw7L1sOuxBhPD5P9h73MmPbV78fWc5H56MONA/TnWbl73HO7l89TqXpq5gqj7BT9VWjhmsWExW6oyz9ZFqK0dNVqamriBMTl2hpvYMRuNpqo+3Yzllw3LShuHoDGuLnP351zUuX/mLugY3ZouLBouL1hYfrc0+6utcs6zZG8kI5gYHTywQEbVaQlqBBFFhJskFYrbkZ7F4hYSHn0rA4xvA5xvh3SVKRKJi1n9VxYoSEytLjKRoq0hM+JqlH+fR6RxAqLM4+ShRitqg4hWVlHkZMh4Sy3gzV0be4RyWxGXhdg/i84+QmFBEmqGBZ/cZeaCgggcKK3j+exMZVfV8KSrB6RpEqGvxkKmTsWjHNj7U6XEEmzjtrmVRjpaofDkbc7Jx+Ufwe4ZYn1sZueBp3SEUjafJqjvFk4WVLNz/E+maw3TY+xBOdnSRVpzNo2IpK0r13Lnm4+rEGZbka5kvlbEhX0Jw6Cwh/1lW6Qzcv6ucXWd82IM9/Ozzk93sYJ6uguSvjfhnJjxh6yLjm208mSXjGZmS4fE2nIF6HpfIWCCTkZIvITAwRq9vlDWFBubpDrKh5hTd47/gGBxm5Y/NPF50iI16I97OAQRzo5vNGjkxegWCSELSdyVEF+1GSJaQUKYgUZqN0zOMzzPExm0/8G5VLXO0P7C0wswHB2qZ81U5H1SZ2Sorp8PRN/MonbyxTEJOeQ6f7ZZyoLWSsrr9xOqzUX2fw8LF6bg9A/j8o8R+vgvptzVEHaxhfslhni4xsPRQLdLio3wRvxune2bln7288Mpm3omWkpa3g28qtRQfVJOyYztvLZPy3MsbCfSMEOwZY3mMlqTEIjLlFYj1RsQ6I5mychLX6ln5xW58XcMI1/65TldgEI+nn073IO2eQdq9g5FuHm8/XYGhyPd1/cZNQn3j9IbG6O4eIeifdXf3aIT19//CjRs3+R+0p2kK265SugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas logo generation early attempt\"\n        title=\"prototype oas logo generation early attempt\"\n        src=\"/static/63270f36988a93e53a793e92cb969427/8f77f/prototype-oas-logo-gen-early-attempts.png\"\n        srcset=\"/static/63270f36988a93e53a793e92cb969427/772e8/prototype-oas-logo-gen-early-attempts.png 200w,\n/static/63270f36988a93e53a793e92cb969427/8f77f/prototype-oas-logo-gen-early-attempts.png 346w\"\n        sizes=\"(max-width: 346px) 100vw, 346px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">To improve the outcome, I found guidance from this <a href=\"https://openaijourney.com/stable-diffusion-illustration-prompts/\" class=\"markdown-link\">post</a> and downloaded a LoRA optimized for vector illustrations. After tweaking the prompt and settings, I settled on the following configuration:</p>\n<table class=\"markdown-table\">\n<thead>\n<tr>\n<th>Parameter</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong class=\"markdown-strong\">Positive</strong></td>\n<td>(Masterpiece:1.2, high quality), vector illustration of an hourglass on a desk, gold coins scattered on the desk</td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">Negative</strong></td>\n<td>((disfigured)), ((bad art)), ((deformed)), ((poorly drawn)), ((extra limbs)), ((close up)), ((b&#x26;w)), weird colors, blurry</td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">Model</strong></td>\n<td>Generic (Stable Diffusion v1.5)</td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">LoRA</strong></td>\n<td><a href=\"https://civitai.com/models/108841/niji-flatillustration\" class=\"markdown-link\">flat_illustration (SD v1.x)</a></td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">Image Size</strong></td>\n<td>512 x 512</td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">Steps</strong></td>\n<td>104</td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">Text Guidance</strong></td>\n<td>15.0</td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">Sampler</strong></td>\n<td>DPM++ 2M Karras</td>\n</tr>\n<tr>\n<td><strong class=\"markdown-strong\">Shift</strong></td>\n<td>1.00</td>\n</tr>\n</tbody>\n</table>\n<aside class=\"markdown-aside\">\nLoRA (Low-Rank Adaptation) is a technique that fine-tunes large pre-trained models with a smaller dataset, significantly reducing computational costs. It's particularly useful for adapting models to specific tasks, styles, or domains with limited data.\n</aside>\n<p class=\"markdown-para\">After several iterations, I finally achieved this result:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE6UlEQVR42l2UeUzTZxjHmf/sv82dMfGCrrS/X++WXgKtgEilEkrL4TIPNDoV6WEHzoiKYgQmnhMVyo1uDnWoUzwm81pENh3GabYwTRYTpxNM5m10znyWtji3vcmT548338/7vO/zfd4YjehDK3rRiF60og+N4CVuTIC40X7kcUUopAtQSH2REKV+ZBI/sWMXEjs2gFqI6jSCD82QNuYFRDu0oRV8rJqRz/4t0zh+bD+9Pb2cO1nE950eerY6ObbCSWfQSfnUKRGITvGikLD2f0C14MOg9HGj3QpXJ/Lw3inu3+nnwc1CHlxM4+EhIw/btdAh41rTOHQKH9JYP2q575/bRYBhcviEyGlCAFdaEMf4fEYrvIySzuC14TaGv5nGOyNcvPWuB2faBzhtXgzKINNyirHo/ajk/6nQh070Eh8XZPSYcrT6tdiSq3jPXIc6q4Nhr9p5fUQhsboNjFSsZULGOuIVa8nOXMbPu9PJSv0QuTSATiyOAsOVySUB5ubNpiJQTIJlGxkZtbwtC2Eq6CZmWBqvDPcxXFbPG3GbmZQZIsGyBaVuPWbzMpTyIOp/X1mvKEYSW8qaklm0rJqBztqGI2snQV8pFy+epr5qOjVeJ6HSQhYXlpAxeTfGxBYE3TZkimqU4uJop6NAf+RB1WIJctUapJpWxqV8RorjG0Iby+B5CQysgB4BvpXQuqyMJOcJrPYdKI2NKLVrUSqWoxb8L4HhLonxi5Ap1yDoWzHb9+DIOoZu/A9cPjMHfk2Ckwr6W12Y0s6T6jqGMbkDqaYdiXIL8fErUMmHgGGrmHUB0mxLSEmpITW9mcmuXRTO7MKW2cdM3wWuX6rg9wsfMd97GtvkC0yfs5fUjA7mzVxPd/MsshxL0auCqOXFxITNqVcFMOjKMJhqMCY2YU/fQ05+F4mTzhNnuMK6uh/Z1NhHXMIVkh1nyS44gNneQUHBVupX+xlnXoJaXIhGKH5pG6V8EfFCNRJVA+bknUzO6USiP8HUuZe4OfiU3wb+Yurcy8j03ThcnRiTdhCvDjFWtgG5bGlkKF4aW/SilAWwGpaQMWFdpIMTJ7WT7urm+q3HPH0GP914xtn+xzjc3aQ52jElNyNoP2WUpBp5/MdDM+0lJjw+OnEBGmER+yvtDHwlZUpuLUn2bWxuu0J43b77iOP9cOoaVLUOkD6xHoO5FqPpEyoDc8i0F0U+D33Y2IIYRBACSGWLWFkSpGWdl8SUzVjs29j+9X0Gr/WydKqS2k1b6eq9xue79pLqaECiqmHCxArONqeQOX42cdISRDFAzBRtEeHIV8/HrSohW1NOtlhKXWUpg/cuwfNz/HJET2+ribvdTh51jqSldDZuTQl52iB56oV4VN4Io0BTREyrJYc2izsS7RYXbZZs2hNy6arM5MjRevZ37ubQriwONySzd7WBfZVmuoqT2W5202Yd0lqj+lazm5gGs5tGs4dGi4cGUzQPbkmi74tJHOz6kqNHuji4530OtDk4vNHGvjIrfdUmBmptNFqHtOEwRfVRoCm8Ec11ply+W27j9kkXj+708OTxdf78Yx5Przp5csLGgx1WbtUaObN0PHVmN00RoJumF8CQ2U3I5CacG0xu6o0e1uvzqE7Io8KUx0pTASsTclmR4KHc4GGVPpcqQx41Og/1Q4WEdeEIGd38DSAHbUoJYhWzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas logo hourglass coins\"\n        title=\"prototype oas logo hourglass coins\"\n        src=\"/static/7ec43a7abf8dcee3c24b887d4a04295a/772e8/prototype-oas-hourglass-coins-logo.png\"\n        srcset=\"/static/7ec43a7abf8dcee3c24b887d4a04295a/772e8/prototype-oas-hourglass-coins-logo.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">To integrate the logo into the header, I used this HTML snippet generated by ChatGPT:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"htm\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;flex items-center mb-4&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">img</span><span class=\"mtk1\"> </span><span class=\"mtk5\">src</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;logo.png&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">alt</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;OAS Delay Calculator Logo&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;w-12 mr-4 rounded&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">h1</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-center text-2xl font-semibold&quot;</span><span class=\"mtk1\">&gt;Prototype OAS Delay Calculator&lt;/</span><span class=\"mtk7\">h1</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">I then used <a href=\"https://realfavicongenerator.net/\" class=\"markdown-link\">Favicon Generator</a> to create the favicon, resulting in this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 562px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdUlEQVR42lXNy04aYRyG8bmWYjp0FlQ5VoZhZoBWm3pYtIkcvBhvxLhy40Jt2q6qHEZgGIcB3XRlY1MQSlpR1JUaH8NnY3Txy/s/LF5pYeY9+ZkokdkQhjnLp495CssFcrm8kM3mWFrKMj+/QDqTIRKNMhUM/hd6nIOhkCCFg2GirxVeTSqob+KYmoGmaei6QTKZRNMexOMq4XAEv9/PS1lGfpKyLOObmOCFz4f0YW6O9Nt3pFMZzFSK6ek4sVgMXdcxTVPkuCCRSDwzLlNVFcMwhEAggKIoSJtb31hbXefL1+80vRZNry04+01s28FuODQcV9zqtsO+6wmu64m9Wq1TrdnUxuo20uaGRWFxhe2NCl7bo1SyqFT2cJstdnaL1OoNdoslypU9vFabYrGMZVUply2GZyPugOubO25uH0iHzgH29meODn4w+Dek0znh6Ocx3ZM+/f6AP4O/9PoDjn/9FnO32xO/TrfH6fCc0cUV56PLR/c7sjSJklxCVQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"prototype oas logo header\"\n        title=\"prototype oas logo header\"\n        src=\"/static/42d3c82449285ccdb402e09c043f162a/6e88f/prototype-oas-logo-header.png\"\n        srcset=\"/static/42d3c82449285ccdb402e09c043f162a/772e8/prototype-oas-logo-header.png 200w,\n/static/42d3c82449285ccdb402e09c043f162a/e17e5/prototype-oas-logo-header.png 400w,\n/static/42d3c82449285ccdb402e09c043f162a/6e88f/prototype-oas-logo-header.png 562w\"\n        sizes=\"(max-width: 562px) 100vw, 562px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"prototype-is-done\" style=\"position:relative;\"><a href=\"#prototype-is-done\" aria-label=\"prototype is done permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prototype is Done</h2>\n<p class=\"markdown-para\">That concludes the prototype development. You can try it out <a href=\"https://danielabar.github.io/oas-delay-calculator-prototype/\" class=\"markdown-link\">here</a>.</p>\n<p class=\"markdown-para\">The prototype has successfully visualized and explained the impact of delaying OAS under different circumstances, showing:</p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\">For someone with the full residency requirement, delaying by a few years results in a break even age is very close to average life expectancy.</li>\n<li class=\"markdown-list-item\">For someone with less than the full residency requirement, delaying doesn't provide additional benefit over and above what someone with full residency would get from delaying.</li>\n<li class=\"markdown-list-item\">For someone who is entitled to GIS, delaying is likely to be sub-optimal.</li>\n<li class=\"markdown-list-item\">In all cases, delaying results in missing out on significant pension income that could have been useful in the early retirement years.</li>\n</ul>\n<p class=\"markdown-para\">There's still significant work required to transform it into a fully-fledged product. For example it could be more illustrative to have the Statistics Canada life expectancy layered on the chart. The lines should also \"bend\" at age 75 to account for an <a href=\"https://www.canada.ca/en/services/benefits/publicpensions/cpp/old-age-security/benefit-amount.html#h2.2\" class=\"markdown-link\">increased amount</a> as per government policy since 2022. It might also be better to round all the numbers to the nearest 100 and clarify that all numbers are approximations.</p>\n<p class=\"markdown-para\">There's also the work of selecting a suitable JavaScript framework to replace the increasingly complex imperative DOM manipulation, implementing automated unit and system tests, and extracting hard-coded numbers into meaningfully named constants. Additionally, a strategy will be required for updating figures based on government data, which is published quarterly or annually for inflation adjustments, and to set up a CI/CD pipeline along with automated tooling for code style and formatting.</p>\n<p class=\"markdown-para\">However, it's crucial to pause development at this stage. Continuing to build beyond the prototype phase can lead to unnecessary work when porting to the final product, or worse, tempt you to use the prototype as the foundation for the real application, which would result in a codebase that's difficult to maintain in the long run.</p>\n<h2 class=\"markdown-subtitle\" id=\"lessons-learned\" style=\"position:relative;\"><a href=\"#lessons-learned\" aria-label=\"lessons learned permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lessons Learned</h2>\n<p class=\"markdown-para\">Throughout this rapid prototyping journey with ChatGPT, a few key insights emerged:</p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\"><strong class=\"markdown-strong\">Speed</strong>: The development process was notably faster, especially during the initial setup of Chart.js, form building, and what would have been a tedious task of building the customized results template.</li>\n<li class=\"markdown-list-item\"><strong class=\"markdown-strong\">Functional UI</strong>: Although the generated UI may not win design awards, it’s functional, with neat alignment, accessible tab order, and overall consistency.</li>\n<li class=\"markdown-list-item\"><strong class=\"markdown-strong\">Bugs and Limitations</strong>: Introducing new features sometimes led to bugs, as updates didn’t always integrate seamlessly with existing code.</li>\n<li class=\"markdown-list-item\"><strong class=\"markdown-strong\">Complex Logic</strong>: ChatGPT struggled with the breakeven logic, requiring manual intervention to refine the algorithm before it could generate correct code.</li>\n<li class=\"markdown-list-item\"><strong class=\"markdown-strong\">Code Style</strong>: It often suggested creating anonymous functions like <code>const findBreakevenAge = () => {...}</code>, which result in confusing stack traces. I prefer traditional function declarations like <code>function findBreakevenAge() {...}</code> for clearer debugging.</li>\n<li class=\"markdown-list-item\"><strong class=\"markdown-strong\">Efficiency Concerns</strong>: Redundant calculations and hard-coded values required manual optimization, highlighting the need for developer oversight.</li>\n<li class=\"markdown-list-item\"><strong class=\"markdown-strong\">Engineer’s Role</strong>: Generative AI is not (yet?) at the point where a functioning product can be produced without any engineering effort. When I gave it the problem statement exactly as worded by the SME, the initial output was confusing and failed to respond to user input.</li>\n</ul>\n<p class=\"markdown-para\">These lessons show that while AI can accelerate development and handle routine tasks, the nuanced decision-making and problem-solving abilities of a skilled engineer working together with a product manager or subject matter expert are still needed.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk9 { color: #66D9EF; }\n  .monokai .mtk10 { color: #FD971F; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","timeToRead":29,"tableOfContents":"<ul>\n<li><a href=\"#user-input-form\">User Input Form</a></li>\n<li><a href=\"#responding-to-user-input\">Responding to User Input</a></li>\n<li><a href=\"#bug-no-breakeven\">Bug No Breakeven</a></li>\n<li><a href=\"#bug-breakeven-incorrect\">Bug Breakeven Incorrect</a></li>\n<li><a href=\"#bug-cant-change-age\">Bug Can't Change Age</a></li>\n<li><a href=\"#less-than-40-years-in-canada\">Less than 40 years in Canada</a></li>\n<li><a href=\"#gis-eligibility\">GIS Eligibility</a></li>\n<li><a href=\"#explanatory-text\">Explanatory Text</a></li>\n<li><a href=\"#bonus-logo-generation\">Bonus: Logo Generation</a></li>\n<li><a href=\"#prototype-is-done\">Prototype is Done</a></li>\n<li><a href=\"#lessons-learned\">Lessons Learned</a></li>\n</ul>","frontmatter":{"title":"Rapid Prototyping with ChatGPT: OAS Pension Calculator Part 2","date":"02 Oct 2024","description":"Continue exploring the development of the OAS pension breakeven calculator prototype in this second part. Learn how user input was integrated into the tool, enhancing its functionality and personalization. See how edge cases were handled, bugs were resolved, and how the prototype was refined to provide valuable insights for low-income Canadian seniors.","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#c8d8d8","images":{"fallback":{"src":"/static/1ab29516b0c21eaf217311f3ab6a988c/f2542/rapid-prototype-oas-part2-kenny-eliason-KYxXMTpTzek-unsplash.jpg","srcSet":"/static/1ab29516b0c21eaf217311f3ab6a988c/65923/rapid-prototype-oas-part2-kenny-eliason-KYxXMTpTzek-unsplash.jpg 225w,\n/static/1ab29516b0c21eaf217311f3ab6a988c/7d29f/rapid-prototype-oas-part2-kenny-eliason-KYxXMTpTzek-unsplash.jpg 450w,\n/static/1ab29516b0c21eaf217311f3ab6a988c/f2542/rapid-prototype-oas-part2-kenny-eliason-KYxXMTpTzek-unsplash.jpg 900w","sizes":"(min-width: 900px) 900px, 100vw"},"sources":[{"srcSet":"/static/1ab29516b0c21eaf217311f3ab6a988c/cdde7/rapid-prototype-oas-part2-kenny-eliason-KYxXMTpTzek-unsplash.webp 225w,\n/static/1ab29516b0c21eaf217311f3ab6a988c/c2685/rapid-prototype-oas-part2-kenny-eliason-KYxXMTpTzek-unsplash.webp 450w,\n/static/1ab29516b0c21eaf217311f3ab6a988c/e0ad8/rapid-prototype-oas-part2-kenny-eliason-KYxXMTpTzek-unsplash.webp 900w","type":"image/webp","sizes":"(min-width: 900px) 900px, 100vw"}]},"width":900,"height":591}}}},"fields":{"slug":"/blog/rapid-prototype-chatgpt-oas-breakeven-part2/"}},"relatedP":{"edges":[{"node":{"id":"a103f88f-4941-5f40-8adc-948b6eba5d2c","frontmatter":{"title":"A Tale of Rails, ChatGPT, and Scopes","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#88a8d8","images":{"fallback":{"src":"/static/6a7549b18238d8d5eea0e365c15f3c5f/26528/rails-scopes-chatgpt-elizabeth-gottwald-dnIWYrliZfU-unsplash.jpg","srcSet":"/static/6a7549b18238d8d5eea0e365c15f3c5f/26528/rails-scopes-chatgpt-elizabeth-gottwald-dnIWYrliZfU-unsplash.jpg 300w,\n/static/6a7549b18238d8d5eea0e365c15f3c5f/43429/rails-scopes-chatgpt-elizabeth-gottwald-dnIWYrliZfU-unsplash.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/6a7549b18238d8d5eea0e365c15f3c5f/5d6c3/rails-scopes-chatgpt-elizabeth-gottwald-dnIWYrliZfU-unsplash.webp 300w,\n/static/6a7549b18238d8d5eea0e365c15f3c5f/68dbc/rails-scopes-chatgpt-elizabeth-gottwald-dnIWYrliZfU-unsplash.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/a-tale-of-rails-chatgpt-and-scopes/"}}},{"node":{"id":"65cc2545-59c3-5b84-8488-92b37c0f5a56","frontmatter":{"title":"Hack Your RRSP Tax Refund","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#c8d8f8","images":{"fallback":{"src":"/static/0ffa5a611228ca9d722f48481088eecc/ad250/tax-season.png","srcSet":"/static/0ffa5a611228ca9d722f48481088eecc/ad250/tax-season.png 300w,\n/static/0ffa5a611228ca9d722f48481088eecc/b64d1/tax-season.png 600w","sizes":"300px"},"sources":[{"srcSet":"/static/0ffa5a611228ca9d722f48481088eecc/5d6c3/tax-season.webp 300w,\n/static/0ffa5a611228ca9d722f48481088eecc/68dbc/tax-season.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/hack-your-rrsp-refund/"}}},{"node":{"id":"e43646a1-6a97-5a2d-8028-55f3716966d4","frontmatter":{"title":"When the Password Field Says No to Paste","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#180808","images":{"fallback":{"src":"/static/3b38eaa6c3ec192c77aa27d5fc553ff1/26528/password-paste-fly-d-C5pXRFEjq3w-unsplash.jpg","srcSet":"/static/3b38eaa6c3ec192c77aa27d5fc553ff1/26528/password-paste-fly-d-C5pXRFEjq3w-unsplash.jpg 300w,\n/static/3b38eaa6c3ec192c77aa27d5fc553ff1/43429/password-paste-fly-d-C5pXRFEjq3w-unsplash.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/3b38eaa6c3ec192c77aa27d5fc553ff1/5d6c3/password-paste-fly-d-C5pXRFEjq3w-unsplash.webp 300w,\n/static/3b38eaa6c3ec192c77aa27d5fc553ff1/68dbc/password-paste-fly-d-C5pXRFEjq3w-unsplash.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/password-field-no-paste/"}}}]}},"pageContext":{"slug":"/blog/rapid-prototype-chatgpt-oas-breakeven-part2/","relatedPosts":["Hack Your RRSP Tax Refund","When the Password Field Says No to Paste","A Tale of Rails, ChatGPT, and Scopes"]}},"staticQueryHashes":["163244226"],"slicesMap":{}}