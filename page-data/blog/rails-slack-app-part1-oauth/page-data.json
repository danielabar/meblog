{"componentChunkName":"component---src-templates-post-js","path":"/blog/rails-slack-app-part1-oauth/","result":{"data":{"markdownRemark":{"html":"<p class=\"markdown-para\">Welcome to the first installment of this multi-part series on building a Slack application with Rails. This series will guide you through the process of creating a Slack application with Rails and is structured as follows:</p>\n<ul class=\"markdown-list-unordered\">\n<li class=\"markdown-list-item\">Part 1: Rails new, Slack, and OAuth === YOU ARE HERE ===</li>\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part2-slash-command-with-text-response\" class=\"markdown-link\">Part 2: Slack Slash Command with Text Response</a></li>\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part3-slash-command-with-modal-response\" class=\"markdown-link\">Part 3: Slack Slash Command with Modal Response</a></li>\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part4-action-modal-submission\" class=\"markdown-link\">Part 4: Slack Action Modal Submission</a></li>\n<li class=\"markdown-list-item\"><a href=\"../rails-slack-app-part5-slash-block-kit-response\" class=\"markdown-link\">Part 5: Slack Slash Command with Block Kit Response</a></li>\n</ul>\n<p class=\"markdown-para\">Feel free to jump to a specific part of interest using the links above or follow along sequentially. You can also checkout the <a href=\"https://github.com/danielabar/retro-pulse\" class=\"markdown-link\">source code on Github</a> for the application we'll be building.</p>\n<p class=\"markdown-para\">This post assumes the reader has at least a beginner level familiarity with Ruby on Rails. It's also assumed the reader has used <a href=\"https://slack.com/\" class=\"markdown-link\">Slack</a> as an end user with basic interactions such as joining channels, sending messages, and participating in conversations.</p>\n<h2 class=\"markdown-subtitle\" id=\"introducing-retro-pulse\" style=\"position:relative;\"><a href=\"#introducing-retro-pulse\" aria-label=\"introducing retro pulse permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Introducing Retro Pulse</h2>\n<p class=\"markdown-para\">Before getting into the technical details, let's take a look at the app we'll be building: Retro Pulse. This app aims to improve the agile retrospective process. Normally a retrospective meeting is booked at the end of a sprint and everyone who contributed to the project is asked to provide their feedback such as what the team should keep on doing, what they should stop doing, and something new to try for the next sprint. But sometimes the sprints can get so hectic, its hard to remember at the end everything that happened and valuable feedback can be lost.</p>\n<p class=\"markdown-para\">Wouldn't it be nice if a retrospective board could be opened at the beginning of a sprint with a Slack <a href=\"https://slack.com/help/articles/360057554553-Use-shortcuts-to-take-actions-in-Slack\" class=\"markdown-link\">slash command</a> like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACT0lEQVR42p2TyW7UQBCG/QpAEmZ3d7vbu91eZ3ESEAQkFKRIiEMkOMCQkBwQR/IWSEDIFQVxA/GMP+pyPIJocuHwqcpV7qrf5WprOBEY2Q4GY47+iJH9H7qzlh+m2Hv8BE8PnkEXNbb6Y0r2hvY/rIsZ7g4mZLvCluOGCJMceTVDnBYI4gxhkiGMW/xII4g13CAhP9Yl4jSnWJQWqGfblDOFqWAQaVSzBlk5QzldoJ5vo6wXKKcNimqOatogN7m6zZlYMduBLqZIswpZMUWSlSRizCQs6UXUyXSJ0px8o8K81KrLVspM3vh2WGDEXQzGDOYfdJBCUzXRJdK8oq5c+qu53ET/aqbrsExlU7Sj6/Q362I3YW0NGDb7nSKGnulEa8DJmpgfZzCjMf4qt0YdFXz5fB/vloeoZw20zhEEMTiXsJlosQUYc1bPre/AFgpMuLC5gi1cTLhqC+483MP9/QPY4RROuoCjGzh6AZU1kHoBkc4p3to5xSjuxRDSh6MCCBXQ7Kng5oMTqOU59NlvZB9+ojj7hcHpD9w+usSdo0tsHH/HxvFly9XzreU39KMGo+EYQ7udu7ltxlq9R6ewX31CfHoB/+1XhCcXcI/OwV9/hlh+IeSbc7ImZvzei49g2S6kdOF4ESH9mFRaQvm0c4kuSP6ESzCajwJ33LUIY6XfYj5XeBATBcbd9uolWUWY5e2W2QtTSC+GyYurOV2HKx/MlnB2G2y+P0SvzmGNuYLyY1oLc9h07Q4wx6M/eJ2JaBWapsqLoLICYu8eRn6APwjnwdgchf4NAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro open slash hint\"\n        title=\"slack app demo retro open slash hint\"\n        src=\"/static/4895734a92143ccd3f56d5a82e953ac3/5a190/slack-app-demo-retro-open-slash-hint.png\"\n        srcset=\"/static/4895734a92143ccd3f56d5a82e953ac3/772e8/slack-app-demo-retro-open-slash-hint.png 200w,\n/static/4895734a92143ccd3f56d5a82e953ac3/e17e5/slack-app-demo-retro-open-slash-hint.png 400w,\n/static/4895734a92143ccd3f56d5a82e953ac3/5a190/slack-app-demo-retro-open-slash-hint.png 800w,\n/static/4895734a92143ccd3f56d5a82e953ac3/baaa6/slack-app-demo-retro-open-slash-hint.png 813w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Given a project named \"Quantum Canvas\" and the team is just starting on Sprint 3:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVR42p1Tya7UMBDMV7wh+zZOJnucOMksEhwQhychwRHBBXHhyv9fClXPZPR4hDlwKLXttnupLlt+mGKfV4IgVrC96L/g+LHAKuoe7z884/njJ/TDjJ0T3J3rxUcBVv8bNxRrZUWNqh3Q9COabkSnJ7TaoBtmNL1B2xs5r7tR1oM5Qo8zOm3QjwuOl7dyn925QXKtcJxP4uRlM5/FDhPPZmiziCXMcoYeF/TzBWU7SiFE3Q5gHD/aw0qzUg6zokHZaHEcylagDrWAPjmrOuHayVrYQYon2xOKVkjLjMrW6m5AqydEaY4n28fODYUXgns5c4IrV24A5xWP96FskUyQD/e2ZpIwyTYD/BUwTBSiNJMHXphKoJeTZUVsOc2K+yQfScf68fUzfn7/gt6cUDVaOOPESMVqmcQLE1mHsZLkd8RK7hES0Ewj5uOCqh2FR06b0uGkKRfy2w2T8MtJcziJKsBh0u6z8r4W2dheDD9SiPcH4YpWkOayfwlWxCofwWKLlAszkSvKgnaVDJHfJMRE6a2i1+B7+kWHbFFa05P8EPkpbHGYUTb9n5VvYO2AXVnqUAlf5I4gj6suyRcr/ldVSVYgjhSy8wner2/YXaarsBPFTPnm5LbAN6xo/VWq7RG/u8AvK/wGu+ixF+mMKOsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro open slash command\"\n        title=\"slack app demo retro open slash command\"\n        src=\"/static/eb61741b909993db2bd7f44225630fff/5a190/slack-app-demo-retro-open-slash-command.png\"\n        srcset=\"/static/eb61741b909993db2bd7f44225630fff/772e8/slack-app-demo-retro-open-slash-command.png 200w,\n/static/eb61741b909993db2bd7f44225630fff/e17e5/slack-app-demo-retro-open-slash-command.png 400w,\n/static/eb61741b909993db2bd7f44225630fff/5a190/slack-app-demo-retro-open-slash-command.png 800w,\n/static/eb61741b909993db2bd7f44225630fff/b4098/slack-app-demo-retro-open-slash-command.png 816w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">After hitting <kbd class=\"markdown-kbd\">Enter</kbd>, the app responds with a confirmation that the retrospective has been opened:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVR42oWQSU7EMBBFfYxukniIyy5P7YQQiXVLcAKEuP9JPrI77FBn8eTp15OrhJQzpCJoCjAUMGnCoCyuo+lcBg3iDG0Z11HjZTJPEXvd8fP1jfvHJ9a3d+TbihwDiAhkLRwRhknjMqguPENIw1i3HalUGIogTgghgg9CTDDEkMZBzf/zePMYlYVwIcPHG4hLX61PsFxgfYblDHfczS6e0sYiWji1NusrQl4eQp/6T1vIHLN9Rsu1mi5sh7JsyHVDzEuXcqp9/yc9w/oIF0pv+xce06uYhmoT8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro open success\"\n        title=\"slack app demo retro open success\"\n        src=\"/static/f500572bb4744e3ffa16963b8cb1df85/5a190/slack-app-demo-retro-open-success.png\"\n        srcset=\"/static/f500572bb4744e3ffa16963b8cb1df85/772e8/slack-app-demo-retro-open-success.png 200w,\n/static/f500572bb4744e3ffa16963b8cb1df85/e17e5/slack-app-demo-retro-open-success.png 400w,\n/static/f500572bb4744e3ffa16963b8cb1df85/5a190/slack-app-demo-retro-open-success.png 800w,\n/static/f500572bb4744e3ffa16963b8cb1df85/31aff/slack-app-demo-retro-open-success.png 823w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Then whenever a thought occurs to anyone on the team during the sprint about how things are going, they can request to submit their feedback quickly via Slack using another slash command:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACrklEQVR42m2US2/TQBDH/RWQaBI7fq3tXb9f60fiPPpQBRUXTkhVQS1VQWrhwg1x4M4lLUeuXEpPIPEJ/2g3SZWGHn6anRnvaHb+3lVsh2HUzdHN9hCnJfqaBVW3MRhaDxCxx+LrnGYQieKyCO14hsl8H2U1gmF7sBx2j+0yWITCXGG7vrTrnENDuaevmbKw4vkxCt4i5w2KaoRmPEXVTlC1HaqmQ1G14E0H3oxlbDSZY9zN0IymaLsZpvMD1O0ENIihWy4UGiRyY5JxlPVIrnk9luRlIwtlZS19UbDgDdxiDOKnMG1PdizGJjodmg4UUdUPU7AwgR+lMiFiAvGBQBdsxFTThWqQ5Qw35iqPLD4IogxRWiDJuSy4KYK6tUEKsGYlxCaKUPVJb4idgY6easiNIrHuTtOJPIGY0WMF/itYVxVePD9EnFUQAgkFt38P3VoW3+58G1nw6Nk+Li+O0XS7UuWct4gzjjivEKUlopQjTMrlOhPrAixM4Uc5qJx9Jn0hrhTF0G0QkyAvOPK8QJYViOMEcZzC9Ri8FZT6EtMi0DQdw6EBbWjc2/sjZ1mLw6NX2H95gqA5AOW7sNIOZjLCgHEMWLmyHANaQmUC/gBNxAwCVbegqPvn8N//QPb5N6ovfzD++hfaxzvsXN6if/VLon64Q2+1FvTWXN6id3WHp+9+QvdL6IYFZTA9hvFmgfDiBvT8BsHFd9Dza9inC7hnC5DThfSFXa+ds4XMC999ew3j5BuctIHjMii24yHLS+R5iZLX8KgPy3ZgE1dCNuyjOB6I7cK1mbwxiu0FSPIaaVEjySuEaYkgLqSyNEjh+jEcGsFhW9AIhEUgNgWZdeh/eo3+pF5ePfHiiH+QeIFE3E9h1y+OSRhMZ8nSpxCN+FEG5ifwsgLO3hR6GOEf9jnlWtlshBQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro feedback slash hint\"\n        title=\"slack app demo retro feedback slash hint\"\n        src=\"/static/85d36db28d6f0d86d146e59a379f0ff3/5a190/slack-app-demo-retro-feedback-slash-hint.png\"\n        srcset=\"/static/85d36db28d6f0d86d146e59a379f0ff3/772e8/slack-app-demo-retro-feedback-slash-hint.png 200w,\n/static/85d36db28d6f0d86d146e59a379f0ff3/e17e5/slack-app-demo-retro-feedback-slash-hint.png 400w,\n/static/85d36db28d6f0d86d146e59a379f0ff3/5a190/slack-app-demo-retro-feedback-slash-hint.png 800w,\n/static/85d36db28d6f0d86d146e59a379f0ff3/64d87/slack-app-demo-retro-feedback-slash-hint.png 818w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">The app responds with a form where the team member can select the feedback category:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACh0lEQVR42oWT2XLTMBiFfdV6l504cSx5l7xkJYvTppOUUjowZbjhjgfgBXgOXvowUtKSMtBefHNkyzqSfp9fcx0Pjk1g6BYM3YR+acA0LFiWDdOyn/XF2LRgnGGax3dyTvNID9JUmriuB9/vwyU9WA6B5XhKbddTWDaB7Xjw/ABe7w/E6yt1XA8acX1I5O6jKMGXwz267gYfHj7j9u4B7+8/YX97j8PdR3x6/IrD3QPSogJNCtCkRJxx1OM5CtHC7w+gyVMR93jCYcgwn20gqjF41YIrHaPgDUrRQNRjpTTOEbFMQeMMcVogTkt4vcHxhI7twrYcDKMYs+tbTLs9Ij7BqBwr5Pj8mYrpCyI+BRNT+E+GpmFDv9AxZDmSeq6uwzKhoBkHPSnLK8R5pfScOBfIJyv4QQjNMl1YpgNdNxFGCaaLNZabKyyWHebLDZbr4/jdegvRTFAIef1W1ewcXk9ONbQcENuBeakjjGIsVltsd3tsrm6w6nborvfYbG+w3R1QtTO1uJR1/ctQvhuEETSPChAq4IQFRgnHYtWpxdJQmlftFKI5Ihe9RhgxaH6xgJ3MoEcthglHknMVhSQXSllaPiOf/02potQbjKARh8C1HRgXlxiGFBlv1KQ0fDI9Zu515I/xe8Ep2MRXOZQ1XG6u1Y9oJws0p8BGcf6qWaRSwY+xkcGWvSx7eDhiKKsWWVljJIMrA/yGGWUZGM0QJ6dgyz6WpjLYg5Cq3d40OfsmrGoETY2oqtHrD0+GCqJOyE41i+L/G+W8wbrboeAtgh/fIH79RP/7I/q+7BTiKzPLtFUNBiFDEFKkcQrKUkSx7NlU1VciN5WMWKq0z0sE4xpBWcIlPn4DT9istnxJplYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo feedback modal\"\n        title=\"slack app demo feedback modal\"\n        src=\"/static/2d01a854408014cfcb9ad59fc2ee3237/5a190/slack-app-demo-feedback-modal.png\"\n        srcset=\"/static/2d01a854408014cfcb9ad59fc2ee3237/772e8/slack-app-demo-feedback-modal.png 200w,\n/static/2d01a854408014cfcb9ad59fc2ee3237/e17e5/slack-app-demo-feedback-modal.png 400w,\n/static/2d01a854408014cfcb9ad59fc2ee3237/5a190/slack-app-demo-feedback-modal.png 800w,\n/static/2d01a854408014cfcb9ad59fc2ee3237/5205c/slack-app-demo-feedback-modal.png 833w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">The team member can then fill in their feedback:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 678px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsTAAALEwEAmpwYAAACpklEQVR42oVU2XKbQBDkA2LJCCTuQyAOAeIWOmzJsR0ndjkPyUs+I1X5jFQ+ulMzSKqU4igPXb0ss83MbA/CSJpAHI0xFGW8G4gYXEu4Go4YxzXtEyhGGisYyT0kWYFI56UJPw+GIoQ2b/Dt8RlFs8Gnl8+42d9j9/4Rdw9PuN0/YH//hMePL3h6fkVZd9BMF4btw7A9aNYUQZxhFqVw/RiiNIYwC1KU+Yo36EBW1CjqJbKiwTwrkSxKFHWHqlnxYdVwWPQIexrAcmcwHZ8rFRwvRLKoEM4zyIrBkA48Vs1+TzV5reg2dGt6Ejuu6SO05gzdWYx6ueas/DDBdBYzz6IEXhAzUxZU4r9AGRI4Q8PxuQdxmiPN654XFZeeZCXysmXhvnd/i1FmJEYfZUEvmPMhEqAASv8c+qG8E78Bg0omQTdtkHR7JMsdnLSBNa/OUDObcXV6b8Yl7KQ+xdA7AtlIMOISedXyTTbdlvtJ6DY7NMsN2tWWQe+W6xu03RZls8JyfYv1zZ7jHC+CHhZQVAOCFeVsiabrD5N1qKfRfIE4yfn2gzhl9sM5gihFGGfMFEOXRiWbYQ5JtSCY86q/2SiFH6awvRATnXrnQjUvQznEaLbPJYtUshWXfQ+ikntz7A+xERUXYR7XcQnSEUcyhDBOsd7u0HYbFFWLJCsYluNDO9ywZjqXwcZ2e2M7fniYxQgTzTpZhaeBJuEMf1qF92imyY+O1wsezcleOjPsWziOGokZmgNd1hmm7vJfpxe8YNhz0ER4YQLH9iG3BdSvT1C+fMC4LSGJcj96HHz4HWn/EQznCyw3t4hmCYavdwh+/YD38zuuX+8gXY0gjBUd8kRj2IYFw7C4wbrpMBTNxEQzmWVFhzRWuTRieh7KEwxlBaQzGI7wG5Ov+PuSs5tbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro feedback keep\"\n        title=\"slack app demo retro feedback keep\"\n        src=\"/static/8ee5000634d8afeb7b51d0605eed0856/38cea/slack-app-demo-retro-feedback-keep.png\"\n        srcset=\"/static/8ee5000634d8afeb7b51d0605eed0856/772e8/slack-app-demo-retro-feedback-keep.png 200w,\n/static/8ee5000634d8afeb7b51d0605eed0856/e17e5/slack-app-demo-retro-feedback-keep.png 400w,\n/static/8ee5000634d8afeb7b51d0605eed0856/38cea/slack-app-demo-retro-feedback-keep.png 678w\"\n        sizes=\"(max-width: 678px) 100vw, 678px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">After submitting the form, the app responds with a direct message (DM) to the user confirming their feedback has been received:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2klEQVR42mWPwUrEMBBA+wm6LrSxbZq0TdMm7SJIdYuy6km8iizoUf//G55MwJOHxwwzw5uZrKs0bVnT5Ap1sWMOC422GOuw3YA2HZVuKSuDKhv6IWA6jyo1VW3/kdnTJ9fHD/brO/l2Zl5feFo37rcTd9sjh5tbYowM00I3BGw/0g0TvY8UZZNQsqwyFJUhm99+mF6/yY9niocvwvpMY3uadkBbl2LvRtw443xMIsklilz6tenRgnVkardHXV6ld4UYltSQt4Qk9DM+HNKVgp+WJJWaiGXmb/4Xi35zVFKWIbAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro feedback received\"\n        title=\"slack app demo retro feedback received\"\n        src=\"/static/edfb78a6e3397c39482cc80834a0362b/5a190/slack-app-demo-retro-feedback-received.png\"\n        srcset=\"/static/edfb78a6e3397c39482cc80834a0362b/772e8/slack-app-demo-retro-feedback-received.png 200w,\n/static/edfb78a6e3397c39482cc80834a0362b/e17e5/slack-app-demo-retro-feedback-received.png 400w,\n/static/edfb78a6e3397c39482cc80834a0362b/5a190/slack-app-demo-retro-feedback-received.png 800w,\n/static/edfb78a6e3397c39482cc80834a0362b/8ae78/slack-app-demo-retro-feedback-received.png 1096w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">When its time to have the retrospective meeting, a lot of feedback has already been captured. Another slash command can be used to start the discussion:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVR42n3S2UrDQBQG4DyFbWqbzCSTmcneaJpWWymKKC4XRfAh3JUWRZ/GKzdwecNf5rRiBfXiYzj/JIczk1jF4Rj+aAIxGkOMJpAHEzj7V7B3LtAglzMXaOxOV3tvDKd/ACEkhIoR6AReoNFyBazg6B7l3QeK61eUt+9o37xBXr6AnT4RfvYM5+SRmNo5fkDz/A329hnqtRrqTY76oovaoguHBbDavXV01jbRHW4jLgfw4mXIrILOKygj+yazDu0ZTCZoNBkaLU7sFps2zLMCZbWCTrWCvL0MpWPoKIEKE+gondXpXDbFPAl7vmGTTY9cLHXR6w9JUfag4hzaSNoI04LqKC3onpivwIQmXITgQlHGZxnzFCwVZRS4nqSL9YKQ+DL64Sv/FZfwHQHua1j5UkUTmKlkmBLz5f5tMIdzCT5cxcLhFtwghGVeNnwZ0qTmIXMMM/HfAlpllCIwv023grMxgOMrfAKk0/rZ1LdnZwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro discuss slash\"\n        title=\"slack app demo retro discuss slash\"\n        src=\"/static/bc8e94fb4ee41d2ea935921e2ba03395/5a190/slack-app-demo-retro-discuss-slash.png\"\n        srcset=\"/static/bc8e94fb4ee41d2ea935921e2ba03395/772e8/slack-app-demo-retro-discuss-slash.png 200w,\n/static/bc8e94fb4ee41d2ea935921e2ba03395/e17e5/slack-app-demo-retro-discuss-slash.png 400w,\n/static/bc8e94fb4ee41d2ea935921e2ba03395/5a190/slack-app-demo-retro-discuss-slash.png 800w,\n/static/bc8e94fb4ee41d2ea935921e2ba03395/e548f/slack-app-demo-retro-discuss-slash.png 975w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Any category of feedback can be selected, usually we start with the \"keep\" category:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgElEQVR42o2OTQrCMBBGc5BCjZOfSdLEtlIV3HkDj+D9D/GVCYTSRaWLx7cYePMUuQhtuEI2gFzA1W7I/UL+HIahwjDCx1JxIcP4tMPysHtwiAT1Fuo2PzDen5iXF0TeqmRb+V9ERgzNCd3nDRXzhFSmKpPCtk16CvLQuaD/fbECvo50TzmmvZQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo retro discuss slash keep\"\n        title=\"slack app demo retro discuss slash keep\"\n        src=\"/static/b4430a2587bdaacb9281fb4bb19e5275/5a190/slack-app-demo-retro-discuss-slash-keep.png\"\n        srcset=\"/static/b4430a2587bdaacb9281fb4bb19e5275/772e8/slack-app-demo-retro-discuss-slash-keep.png 200w,\n/static/b4430a2587bdaacb9281fb4bb19e5275/e17e5/slack-app-demo-retro-discuss-slash-keep.png 400w,\n/static/b4430a2587bdaacb9281fb4bb19e5275/5a190/slack-app-demo-retro-discuss-slash-keep.png 800w,\n/static/b4430a2587bdaacb9281fb4bb19e5275/a0b80/slack-app-demo-retro-discuss-slash-keep.png 955w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">The app responds with all the comments that have been collected in that category. Note that if the user selected the \"Anonymous\" checkbox when filling out the feedback form, then the label <code>anonymous</code> will be displayed under the feedback. Otherwise, their Slack username will be displayed:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVR42m1SWXbCMAzkFG0hZDOxszo4cVaSttz/UtMngXkB+jHRWIqskeSdqQyuyxXdtMAOM+qmQ1m3OKkCKtfwowT7Y4SDH/8Lirk42Z3nC8i04suaboQdLszb/oYglvjywkfilm8LOb4j4gUCQuYQMkN0ShEKxWeyx/DEKgl0OfmcJd/bhVSR2uunBW0/obUjGjvC2AHndmDFxClm+xlpUfP/Mqu4+Lbdh0JfZBCy4KpaN1BZydy16Nok+7H3NwjeZ0ifQCheAFUlBTKvoBiaz2lBsRJprtmXV4ZtVtZIVMFjeWo5SUvM6y/6aYUdLxjmlfkwf7P/FlvuWDlO7U/LD7TpXlr2QsSy4KdCFY3poM8WhTZ3dTXKuuElURKpoSU6uGf1NMNjrBCdbhsuyjPiJOVEN7/PQ/g0p1dsFf4BUV0CN5GxZP4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo keep comments\"\n        title=\"slack app demo keep comments\"\n        src=\"/static/551e3c50c949d590fc293d74c86ba7ef/5a190/slack-app-demo-keep-comments.png\"\n        srcset=\"/static/551e3c50c949d590fc293d74c86ba7ef/772e8/slack-app-demo-keep-comments.png 200w,\n/static/551e3c50c949d590fc293d74c86ba7ef/e17e5/slack-app-demo-keep-comments.png 400w,\n/static/551e3c50c949d590fc293d74c86ba7ef/5a190/slack-app-demo-keep-comments.png 800w,\n/static/551e3c50c949d590fc293d74c86ba7ef/72aae/slack-app-demo-keep-comments.png 964w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Finally, when the retrospective meeting is over, it can be closed with another slash command:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVR42n2Sy24TMRSG8wjAhjZNZsb22J5bJnNL24QWFLW0gKjULauWiovoBugKJCQeB6FKFMSCx/uQHTI7uvj0n2ONf//H40EQxQhlEXGC1AmhNIyjuCcQ2hMp61n3jlGo2BxFnuFYeAbaZMy2F+w+eMRif0nV7qCTgiSfkhYV2aQmLaZebVYiddrjQqwP7g2VTinKhknVMalar2Xd+c3KZN48trnH9c5kzco4wXlsBdInHSidUbe7zOb7zHb3vLY7e+TTjqSoSVzKssFkU2zuEjd+3eZThE7Z2Ao9fUITG9qqYTabsZjPmeQ5sVQkxpBYu8LVHovVBvuvF0L1Rr1h2B5RPL2gPn3H5OQt6ugCcXiOPDz3qh6/9LVThzg4Qx6coY5fMe6OGY4ChmPpzfzIw5NP5FfXbH/9Q/n5N+rqJ8H7H0QfbpAfb7h/ec3dN9977jlef+PO5S82Tr8ghUTEqR8/kIZBWD1EzZ8zqpaMmwOi9pCwXWnUufo/dEdE5QK5/kFBjBCGgTGWpq7Js5w0SbHunowlVhol1a1IpRHSIoqSzRfP2GwqBqG06HSCyUripEC552ELP0akEsJbcN9rm6OLKfLJklFR8Be77zTAHc36DQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app demo slash close\"\n        title=\"slack app demo slash close\"\n        src=\"/static/2b8bcf588a819cd9a252fabf883c92b7/5a190/slack-app-demo-slash-close.png\"\n        srcset=\"/static/2b8bcf588a819cd9a252fabf883c92b7/772e8/slack-app-demo-slash-close.png 200w,\n/static/2b8bcf588a819cd9a252fabf883c92b7/e17e5/slack-app-demo-slash-close.png 400w,\n/static/2b8bcf588a819cd9a252fabf883c92b7/5a190/slack-app-demo-slash-close.png 800w,\n/static/2b8bcf588a819cd9a252fabf883c92b7/d4c13/slack-app-demo-slash-close.png 825w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Which the app responds to with a confirmation message that the retrospective has been closed:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAs0lEQVR42o3QWw7CIBQEULbhswXK414oTfnQqPHH/e9pTEvbaIzWj5MJryEgHucbrtc78umCmDJ86KCNQ1Ur1FIvDpXCZl+vEjcXkGMHShkUO3Dbg4jA3oC9BbmSWhtsDxK7o/pJSBegLENbRuPCJEK7OKblDnVDkA1BW4IyJV8Nc2WeITwnDBynZaHw0wFexrJZJ0LKKHoYH2GpXXLe9H7Rd8PrxsLh73xIY5Hjz8J/zIVPD/SstlXXpJMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack-app-demo-close-response\"\n        title=\"slack-app-demo-close-response\"\n        src=\"/static/97fca194181c9b0264d37e20db45cad2/5a190/slack-app-demo-close-response.png\"\n        srcset=\"/static/97fca194181c9b0264d37e20db45cad2/772e8/slack-app-demo-close-response.png 200w,\n/static/97fca194181c9b0264d37e20db45cad2/e17e5/slack-app-demo-close-response.png 400w,\n/static/97fca194181c9b0264d37e20db45cad2/5a190/slack-app-demo-close-response.png 800w,\n/static/97fca194181c9b0264d37e20db45cad2/c946b/slack-app-demo-close-response.png 805w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"create-rails-app\" style=\"position:relative;\"><a href=\"#create-rails-app\" aria-label=\"create rails app permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create Rails App</h2>\n<p class=\"markdown-para\">Ok, now let's build Retro Pulse! Start by generating a new Rails project. I'm using PostgreSQL because later we'll be using <a href=\"../rails-enum-mysql-postgres\" class=\"markdown-link\">enum types</a> on some of the models. I'm also using TailwindCSS for some very light styling of the application landing page, but you can stick with vanilla CSS if you prefer, or skip the styling altogether as it's not critical to the Slack flow.</p>\n<p class=\"markdown-para\">Any Ruby 3.x and Rails 7.x should be fine:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">ruby --version</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># ruby 3.2.2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">rails --version</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Rails 7.0.8</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">rails new retro-pulse --database=postgresql --css tailwind</span></span></span></code></pre>\n<p class=\"markdown-para\">In order to make the Slack integration as easy as possible, we'll be working with the following gems:</p>\n<ol class=\"markdown-list-ordered\">\n<li class=\"markdown-list-item\"><a href=\"https://github.com/slack-ruby/slack-ruby-client\" class=\"markdown-link\">slack-ruby-client</a>: Send messages to Slack via the Web API.</li>\n<li class=\"markdown-list-item\"><a href=\"https://github.com/slack-ruby/slack-ruby-bot-server\" class=\"markdown-link\">slack-ruby-bot-server</a>: Exposes RESTful routes for managing Slack teams with OAuth integration. Uses <code>slack-ruby-client</code> under the hood.</li>\n<li class=\"markdown-list-item\"><a href=\"https://github.com/slack-ruby/slack-ruby-bot-server-events\" class=\"markdown-link\">slack-ruby-bot-server-events</a>: Extends functionality of <code>slack-ruby-bot-server</code> with a mini-framework for handling Slack slash commands, actions, and events.</li>\n</ol>\n<p class=\"markdown-para\">The dependency between these Slack gems looks like this:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">└── slack-ruby-bot-server-events</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    └── slack-ruby-bot-server</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        └── slack-ruby-client</span></span></code></pre>\n<p class=\"markdown-para\">We only need to include <code>slack-ruby-bot-server-events</code> in our Gemfile, which will bring in the others. But this gem has a few other dependencies so add the following to the main section of the project <code>Gemfile</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Slack Integration</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">gem </span><span class=\"mtk6\">&quot;slack-ruby-bot-server-events&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">gem </span><span class=\"mtk6\">&quot;otr-activerecord&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">gem </span><span class=\"mtk6\">&quot;pagy_cursor&quot;</span></span></span></code></pre>\n<aside class=\"markdown-aside\">\nChoosing between leveraging existing gems vs building Slack integration from scratch using an HTTP client involves a tradeoff. The gems mentioned above abstract away complexities and providing a structured framework. While this approach offers efficiency and allows a focus on application-specific features, it's important to note that there is a learning curve associated with understanding how these gems work to avoid the perception of \"magic.\" Conversely, a DIY approach grants high customization but demands more development time. This series adopts the gem-based route, striking a balance between ease of implementation and functionality.\n</aside>\n<p class=\"markdown-para\">Since integrating with Slack requires managing Slack-specific secrets, also add the <a href=\"https://github.com/bkeepers/dotenv\" class=\"markdown-link\">dotenv-rails</a> gem to the development and test groups. This supports secrets management with environment variables rather than hard-coding them into the application.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">group </span><span class=\"mtk4\">:development</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:test</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  gem </span><span class=\"mtk6\">&#39;dotenv-rails&#39;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Then run <code>bundle install</code>.</p>\n<h2 class=\"markdown-subtitle\" id=\"configure-rails-for-slack\" style=\"position:relative;\"><a href=\"#configure-rails-for-slack\" aria-label=\"configure rails for slack permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configure Rails for Slack</h2>\n<p class=\"markdown-para\">This next section explains the configuration changes needed to the Rails app to support integration with the Slack gems.</p>\n<p class=\"markdown-para\">Add a <code>.env</code> file to the root of the project with <code>touch .env</code>, we'll be filling in the values shortly:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">SLACK_CLIENT_ID=TBD</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">SLACK_CLIENT_SECRET=TBD</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">SLACK_SIGNING_SECRET=TBD</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">SLACK_VERIFICATION_TOKEN=TBD</span></span></code></pre>\n<p class=\"markdown-para\">Update the <code>.gitignore</code> file in the project root to ignore <code>.env</code>.</p>\n<p class=\"markdown-para\">Update the <code>config.ru</code> file in the project root to also start the server provided by the <code>slack-ruby-bot-server</code> gem. This will expose RESTful endpoints to handle Slack teams. The <code>config.ru</code> file got generated earlier when you ran <code>rails new...</code>. Here is the original version:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># This file is used by Rack-based servers to start the application.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">require_relative</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;config/environment&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">run </span><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span><span class=\"mtk1\">.</span><span class=\"mtk5\">load_server</span></span></span></code></pre>\n<p class=\"markdown-para\">Add the new line shown below. This will cause the <code>slack-ruby-bot-server</code> to check for a working database connection and perform a migration to generate the <code>teams</code> table (will be used to persist the OAuth token). You didn't have to write this migration, it's part of the <code>slack-ruby-bot-server</code> gem:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># This file is used by Rack-based servers to start the application.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">require_relative</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;config/environment&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># === ADD THIS LINE HERE ===</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">App</span><span class=\"mtk1\">.</span><span class=\"mtk5\">instance</span><span class=\"mtk1\">.</span><span class=\"mtk5\">prepare!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">run </span><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span><span class=\"mtk1\">.</span><span class=\"mtk5\">load_server</span></span></span></code></pre>\n<aside class=\"markdown-aside\">\nThe config.ru file serves as the Rack configuration file, defining how the application should be run with the Rack protocol. See this post <a class=\"markdown-link\" href=\"https://www.writesoftwarewell.com/definitive-guide-to-rack/\">The Definitive Guide to Rack for Rails Developers</a> to learn more about Rack.\n</aside>\n<p class=\"markdown-para\">Configure <code>slack-ruby-bot-server</code> by defining the OAuth <a href=\"https://api.slack.com/scopes\" class=\"markdown-link\">scopes</a> the Slack app will require. Scopes give the app permission to perform actions, such as posting messages in a workspace. Here are the specific scopes Retro Pulse requires:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># config/initializers/slack_ruby_bot_server.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">oauth_version</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">:v2</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">oauth_scope</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [</span><span class=\"mtk6\">&quot;commands&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;chat:write&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;users:read&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;chat:write.public&quot;</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">A brief explanation of why each of these scopes is required:</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">commands:</strong> Necessary for enabling slash commands in Slack. It allows the app to receive and respond to slash commands invoked by users in channels or direct messages.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">chat:write:</strong> Grants the app the ability to send messages to channels where the app is installed and to DM (direct message) users. The app will use this to DM a user who has submitted feedback to confirm their feedback was received.</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">users:read:</strong> Provides access to user profile information. The app will use this to persist the Slack user information of the user that submitted the retrospective feedback (unless they choose to remain anonymous).</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">chat:write.public</strong> Grants the app the ability to send messages to channels it isn't a member of. The app will use this to post messages confirming a retrospective has been opened and to display all the feedback.</p>\n<p class=\"markdown-para\">Configure <code>slack-ruby-bot-server-events</code> with the Slack signing secret (it's still a <code>TBD</code> in <code>.env</code>, but will be populated shortly):</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># config/initializers/slack_ruby_bot_server_events.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Events</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |config|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">signing_secret</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">ENV</span><span class=\"mtk1\">.</span><span class=\"mtk5\">fetch</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;SLACK_SIGNING_SECRET&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">signature_expires_in</span><span class=\"mtk1\"> </span><span class=\"mtk7\">||=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">300</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Add the endpoints provided by the <code>slack-ruby-bot-server</code> gem at <code>/api</code> in <code>config/routes.rb</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span><span class=\"mtk1\">.</span><span class=\"mtk5\">routes</span><span class=\"mtk1\">.</span><span class=\"mtk5\">draw</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  mount Api =&gt; </span><span class=\"mtk6\">&quot;/&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">The <code>slack-ruby-bot-server</code> gem exposes routes using <a href=\"https://github.com/ruby-grape/grape\" class=\"markdown-link\">Grape</a>. Since the details are not specified in <code>config/routes.rb</code>, if you run <code>bin/rails routes</code> in a terminal right now, you'll only see:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Prefix Verb   URI Pattern   Controller#Action</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">api           /             Api</span></span></code></pre>\n<p class=\"markdown-para\">However, you can run a Rails console <code>bin/rails c</code>, and run the code below to list the API routes exposed by the <code>slack-ruby-bot-server</code> gem:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Api</span><span class=\"mtk1\">.</span><span class=\"mtk5\">routes</span><span class=\"mtk1\">.</span><span class=\"mtk5\">each</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |route|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  method </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> route.</span><span class=\"mtk5\">request_method</span><span class=\"mtk1\">.</span><span class=\"mtk5\">ljust</span><span class=\"mtk1\">(</span><span class=\"mtk4\">10</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  path </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> route.</span><span class=\"mtk5\">path</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9\">puts</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">#{</span><span class=\"mtk1\">method</span><span class=\"mtk7\">}</span><span class=\"mtk6\"> </span><span class=\"mtk7\">#{</span><span class=\"mtk1\">path</span><span class=\"mtk7\">}</span><span class=\"mtk6\">&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># GET        /api(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># GET        /api/status(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># GET        /api/teams/:id(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># GET        /api/teams(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># POST       /api/teams(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># GET        /api/swagger_doc(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># GET        /api/swagger_doc/:name(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># POST       /api/slack/command(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># POST       /api/slack/action(.:format)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># POST       /api/slack/event(.:format)</span></span></span></code></pre>\n<p class=\"markdown-para\">The particular one we're interested in is <code>POST /api/teams</code>, this will be a critical part of the OAuth flow explained later in this post.</p>\n<aside class=\"markdown-aside\">\nAt the time of this writing, there's an open <a href=\"https://github.com/slack-ruby/slack-ruby-bot-server/issues/171\" class=\"markdown-link\">issue</a> in the slack-ruby-bot-server gem about all the teams endpoints being open. For this simple educational app that doesn't have public distribution, it's not a blocker. But if it is an issue for your app, read the discussion for options.\n</aside>\n<p class=\"markdown-para\">At this point, you should be able to start a Rails server with <code>bin/dev</code>. Also if you launch a Rails console with <code>bin/rails c</code>, you should be able to see the <code>Team</code> model, which is defined in the <code>slack-ruby-bot-server</code> gem. There are no teams populated at the moment, because we haven't yet written the code to add this app to a Slack workspace. Again, we didn't have to write any model code for <code>Team</code> as its already provided by <code>slack-ruby-bot-server</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Team</span><span class=\"mtk1\">.</span><span class=\"mtk5\">all</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># empty collection</span></span></span></code></pre>\n<p class=\"markdown-para\">You can also view the <code>teams</code> table schema by connecting directly to a database console with <code>bin/rails db</code>, and then use the <code>\\d</code> meta-command:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"sql\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- This is for Postgres</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">\\d teams</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--                                                   Table &quot;public.teams&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--            Column            |              Type              | Nullable |              Default</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- -----------------------------+--------------------------------+----------+-----------------------------------</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  id                          | bigint                         | not null | nextval(&#39;teams_id_seq&#39;::regclass)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  team_id                     | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  name                        | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  domain                      | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  token                       | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  oauth_scope                 | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  oauth_version               | character varying              | not null | &#39;v1&#39;::character varying</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  bot_user_id                 | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  activated_user_id           | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  activated_user_access_token | character varying              |          |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  active                      | boolean                        |          | true</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  created_at                  | timestamp(6) without time zone | not null |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--  updated_at                  | timestamp(6) without time zone | not null |</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- Indexes:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">--     &quot;teams_pkey&quot; PRIMARY KEY, btree (id)</span></span></span></code></pre>\n<p class=\"markdown-para\">The <code>teams</code> table got generated by the <code>slack-ruby-bot-server</code> gem when we added <code>SlackRubyBotServer::App.instance.prepare!</code> to <code>config.ru</code> and started the Rails server for the first time. Once we have OAuth working to add this app to a Slack workspace, you'll see how this table gets populated.</p>\n<h2 class=\"markdown-subtitle\" id=\"ngrok\" style=\"position:relative;\"><a href=\"#ngrok\" aria-label=\"ngrok permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ngrok</h2>\n<p class=\"markdown-para\">The Rails application is running on <code>http://localhost:3000</code>. However, Slack needs a publicly accessible URL to send requests to when events like OAuth redirects or slash commands are triggered. When you configure a callback URL or specify an endpoint for Slack to communicate with, it needs to be an address that Slack's servers can reach over the internet. Since localhost is specific to each user's local machine and not accessible externally, Slack wouldn't be able to send requests to your local development server.</p>\n<p class=\"markdown-para\">This is where <a href=\"https://ngrok.com/\" class=\"markdown-link\">ngrok</a> comes in. Ngrok creates a secure tunnel to your local development environment and provides a public URL that forwards requests to your localhost. It acts as an intermediary, allowing external services like Slack to communicate with your local development server. By using ngrok, you can expose your local server to the internet and provide a public URL that can be used as a callback or endpoint for Slack to send requests to during development.</p>\n<p class=\"markdown-para\">Sign up for a <a href=\"https://dashboard.ngrok.com/signup\" class=\"markdown-link\">free account</a> and follow the instructions to install the <code>ngrok</code> command line utility. Then in a terminal, start ngrok forwarding to port 3000 (which is where the Rails server is running):</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">ngrok http 3000</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Output will look something like this, your details will vary:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Region                        United States (us)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Latency                       35ms</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Web Interface                 http://127.0.0.1:4040</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Forwarding                    https://12e4-203-0-113-42.ngrok-free.app -&gt; http://localhost:3000</span></span></span></code></pre>\n<p class=\"markdown-para\">Make a note of the forwarding address that ngrok generated, for example: <code>https://12e4-203-0-113-42.ngrok-free.app</code>. This is the address we'll be providing to Slack in the next section to tell it where to send OAuth codes to.</p>\n<h2 class=\"markdown-subtitle\" id=\"create-slack-app\" style=\"position:relative;\"><a href=\"#create-slack-app\" aria-label=\"create slack app permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Create Slack App</h2>\n<p class=\"markdown-para\">The next part is to create a new Slack application. Open <a href=\"https://api.slack.com/apps\" class=\"markdown-link\">https://api.slack.com/apps</a> (sign in to your Slack account if prompted), and click on \"Create New App\". At the time of this writing, this is a green button at the top right of the \"Your Apps\" page like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB4UlEQVR42o2Sy4rUQBSG88iCL+EL+ADiyqW4UFy5GRh3ozAz6fQtnZ4klcqlu1KpS5JpvyHVIOJCPPBxTl0o/r/OiQZtGPSAs47Rj6FWZxUwg8E7/xs3WMzZBAY1YDvDpsj5vk+43a84tjVRHCckqwRrLPM0k+cFD/cP/Lz7gShLuPwK+5fLBa89uuwDSvTYfc+H2xtef37Pq0/v+BrfEe12e3bbLbrXzONI0TsabZFNQylrhKwpipy8yCnKgrzMA6UoKGWJlBWl7GjOA8/TTJQka7JDhnOeyXmelEUqTbzLeNxl3K/3bLYbmrYJCCGom5pKVghRImuJkBLZtnjviTabLafuFGyNzvGkHNpamlrSdQ1tW9N2LWd1Rg+awQxofc0LSimMGVhieSNaxQlZemD0E5Nz5L2jVYo4idmle9JDGhSuN2uSJAn1drcN61WyIl7F4Y5xlnmeiQ6HLHTU/2HZGIttO5qq4inPybIMUQlUr+h1H/KiLORe0Z26oHa+/uGGSlRXy9Yh9MhjXfLm20fuq+PVyuWZ/4lpmpYup6T7NKgcvec0eGKR8/bmCw/lMYyNH8dgZ5on5nkK+W+W83EciZL1luMhCwO9DLbue4a+X2ThjAnNWOw5Z3HO/RNrLS9VN/IebVna7QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack create new app\"\n        title=\"slack create new app\"\n        src=\"/static/8d14c299851552380a04266b0f16ba70/5a190/slack-create-new-app.png\"\n        srcset=\"/static/8d14c299851552380a04266b0f16ba70/772e8/slack-create-new-app.png 200w,\n/static/8d14c299851552380a04266b0f16ba70/e17e5/slack-create-new-app.png 400w,\n/static/8d14c299851552380a04266b0f16ba70/5a190/slack-create-new-app.png 800w,\n/static/8d14c299851552380a04266b0f16ba70/e548f/slack-create-new-app.png 975w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Choose \"From scratch\":</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 530px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+UlEQVR42pVT7W7aQBDk/d+ieYLmR4iUpIg/laiSCglCGuxzcthg82XwB/ZhwEw0S+2QSq2atVZ36/PO7cyuG0maYBkusVqvsI7WiKI14jhCnMT/53EkecWuwOXlVzTmizna7TY6nQ663S5arRYWywU+YwSj3X27Q6NEiTRLke9y5EUOVpxuUvnIbA1yk8t+W2wl5lo5z6pz2vV1E43ZrynsewvewIWvJliEc/iBLzJMZ1N4Y08qns1n8P2J7Lkyrs432UYAmwQc/dTQSkMNFJ6+D5CMYnzWDuXhHVD3NH40O3jqDPBwew/rwcIyXCAMQ2kUKwmmQe3UXKqfBojiSIAoRU3Z7Axs28JEj+FqF+pVwfM8oaL1K4LAl4Qs2yDLM9HMGCM0qeMRR+z2u/cKueELNoeHZVnWnWPC/rCX+PjHU70j3Q+ATCIFzl+4CkV00iqP5T91k8uPpXh1qQAS7Hn4LN7v99Hr9/A4eBTQNE1Fp9OFpwFmvFqFwqCqlkXVGlIL5Si4rivauZ4r46BHGs6LgyA4iR/Hpz+Dc0omxW/9zjUUQGrAmznMBGcSVybS2RAmkVblNFJl7rmGV82rU1PYPWNybAsjVBgTjJVxZWeTs//2b3Zze4PGyB1BKQXHcYQ6nVQ/uHMev8j3trJrH1pDjCdjXFx8wRtLFSMDU6W0zgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app from scratch\"\n        title=\"slack app from scratch\"\n        src=\"/static/e5b5917da54fbad6a6adc8287bf83db0/b6a9b/slack-app-from-scratch.png\"\n        srcset=\"/static/e5b5917da54fbad6a6adc8287bf83db0/772e8/slack-app-from-scratch.png 200w,\n/static/e5b5917da54fbad6a6adc8287bf83db0/e17e5/slack-app-from-scratch.png 400w,\n/static/e5b5917da54fbad6a6adc8287bf83db0/b6a9b/slack-app-from-scratch.png 530w\"\n        sizes=\"(max-width: 530px) 100vw, 530px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">For the App Name, enter \"Retro Pulse\" (feel free to choose another name). Then select a workspace. If you're logged in to your employer's workspace that will show up in the list, but you can also <a href=\"https://slack.com/help/articles/206845317-Create-a-Slack-workspace\" class=\"markdown-link\">create your own workspace</a> for app development, then select it from the list:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 525px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 96.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACTElEQVR42n1U/XOiQAzl//+3qjP1er3xbDv94a4qHwICC8sCfiD4bl4oHqitTCabbDabvLzVWq1XcD0X3saDH/giXNPHdRAGcBwHG38jtkrVjcRJDGNyvL69wirKAi+vL3j+9Yynn094nD1isViIpj3/Pcd0OsXD5AHz+Rz3fufPj5daKk1hCoMojpBmKdpzK5vUlKZtRvY9YQx/a3sNK9MZwm0Iz/MQx9Eo6Fra9r7/1Jwkoe3YsHKT41gfwcTEg5UmKhEfA4dSn+q7wthLQiaqqkoSEs+yKmXNi7jO8/wiPHiv+lGFw0ScVFEUYjMhhfjKXmEulZyvPl4ySrjdhkIJOkijHlOC7LgdZejnBTzMioYVsu0bDDnhvl2u67r+kh7XHxO2bSN8tXSuUZYlqEV0p9k226RwLbCU5cXm5b3fGPO/Qh7mVH3fxzbaSrtRFCEMQ4RhIPZm48keX03nDy9xfCVMPkq42++EMn1Fea47bXKBgDGEIU1T8bEA6mHbN1PmoZ6LfQImvZnoQPePYEQbHuZQql0llVL2h73Yh+MB+OL1jq0BbZIkxm5XdW2aXNqiT6kESinR9Gu2rjNkWiMzJVReIDMFdFFCaYO6afCx/IDF95umSoYSBD5c14Ft21ivV1gul3BdV4bAPfI1jCIEicZWaUSZQZwZsffHGh9//3Qt9xzDlw12ex1mjXCO+ng84HDYSYeXlgn8d6QdTpHg89XYjiO4v7+/48dshulkAvfzT9jivwsDOQAGfSeM6cnMwfXYkhmslhj+A/5tsOJEHz5wAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app name workspace\"\n        title=\"slack app name workspace\"\n        src=\"/static/e9e96474bbf82baf7bb20fa9ae1a1c55/52211/slack-app-name-workspace.png\"\n        srcset=\"/static/e9e96474bbf82baf7bb20fa9ae1a1c55/772e8/slack-app-name-workspace.png 200w,\n/static/e9e96474bbf82baf7bb20fa9ae1a1c55/e17e5/slack-app-name-workspace.png 400w,\n/static/e9e96474bbf82baf7bb20fa9ae1a1c55/52211/slack-app-name-workspace.png 525w\"\n        sizes=\"(max-width: 525px) 100vw, 525px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">After clicking \"Create App\", you'll be navigated to the \"Basic Information\" settings of your newly created app. Copy the values Client ID, Client Secret, Signing Secret, and Verification Token from the App Credentials section, to the corresponding entries in the <code>.env</code> file you created earlier in the Rails app project root:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 698px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 97.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAADUklEQVR42o2UCXPiRhBG+f+/I0mtt+xNbMAnGLC9tnGRXR9g4ywYG5AACV2gW0Jva0b4SCpVyVCvugfETKv76y7EScwrYRSSpAlRFMn9arUiXaX/i1W2IkkSCnEc0/qzRbvTltzc3nB11eSh+4BYGRkf18f9P31xcEFEZNkWjmNLKzAtE8M0ME0j35sm+lx/Y27M5feGYUjfMOby7eSBcRwxeB4wGAzo93v0ej2envqoExVFVZjOpvKQyXTCbDZF0zWmwtdm8hnhv14igpMRup5LFEcydJGLf1vi9v9abwc2r5oyb93uA537Dp1Om7v2He12m5uba2zb5u7ujkqlQq1Wo1qtcnFxwf39vXz29vZGRivyWEjTlFarxeHhAfV6Tf6hVq9Jv16vU6kcydf+0X/koLLPcaPKcaNCtX7EUfWAo+ohu3sluo95EQtCHuL26+vvqGqeN0VRcqsqjJURjrEgNjPieUZiQaTlfuoAQU7qkctGRHh+fs72zjblcpn9/b0P7FMqF3nuDrEeApSmiXa7QL2ymH53MLourhqxHIa4arjWYRLTf+rTfewyGo1YLBc4C+dvBF5IaCeEizV2TLiI8eYBnhESOBGhGyOCK4jqNRp1Pn/eYGtrk41Pn9jYeGWDX3/7he63H0wuHF4aOqOvBs/HOsOzOY97EwanGkp7jv6XTZIIYSeJFLIU98KRAn0lCANpvcDDj3O80MWPXdw4ZJnGeGnC0vfxAy+Xjejby8tLzs5OpXx6/Z4UuBS5sE99loaHp8YyX4LFOmfOi4cz9PD0EN8OScWBIoJa7Zjd3bwgpVKRUqlEuVyStljaYdhRUJsWw3NdMqjNpO0dq/RPVJS2hvHirIWdvPayI/vZFti2TIPYiwv90CdIfILYx4886QsbpgFhEhCE/vtwEFUejUeS4WiIpmn5KEqTt3bLsoxslZFl5Kx499cDR446WeU05eTkhM3NTba3/5AUiztrinz5fYt++5lZ00X5ajE+tRjWTMZnwho8NzQetsdMvlnv40sUQPTtvezjjpyLokfFTBS+MlLQFYPpUGf6okmMiYU5ddDHBnPFxNbXORSv7Af+m0SkXIKAcL0XU0j8vvSXLL0FbuBKGyURK/lJ1+QT+yf2FIARRmvd7wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app credentials\"\n        title=\"slack app credentials\"\n        src=\"/static/132e3bf93afab73aa93eaf7f4d85b6be/487bb/slack-app-credentials.png\"\n        srcset=\"/static/132e3bf93afab73aa93eaf7f4d85b6be/772e8/slack-app-credentials.png 200w,\n/static/132e3bf93afab73aa93eaf7f4d85b6be/e17e5/slack-app-credentials.png 400w,\n/static/132e3bf93afab73aa93eaf7f4d85b6be/487bb/slack-app-credentials.png 698w\"\n        sizes=\"(max-width: 698px) 100vw, 698px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Still in the Basic Information section, scroll down to the section titled \"Display Information\", it will look something like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 722px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 85.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACkklEQVR42o1Uy07bUBDlPyrYF1RISwIJUSlKuqNS2QH/wLZ5SImyKn+CEIgfKCtChYTEhm6oxKPBTuLEdpxAAomvX6edSW0cCm2vdDy+D5+ZuXPGY8IUcF0XNDzPCwBvOLcsC5YQQ/sYYnROXGO2bUPTNVxL12g0G6jWqmzlqoy6Uoft2ENneH64ngsPQ+cB4dn3M1xeXkKSJSY/v7hA5bqCXq8LYZkQYgBTmDBNEwNzwOgP+rBsi8lGCNudNpSGwtFJkoRavYZGQ0FDN1BRNFTqKs4lBbKi4ub2Bp2bDn/TMlq4u7/7nUGI8LZ7C72l86awBHsl76quQ293oLUM9IUF94l0ichxnQdCx3GgaiquflwxId0ZpdbtdVGrVVGtyZBlCYbR4jVK1XdKZwlcFHtYmDF60CIdIi90wf8aFBER9+56QRC0xoQkjaOjI2xtbWFvbw+7u7v4sr+PcrmMg/IBW8Lh10OUD8s4OTnB6bdTHB8fswoIFF1ASB6z2RwmxicQibxGZCaCyZeTmJqcwsz0DGbfRBGLxhCfj2MuNo/l5Q/Y2dlhZ0TiV1rY4oGwUCgywUIiieRCEutr61hdXcPKxxUsvl3E0rslpFPvkUqlmVBRlCB1uqIRHdJGJpPB+ItxTL+aZkRno4jOxjgyep+LzSERTyA+n0A6lWadhgm5u8KE29vb2NjYQC6XQzabReZThm0+n0ehUECxWESpVGJsft5kiYU7ZETY9KBq0SGSjy/Uvw1fDY8xImxVVdFUm9A0lTuAYLSNANQdfpeQJU0S6NugMEIMIyQh0+J9/55BUVLU4TmdoSjo3sLF8LuEtewTsjA9548UnPC76wSd8RS4eyhl+ocRc2DFM/P/wa//4U/eBMAsJbxxgAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app display info\"\n        title=\"slack app display info\"\n        src=\"/static/615f89e20fa1cd93d1fa5781f49369a3/d44c9/slack-app-display-info.png\"\n        srcset=\"/static/615f89e20fa1cd93d1fa5781f49369a3/772e8/slack-app-display-info.png 200w,\n/static/615f89e20fa1cd93d1fa5781f49369a3/e17e5/slack-app-display-info.png 400w,\n/static/615f89e20fa1cd93d1fa5781f49369a3/d44c9/slack-app-display-info.png 722w\"\n        sizes=\"(max-width: 722px) 100vw, 722px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>.</p>\n<p class=\"markdown-para\">Fill in the details, here's what I used:</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">App name:</strong> Retro Pulse</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Short description:</strong> Collect ongoing feedback for your team's retrospective meeting</p>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">Long description:</strong> This is a simple app to collect ongoing feedback via Slack for team retrospectives. While the retro meeting is typically held at the end of a sprint, shape up cycle, or project, it's useful for team members to be able to quickly submit feedback whenever it occurs during project development, otherwise good ideas or feedback can be forgotten about by the time the retro meeting is booked.</p>\n<p class=\"markdown-para\">Optionally, you can upload a logo and adjust the background color for how the app will appear in Slack. As I'm not a designer, I asked Microsoft's <a href=\"https://copilot.microsoft.com/\" class=\"markdown-link\">Copilot</a> to draw a logo for me. Putting this all together, here's what my Display Information looks like:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 735px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADHklEQVR42o2UWW8bVRiG80+4RUjcQ5EIN1WQoLnIBQKqskhVCBWI5YZLfgJ149K6EFDV0AZlKRIXhV9Q4MJdQmN7vMWOx/Z4mRmPx57FM/Og73hJKyHEGb36zjlzzjvvt82S7/vEUUwSJ8o+gzgmDEKCIPh/8AOWoiii2+tiGAamZdLr9zDNPn2zr+ZxEiMj4d9HQqLOiBXSJVFx0jghm82Sy+coFoscHT0hl8spOxq5TCYBYegThAF+4J/C9wgnoSKTR7xRCi3bwugY6E2dZqtJ22jT6Rj0LJt6q0O9aVCu6zTaBpZtKk/EA/HMHbkLlYpwMpkwdIdYlsloPFLwfA/XHdI1LSx3jOm4jMKIiP8eC5dbRptcIU9XYkbCJI7Ul4sljXKlhFYs0O12lCfWwMYZOgycAY7jMJC146hwhOFMYeh7jAc2I8sk8j1QiUgIPY9AFLsurjNQGLtDbMvEmiVOQiUhWBCSJGQrZX49fMxvhTy/P37EH5UKD5s6D/QGj5pN/m63ODLaPGm3KPd7aHqDh/kctdqxivkkmhDF0TSG4vul3T2ee/s9Vi5e5IXPv+LldJpXUldYTqd5dXOTM5dTCi99c5l3bt7ku7/+5OBBln67he0MFOGpQmDj1h3Ov7FK5t01li+sc/7ODh/c2uajnR0+3P6Jte+3eDOTYeXba6xt/YDhOIvafLoOFwo3tm/z/Nk1Xl+9wIvvf8yZzU1eS6U4m06zcvUq565fZzWTYTl1hXM3btAc2IpQ3JyTPUN47f593tr6kfXt26zv/MzG7i6X9vb4ZH+fT/f3+ezggC/v/sIXB3f5+t49+qORInyabEo4a71+v6eKWiD1qA7HEYlcmGG+FjtPgtj5fFHYUofSs6VyiePaMdXjqmpFXdeVrdVqp3tNnYbeUO+UgNmZsTeeJmauUAq2oBUUYbFUVHOx+XweTdPUx6THxWpFTc0PDw8pFApq3el2TrMscoUwX8hTqVYUkVxUlzWNarWyIBLUT+rYA1v1sRS0zIVsQSgy5Z/oed4U/hSyN8V0f35GrFxUHRaGCvOz8j/8Bxd40MMcbTR3AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app display info filled\"\n        title=\"slack app display info filled\"\n        src=\"/static/71c6869963b039668b00899c373c1f64/7608e/slack-app-display-info-filled.png\"\n        srcset=\"/static/71c6869963b039668b00899c373c1f64/772e8/slack-app-display-info-filled.png 200w,\n/static/71c6869963b039668b00899c373c1f64/e17e5/slack-app-display-info-filled.png 400w,\n/static/71c6869963b039668b00899c373c1f64/7608e/slack-app-display-info-filled.png 735w\"\n        sizes=\"(max-width: 735px) 100vw, 735px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Next, click on the OAuth &#x26; Permissions section from the left hand section under Features:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 265px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 273.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA3CAYAAAAMsWqVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAG40lEQVR42pVXS28jWRn1D2HBng0LBAKxQGLJDvH4A6xGzAoJCdAghDSjQeIxC4RoBpimR6ST7kx3u5MMceJOxnbSScfxu2zHj8ROYjt252G7HFeVq1w+6HzV5Y7jJPZE+nJv3bo5db7HPfeLx9AN9IweOOpdDbqmy/zLmPy9YaCn9+BxwcyeiQEAezCAZZro9d6um3x2P6rrQxsD1Q14+Ktv9VGp1vDpR39BYMWPdkdFV+vC6ltQOypa7RaMngF7YA9tgIG8t2xL2LmgHrrIn3gsiZ9+7/v46IM/4uX2Nny+ZQSCAUSiEfj9fvh8PpQPy7K3b/dlLJUOUK1VYdu2hEoAXeR2u43Q1i7yxZIwIENN04SFafZkTpbCyrJgWqYAEdx1XwBd3y3TwtjPAE6MDGdzz7ieEP22GFqonzQQCm1iZ2cX6+sBpFIKisUD6HoP3a7umKZD04wR45p+HZDstHYLIb9PbG15CfP/fYDt4PobqrZD16mDazaAbZlvXZbSMHrYzp1gOVnDqlLHWqYBv1KHL1GFd6eE52HHFsIl+GKHWH5jnC9FyjhqtNA3HVAPwejOd3+3gG/++gm+/st5fOWdGXzrN0/xjV89wdd+MY/vvOfFt9/z4qvvzsHzw3/A8+OP4fnRx/D85J/w/OBv+OuyIkyJ43GD/efFJN5/GsefFhX8/kkCHzxL4ENvEh8+T+IP3jje/yyC386F8c6/NvHzfzv27icv8bN7QWxkqoBtQdeuxNDoqCjsZZFOJpCKRbGfz8lzVknh4vQUGNhA37ohhjYG12PISadziXq9gePjCg7LR6hWa6jVTlCt1NC8aMEwWIvjWaaNZZnntd1q42D/AEeHRzg+OkbpoIT94r6snZ+dw6QXkwTCBeTDZecSxUJRQAhWrVQFTEkpOH196oRFdwv8dhsyVNsq6id1nIibVTECUTgIdl3WXEZ3Au5l95BMJJHbyyGbyWI3vCt/ZPdtAXbBbwMbSQpdft14jYvzC7SaLfkAn8m4Vq0N2ZO1qyy3MuRXCURGkd0IQsEQEvEEopEodsNhxGNxhHfC8o4e8OO3Arov6M5VlRnYA2dqD8Rl17hvostkSPdSyZS4VTmuiItMTPey60j/tEnhRrkCjit47vXi/if3MTc7h8ePHmNudnaY6WlKZrLAAlIB04KNlA0zS5cL+YIYS4jlw2xfdW8S+LBsGCueEoLQTZ4Wmlxig+mZjpxlAjbqDUkGa49x5dp+sShlxX1uciaelI7aGbpaLpVlzrPMkaHgB1lCX+qknJ2eCROWEOeMK9WHjN0y4nhX+YwkhcqSVtJyGnhKMumMjDS+44nhmtbVhupznelIUugWmXKN2SVbxozh4JxrfM9n7p3IkOeVRjaxaAw7r3Ykfsw8mW293JLzTKa0m0RihCEZ8OvuyDWOZMW14f1zBeBGl7mJMr+5sYmN0IZkVpRmZxfR3Yio0EZwQ0rKunYVjDF0F8RMpxnSDV2aIbZqnFt2X5oiaZz6ltM7am/BRl3WDPRtG+en51j1riKwHMDa4hrWP19H/GUcQV8Q/gU/ohtRtOttNCtNdFWnd7yxsNmdXp53kJxNIDYTRWIuDmU+idjDKKIzESjzKVlLPU5i71kW+YUcUjMJnJfObgT1sBMtB0tILyvI1XJI5VJIF9Mon5RRrBSR2Etgv7IPpaAge5BFrpJDMVZA+pHCKx56Vx8F5FeaxxeIfxpF5n9pKIspJJ8nkPk8jfxKXp7TSwoS3jhSC0kkFxMI39/BSbIGa2ANYzkisGRZKR5j/dEaNr0b2FrYQuCzL7D6cEWeOffPriL0NIjEahxqrQ2zb94iDm/+HWBb27pso6k20TW6Mp41z6B2VZm3Oi2xjtZxYqcZt9chT0rzoolcNofD0qFIFs90MV/EQdFRnIySQTazh3ZLhWmYY7U4BsjTcFg+FB2kwPKyYiG7fc5BoYCjg31cquqdYjuihwSkPFEPKVscudZRVTQ6JlJVFaeqDmuSHroMKQQ89FRqukyxpUg06nWUTjsI7Z2g0erC6k0JSIniIuNJYXDVhKNtmtJw3gU2Ig6MW+CLwFBMKWPbW9siYYV8XjZrE+6T8Xt5ANj9gdOGyNxpPdxxmh5xpGzcRDDTzCwzzPuFdwkzThG+SWHGAPl1lglbkAf/eYBnT59hcWFRurAV3woezjzEvb/fw9qLNWF/9Sq9FZDlsrS4NGzlGDsar1K+JzsmalL3MASkay/8L8So2mTjX/ULuHsXT9OSjPxHf9PP1YRMBXi1PyQzFjJLhz22exfzTnm1/Ur2TMr08Nbj5c1ugcaaZMxY6JwTiONdrfCYyxz5ddcYAo7Tdv8u4P8B4fIQCAUKuk4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app oauth setting\"\n        title=\"slack app oauth setting\"\n        src=\"/static/a39db299c4f24ed10c6a893a458c763f/78e79/slack-app-oauth-setting.png\"\n        srcset=\"/static/a39db299c4f24ed10c6a893a458c763f/772e8/slack-app-oauth-setting.png 200w,\n/static/a39db299c4f24ed10c6a893a458c763f/78e79/slack-app-oauth-setting.png 265w\"\n        sizes=\"(max-width: 265px) 100vw, 265px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Enter the following Redirect URL. The host name should be the forwarding address you saw when starting <a href=\"../rails-slack-app-part1-oauth#ngrok\" class=\"markdown-link\">ngrok in the previous step</a>. Your Client ID is from the Basic Information section.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">https://12e4-203-0-113-42.ngrok-free.app?scope=incoming-webhook&amp;client_id=your_client_id</span></span></code></pre>\n<p class=\"markdown-para\">Recall that ngrok is forwarding to <code>http://localhost:3000</code>, so the above url will land on the root route of the Rails app. The next section will cover changes to the Rails app to handle it..</p>\n<aside class=\"markdown-aside\">\nThroughout this series, we'll be using the Slack web UI to manually build up the application on the Slack side. This is so you can learn one step at a time how each feature is defined. The last part will explain how the <a class=\"markdown-link\" href=\"https://danielabaron.me/blog/rails-slack-app-part5-slash-block-kit-response/#app-manifest\">App Manifest</a> feature can be used to automate some of this.\n</aside>\n<h2 class=\"markdown-subtitle\" id=\"rails-send-oauth-request\" style=\"position:relative;\"><a href=\"#rails-send-oauth-request\" aria-label=\"rails send oauth request permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rails Send OAuth Request</h2>\n<p class=\"markdown-para\">We need to create an \"Add to Slack\" link that will be displayed on the home page of the Rails app. When the user clicks on it, they will be taken to Slack where they will be asked if they agree to authenticate Retro Pulse (which will add the app to their chosen Slack Workspace).</p>\n<aside class=\"markdown-aside\">\nA full discussion of the OAuth protocol is outside the scope of this post. See the <a class=\"markdown-link\" href=\"https://api.slack.com/authentication/oauth-v2\">Installing with OAuth</a> document from Slack for a detailed explanation and illustration.\n</aside>\n<p class=\"markdown-para\">Add a <code>WelcomeController</code> with an <code>index</code> method. The method is left empty as it uses Rails conventions to display the associated welcome index view:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># app/controllers/welcome_controller.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">WelcomeController</span><span class=\"mtk5 mtki mtku\"> &lt; ApplicationController</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">index</span><span class=\"mtk1\">; </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Add the associated welcome index view. This view uses <code>SlackRubyBotServer</code> to generate a link to the Slack OAuth authorization url, with the scopes and client ID that were configured earlier. The image source is from <code>platform.slack-edge.com</code>.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"erb\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;%# app/views/welcome/index.html.erb %&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk5\">href</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_authorize_url</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">?scope=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_scope_s</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&amp;client_id=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> ENV[</span><span class=\"mtk6\">&#39;SLACK_CLIENT_ID&#39;</span><span class=\"mtk1\">] </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">img</span><span class=\"mtk1\"> </span><span class=\"mtk5\">alt</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;Add to Slack&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">height</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;40&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">width</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;139&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">src</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;https://platform.slack-edge.com/img/add_to_slack.png&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">a</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Configure the Welcome index view as the default route:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># config/routes.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span><span class=\"mtk1\">.</span><span class=\"mtk5\">routes</span><span class=\"mtk1\">.</span><span class=\"mtk5\">draw</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># This was added earlier for to expose</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># REST routes from `slack-ruby-bot-server` gem</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  mount Api =&gt; </span><span class=\"mtk6\">&quot;/&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># === NEW: Add default route</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  root </span><span class=\"mtk6\">&quot;welcome#index&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">To confirm the routes available in the app currently, run <code>bin/rails routes</code>. The output should look like this:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Prefix Verb   URI Pattern   Controller#Action</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">api           /             Api</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">root   GET    /             welcome#index</span></span></code></pre>\n<p class=\"markdown-para\">Run the Rails server with <code>bin/dev</code> and navigate to <a href=\"http://localhost:3000\" class=\"markdown-link\">http://localhost:3000</a>. You should see a clickable \"Add to Slack\" button like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 284px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwklEQVR42tWTzQrCMAyAff8n8R28efCgR2f9gc1t4G4qiqJrk37imCLq5gQFbQgJtPnIX1uez0rrq0D1+pZeYh6At5d6tVqbSS3w/gFn3yui8lSrYE8ztGLZeiV3QtWxzuJE6ktW7wFltbG0Bz2i5ZSJmWHGhiRJGAYB/f4AYwy5zXHiXvSw7Nt+tWfd7bDbzgnnKXEcs8gykjQlGI0Iw4jD8dAAWFrxggLiKysuym08lEIKv35dGg/lI3v4P1/vJ4EntTygxfIHdgAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app start oauth\"\n        title=\"slack app start oauth\"\n        src=\"/static/2641517dc01b3b57292e8f86f6a6169d/62f93/slack-app-start-oauth.png\"\n        srcset=\"/static/2641517dc01b3b57292e8f86f6a6169d/772e8/slack-app-start-oauth.png 200w,\n/static/2641517dc01b3b57292e8f86f6a6169d/62f93/slack-app-start-oauth.png 284w\"\n        sizes=\"(max-width: 284px) 100vw, 284px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Open the developer tools from your browser and inspect the generated url for the Slack button. It will include the OAuth scopes and Client ID that were configured earlier:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">https://slack.com/oauth/v2/authorize?</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  scope=commands,chat:write,users:read,chat:write.public</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;client_id=your_client_id</span></span></code></pre>\n<p class=\"markdown-para\">If you click the \"Add to Slack\" button, you'll be taken to a Slack page showing that the app is requesting permission to access your Slack workspace. I've annotated the screenshot with the OAuth scopes we <a href=\"../rails-slack-app-part1-oauth/#configure-rails-for-slack\" class=\"markdown-link\">configured earlier</a>:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 629px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAADVUlEQVR42nVVS27jRhD1bXKEHCWbIEGukG2QI2STTbKdVZBVMIhXATKyvbHHGU9gDyxZn5Eo8dMUm78m2fyLL6iS6NCyXY1SF0T263r1qtknHZ6OXbfjue066LLieG8d2iZHd3jev3c8TnaDF8ibtuHlf709xQ/ffI0P1zdIdI483sJZvMWvkxHaXcvAu4H3GCd9cGx//nGK7776FtdXH5DlJcpEwJq8wc/jvznboQ0zPunBojhCGIXsmc4QKwXTFlCJQqY1ikLD9zYI4hBpliLPc8Qq5vhJhj3gcrXEZDLBx483OD8/x/v3Vzg7G2F0NsK70TuMRiNc/3ODi4sLXF5e4v7+nt9frZbPAbsBBcrONE0sl0vMZjOsN2vYts0bOo6N6WzKQJZlvUyZfuqmxng8xmKxwMPDAzbmhgEsy8TKWMFYG7Adm31oJM7uSHUGJGWllAjCAEIIbL0tXFfA3bocs8stgiigpew0yGhm1YcqE2BZlSwMUaFMHOFwLA7AxtyA3Eo0VYtK1zzXeQudFLz+xRqSYqSyH/hI0oQ38H2JKIqQiRRVWkJZGeREIXVz+LME4ed0n+mQ8rA5aTeK+/oMn7VdyxR7yl0fHTc2iXJ7d8sK3n26w3wxZ5Fm8xmLNJ1OMZ/PobXei9EeNtrt0HXdc1Eom6IouIlJmN6JsiTK1PQqhB/6UJl6bJa9KO3TGvaA9CfVjoSw7L0wQjjcQq7rwlk4EGsH27VEvM6RbUsoM0fsZE9V7mtERhkSqCc9bpEwDjkOowCJn6DUBfKkRGDGiFyFRGqUSf0/5a57CqhzDaUU4jSGa7jwTG9PV0awVy6cjQtp+3CtLYTtIpYJat3sa3ksCrUMHXYpPa6VbdjYjDewFiY+f1ph/a8DLSqkVolMVFBGjnCh4a8UyqJ6bJ3HGpITvc1mzTV0hA3hCdjChuWYsD0bvvIRqgBREiLJFcpdcQBqX27sqq5QFDmKsmCn00MzLSjdDLXUqKgb4gQqSJGGGZ+aZ5SHzTv8glRNjaapERYpTm9v8NvZBeaGhTqo4U0U3LuYZzqGzwCHwL3LQCL2fVwZM3z5y4/44qfv8fvtJW/YHGge30UvAvZxX1u+a6hXKR4AvHqnvHbzHQ+8AjYE/A+47N+CJbc6/gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app oauth request permission\"\n        title=\"slack app oauth request permission\"\n        src=\"/static/66c45686c13a06387cb384c1d180052b/63a68/slack-app-oauth-request-permissions-annotated.png\"\n        srcset=\"/static/66c45686c13a06387cb384c1d180052b/772e8/slack-app-oauth-request-permissions-annotated.png 200w,\n/static/66c45686c13a06387cb384c1d180052b/e17e5/slack-app-oauth-request-permissions-annotated.png 400w,\n/static/66c45686c13a06387cb384c1d180052b/63a68/slack-app-oauth-request-permissions-annotated.png 629w\"\n        sizes=\"(max-width: 629px) 100vw, 629px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Don't click the \"Allow\" button yet. We still have some work to do on the Rails side to handle this.</p>\n<h2 class=\"markdown-subtitle\" id=\"rails-receive-oauth-response\" style=\"position:relative;\"><a href=\"#rails-receive-oauth-response\" aria-label=\"rails receive oauth response permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rails Receive OAuth Response</h2>\n<p class=\"markdown-para\">When the user clicks the \"Allow\" button from the Slack OAuth permission page, Slack will send a request to the Redirect URL that was defined earlier when we <a href=\"../rails-slack-app-part1-oauth#create-slack-app\" class=\"markdown-link\">created the Slack app</a>. Recall we defined the Redirect URL to be the homepage served at the root of the Rails application <code>/</code>, which is handled by the WelcomeController and view.</p>\n<p class=\"markdown-para\">The Redirect URL will contain the OAuth <code>code</code>. This needs to be exchanged for a token, to do this, we'll write a small amount of JavaScript with a <a href=\"https://stimulus.hotwired.dev/handbook/origin\" class=\"markdown-link\">StimulusJS</a> controller that takes the code, and submits a POST to the <code>/api/teams</code> endpoint provided by the <code>slack-ruby-bot-server</code> gem. That endpoint will do the work of exchanging the code provided in the redirect url by Slack, for a token, which will be persisted in the <code>teams</code> table. The gem will do most of the work, but as it only provides a POST endpoint, and Slack is sending us a GET, a small amount of JavaScript is required to glue this together.</p>\n<p class=\"markdown-para\">Start by generating the Stimulus controller:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">bin/rails generate stimulus SlackTeamRegistration</span></span></span></code></pre>\n<p class=\"markdown-para\">This generates the following JavaScript file:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// app/javascript/controllers/slack_team_registration_controller.js</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> { Controller } </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@hotwired/stimulus&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Connects to data-controller=&quot;slack-team-registration&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">default</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">Controller</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">connect</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">Update the Welcome index view to add a <code>&#x3C;div></code> element with its <code>data-controller</code> attribute set to <code>slack-team-registration</code>. By naming convention, anytime an element with this attribute appears in the DOM, the <code>connect()</code> function of the <code>SlackTeamRegistration</code> Stimulus controller will run.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"erb\" data-index=\"23\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;%# app/views/welcome/index.html.erb %&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk5\">href</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_authorize_url</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">?scope=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_scope_s</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&amp;client_id=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> ENV[</span><span class=\"mtk6\">&#39;SLACK_CLIENT_ID&#39;</span><span class=\"mtk1\">] </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">img</span><span class=\"mtk1\"> </span><span class=\"mtk5\">alt</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;Add to Slack&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">height</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;40&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">width</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;139&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">src</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;https://platform.slack-edge.com/img/add_to_slack.png&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">a</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">&lt;%# === Add a div here to connect to the StimulusJS controller === %&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">data-controller</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;slack-team-registration&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Now let's implement the <code>connect()</code> function in JavaScript. When Slack sends a GET to our Rails app, it will include a <code>code</code> parameter in the URL, which can be extracted with <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams\" class=\"markdown-link\">URLSearchParams</a>. Once the <code>code</code> is extracted, <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\" class=\"markdown-link\">fetch</a> is used to send an HTTP POST to <code>/api/teams</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"24\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> { Controller } </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@hotwired/stimulus&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Connects to data-controller=&quot;slack-team-registration&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">default</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">Controller</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">connect</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> code </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">URLSearchParams</span><span class=\"mtk1\">(window.location.search).</span><span class=\"mtk5\">get</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;code&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (code) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5\">fetch</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;/api/teams&quot;</span><span class=\"mtk1\">, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        method: </span><span class=\"mtk6\">&quot;POST&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        headers: { </span><span class=\"mtk6\">&quot;Content-Type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;application/json&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        body: </span><span class=\"mtk9\">JSON</span><span class=\"mtk1\">.</span><span class=\"mtk9\">stringify</span><span class=\"mtk1\">({ code })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk5\">then</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">response</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> response.</span><span class=\"mtk5\">json</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk5\">then</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">data</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;Successfully registered new team!&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk5\">catch</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">error</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk9 mtki\">console</span><span class=\"mtk1\">.</span><span class=\"mtk9\">log</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;An error occurred while registering the team.&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">To improve the user experience, the app should display a message while the POST to <code>/api/teams</code> is in progress, and whether it succeeded or not. To do this, add a <code>&#x3C;span></code> element to the welcome index view with a target of <code>message</code>, which will make it available to the Stimulus controller as <code>this.messageTarget</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"erb\" data-index=\"25\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;%# app/views/welcome/index.html.erb %&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk5\">href</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_authorize_url</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">?scope=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_scope_s</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&amp;client_id=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> ENV[</span><span class=\"mtk6\">&#39;SLACK_CLIENT_ID&#39;</span><span class=\"mtk1\">] </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">img</span><span class=\"mtk1\"> </span><span class=\"mtk5\">alt</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;Add to Slack&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">height</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;40&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">width</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;139&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">src</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;https://platform.slack-edge.com/img/add_to_slack.png&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">a</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">data-controller</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;slack-team-registration&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk3\">&lt;%# === Add a target for the StimulusJS controller === %&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">data-slack-team-registration-target</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;message&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Then update the Stimulus controller to access this DOM element with <code>static targets</code>, and populate it using <code>this.messageTarget.innerHTML</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"javascript\" data-index=\"26\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">import</span><span class=\"mtk1\"> { Controller } </span><span class=\"mtk7\">from</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;@hotwired/stimulus&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">// Connects to data-controller=&quot;slack-team-registration&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">export</span><span class=\"mtk1\"> </span><span class=\"mtk7\">default</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">class</span><span class=\"mtk1\"> </span><span class=\"mtk7\">extends</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">Controller</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// Connects to any DOM node, with target: message,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\">// eg: &lt;element data-slack-team-registration-target=&quot;message&quot;&gt;&lt;/element&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">static</span><span class=\"mtk1\"> targets </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [ </span><span class=\"mtk6\">&quot;message&quot;</span><span class=\"mtk1\"> ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk5\">connect</span><span class=\"mtk1\">() {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">const</span><span class=\"mtk1\"> code </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">new</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">URLSearchParams</span><span class=\"mtk1\">(window.location.search).</span><span class=\"mtk5\">get</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;code&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">if</span><span class=\"mtk1\"> (code) {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">// Update &lt;span data-slack-team-registration-target=&quot;message&quot;&gt;&lt;/span&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\">// with &quot;Working, please wait...&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk10\">this</span><span class=\"mtk1\">.messageTarget.innerHTML </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;Working, please wait ...&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk5\">fetch</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;/api/teams&quot;</span><span class=\"mtk1\">, {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        method: </span><span class=\"mtk6\">&quot;POST&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        headers: { </span><span class=\"mtk6\">&quot;Content-Type&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;application/json&quot;</span><span class=\"mtk1\"> },</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        body: </span><span class=\"mtk9\">JSON</span><span class=\"mtk1\">.</span><span class=\"mtk9\">stringify</span><span class=\"mtk1\">({ code, state })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk5\">then</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">response</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> response.</span><span class=\"mtk5\">json</span><span class=\"mtk1\">())</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk5\">then</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">data</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Update &lt;span data-slack-team-registration-target=&quot;message&quot;&gt;&lt;/span&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// with a success message</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">this</span><span class=\"mtk1\">.messageTarget.innerHTML </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">`Team successfully registered!`</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">this</span><span class=\"mtk1\">.messageTarget.style.display </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;block&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      })</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      .</span><span class=\"mtk5\">catch</span><span class=\"mtk1\">(</span><span class=\"mtk10 mtki\">error</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">=&gt;</span><span class=\"mtk1\"> {</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// Update &lt;span data-slack-team-registration-target=&quot;message&quot;&gt;&lt;/span&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk3\">// with an error message</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">this</span><span class=\"mtk1\">.messageTarget.innerHTML </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;An error occurred while registering the team.&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk10\">this</span><span class=\"mtk1\">.messageTarget.style.display </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;block&quot;</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      });</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<aside class=\"markdown-aside\">\nFor stronger security, Slack also supports <a class=\"markdown-link\" href=\"https://api.slack.com/authentication/rotation\">OAuth token rotation</a>, although I couldn't find support for that in the `slack-ruby-bot-server` gem. So for this relatively simple app, I will not be using this feature.\n</aside>\n<h2 class=\"markdown-subtitle\" id=\"rails-blocked-host\" style=\"position:relative;\"><a href=\"#rails-blocked-host\" aria-label=\"rails blocked host permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Rails Blocked Host</h2>\n<p class=\"markdown-para\">The OAuth flow isn't going to work quite yet, there's one more thing required on the Rails side to allow incoming requests that aren't <code>localhost</code>. Recall that ngrok running at something like <code>https://12e4-203-0-113-42.ngrok-free.app</code>, which will forward requests to the Rails app running at <code>http://localhost:3000</code>.</p>\n<p class=\"markdown-para\">As of Rails 6, the <code>ActionDispatch::HostAuthorization</code> middleware will <a href=\"../rails-blocked-host-docker-fix\" class=\"markdown-link\">block any requests that aren't localhost</a>. This means when Slack sends the Redirect URL containing the OAuth code, it will never hit the Welcome controller because the <code>HostAuthorization</code> middleware will reject it.</p>\n<p class=\"markdown-para\">To resolve this, add the ngrok forwarding address in <code>config/environments/development.rb</code> so that it will be allowed:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"27\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># config/environments/development.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">hosts</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">IPAddr</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;0.0.0.0/0&quot;</span><span class=\"mtk1\">),            </span><span class=\"mtk3\"># All IPv4 addresses.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">IPAddr</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;::/0&quot;</span><span class=\"mtk1\">),                 </span><span class=\"mtk3\"># All IPv6 addresses.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">&quot;localhost&quot;</span><span class=\"mtk1\">,                        </span><span class=\"mtk3\"># The localhost reserved domain.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">&quot;12e4-203-0-113-42.ngrok-free.app&quot;</span><span class=\"mtk1\">  </span><span class=\"mtk3\"># Allow incoming requests from Slack via ngrok.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># other config...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\"><strong class=\"markdown-strong\">BUT:</strong> Every time you restart ngrok, it will assign a different forwarding address (on the free plan). Also, if this project is going to be worked on by a team of developers, every developer running ngrok on their laptop will have a different forwarding address. So hard-coding a specific ngrok address in the config file as shown above will be awkward because it will require everyone to edit it and result in merge conflicts in version control.</p>\n<p class=\"markdown-para\">This can be resolved by introducing an environment variable: <code>SERVER_HOST_NAME</code>. Add it to the <code>.env</code> file in the project root (recall this file is gitignored), for example:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"28\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">SLACK_CLIENT_ID=your-app-client-id</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">SLACK_CLIENT_SECRET=your-app-client-secret</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">SLACK_SIGNING_SECRET=your-app-signing-secret</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">SLACK_VERIFICATION_TOKEN=your-app-verification-token</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Replace the value with your ngrok forwarding address:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">SERVER_HOST_NAME=12e4-203-0-113-42.ngrok-free.app</span></span></span></code></pre>\n<p class=\"markdown-para\">Then update the dev config file in the Rails project to use the <code>SERVER_HOST_NAME</code> environment variable:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"29\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># config/environments/development.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Rails</span><span class=\"mtk1\">.</span><span class=\"mtk5\">application</span><span class=\"mtk1\">.</span><span class=\"mtk5\">configure</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  config.</span><span class=\"mtk5\">hosts</span><span class=\"mtk1\"> </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> [</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">IPAddr</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;0.0.0.0/0&quot;</span><span class=\"mtk1\">),    </span><span class=\"mtk3\"># All IPv4 addresses.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk9 mtki\">IPAddr</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;::/0&quot;</span><span class=\"mtk1\">),         </span><span class=\"mtk3\"># All IPv6 addresses.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk6\">&quot;localhost&quot;</span><span class=\"mtk1\">,                </span><span class=\"mtk3\"># The localhost reserved domain.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    ENV[</span><span class=\"mtk6\">&quot;SERVER_HOST_NAME&quot;</span><span class=\"mtk1\">]     </span><span class=\"mtk3\"># Allow incoming requests from Slack via ngrok.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  ]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># other config...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Remember to restart the Rails server after making changes to <code>config/environments/development.rb</code> and <code>.env</code> files.</p>\n<h2 class=\"markdown-subtitle\" id=\"run-the-oauth-flow\" style=\"position:relative;\"><a href=\"#run-the-oauth-flow\" aria-label=\"run the oauth flow permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Run the OAuth Flow</h2>\n<p class=\"markdown-para\">Now, we're ready to put together all these parts and try out the OAuth flow. Restart the Rails server at <code>bin/dev</code>, navigate to <a href=\"%5Bhttp://localhost:3000%5D\" class=\"markdown-link\">http://localhost:3000</a>, then click on the \"Add to Slack\" button:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 284px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwklEQVR42tWTzQrCMAyAff8n8R28efCgR2f9gc1t4G4qiqJrk37imCLq5gQFbQgJtPnIX1uez0rrq0D1+pZeYh6At5d6tVqbSS3w/gFn3yui8lSrYE8ztGLZeiV3QtWxzuJE6ktW7wFltbG0Bz2i5ZSJmWHGhiRJGAYB/f4AYwy5zXHiXvSw7Nt+tWfd7bDbzgnnKXEcs8gykjQlGI0Iw4jD8dAAWFrxggLiKysuym08lEIKv35dGg/lI3v4P1/vJ4EntTygxfIHdgAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app start oauth\"\n        title=\"slack app start oauth\"\n        src=\"/static/2641517dc01b3b57292e8f86f6a6169d/62f93/slack-app-start-oauth.png\"\n        srcset=\"/static/2641517dc01b3b57292e8f86f6a6169d/772e8/slack-app-start-oauth.png 200w,\n/static/2641517dc01b3b57292e8f86f6a6169d/62f93/slack-app-start-oauth.png 284w\"\n        sizes=\"(max-width: 284px) 100vw, 284px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">You should be redirected to a url at Slack that contains your Client ID and the OAuth scopes that this app requires (which we configured earlier). The URL you get redirected to looks something like this:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"30\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">https://your-workspace.slack.com/oauth</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ?client_id=your-client-id</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;scope=commands,chat:write,users:read,chat:write.public</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;user_scope=</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;redirect_uri=</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;state=</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;granular_bot_scope=1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;single_channel=0</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;install_redirect=</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;tracked=1</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;team=1</span></span></code></pre>\n<p class=\"markdown-para\">This time click the \"Allow\" button:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 625px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 101%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdklEQVR42nVVyY7TQBDNRyHOiC/ga/gBuHDgiJBA4sABCSQOSHCIkEaTxCIiI0Qmozi7EyeTURxvaS9ZvOShKo8zjm3aqnS6XP36vapKp3JE8YmPMbKD1sfcOsax9KkkwQlIajTG/QEuv/+AbW8SkMCDMLqQ7WUhPl2XAoZRyABvXr3Gs0eP0fz1G0tNh6cNMOl+xPOrr4jjiGOjHCBZpUwijfZ1F58+f4Nl2YkjFDCXEv6Y80JsCnpiSKM/6EOWZfR6PTZtvcJioWI4HKBz08FoomCszDkVs9kMM3WGwXAAZao85JUYpoCu58LzPfT6PbRaLUiShGq1ikajgWaziVrtEu32X9TqdUhSgw+1NzY2YlOUHMURtrstDsEBlmVx4FpfwzANNtu2k3lj86HCEdjtdwXJDEgOetm+brMEuSdjNB5hokxYznA0hKIomE6nWN4tC7krVJk+gjBgUN/3YNkJQ5pNy2Q2JMswdPhb/0xeujcIggeGWXSSzgH3RilIv+8Pe15n+y9tM9p3JpmCqcrqXGWJqqpyFeeL+Wle3C6YYVZqtl0KkrW1xrbSVjzrhs6FoTXNuq5z4bIgqaozhqmTqFMFKV9kjuuwUS49z2UfHUQ5zTJKU3IGSA7qQwKggpAJIXgzGbWM47kI+eDoxIoASgHpJSWccpSCELjrJod4jlP4uR3v7x+6d84kZ3OSH7vDHscowlwYeH91gbetn+iMp9jeuvBtH77lwzd9hEFYbJsyW601OJaFuiLj6bsXePLhJb5cNODcmBCaA+dOQCwFgl1Ocrb0+c6PS5iXyT9rm7Ib+zSXsY+LvlKGebD/WTYu/xfwD7jtAb3v7cuKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app oauth allow\"\n        title=\"slack app oauth allow\"\n        src=\"/static/2fe1f371735651178b6110c0e6472265/80d71/slack-app-oauth-allow.png\"\n        srcset=\"/static/2fe1f371735651178b6110c0e6472265/772e8/slack-app-oauth-allow.png 200w,\n/static/2fe1f371735651178b6110c0e6472265/e17e5/slack-app-oauth-allow.png 400w,\n/static/2fe1f371735651178b6110c0e6472265/80d71/slack-app-oauth-allow.png 625w\"\n        sizes=\"(max-width: 625px) 100vw, 625px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Clicking the \"Allow\" button will make Slack redirect back to the Rails app, at the ngrok forwarding address we setup in the Slack UI <a href=\"../rails-slack-app-part1-oauth#create-slack-app\" class=\"markdown-link\">earlier when defining our app</a>. The URL will look as shown below. The important piece of information here is the <code>code</code> parameter, which we will need to exchange for an OAuth token:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"31\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">https://your-ngrok-address.ngrok-free.app/</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  ?scope=incoming-webhook</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;client_id=your-client-id</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;code=temp-oauth-code</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  &amp;state=</span></span></code></pre>\n<p class=\"markdown-para\">The first time you're using the ngrok address, ngrok will display an intermediary page. Your values will be different but it looks something like this:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfUlEQVR42o2Ta67aMBBG7/6X0V30fxdQVYIgkkAgtBfycGLn6UdyqpgG0auW1tLxWLLm8zf2+M0ai9EGrTV61H49uQnnHH7PmP9HG96W5CzL2Gw3BLuA9JKSF7lHmxGYmebpJTMzbnJ3wcVF1/eUQiCVpO1aT9M2DNox83rMvw58CBptsWbgdk04HGPiQ0wURxyORw6nd86Xd663q6eqK0Y9MozDI1pnf3c4O0t66/jyNaesalQjqaWkaRWqqall5YUWarnsK89SgVISbbR3+hBktnyLWj59rugGd7+zab2fmXnlqbRnrLUY+/QoWhukyJHlD75fLqTnFCUVXdt5+rZ/rId+8ElmvCf/Cf8o51PKZhMQbLdEYUhZlIhSeIq88OR5TiUqxmFkbbUlfsS3TVkU7IIdUXwmjg5eNNzvCfchyTG5kySckhNt0+Ks+7vgMjVKkd1yCtEjqoYsKyhL4R2tzb6yuntZshAVUkqUrKnqnlo5jHH+x/xL4KPgT+BsUOi+4EcGAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app first time ngrok warning\"\n        title=\"slack app first time ngrok warning\"\n        src=\"/static/6bee749cdb3515bf453b5844b33a9dd1/5a190/slack-app-first-time-ngrok-warning.png\"\n        srcset=\"/static/6bee749cdb3515bf453b5844b33a9dd1/772e8/slack-app-first-time-ngrok-warning.png 200w,\n/static/6bee749cdb3515bf453b5844b33a9dd1/e17e5/slack-app-first-time-ngrok-warning.png 400w,\n/static/6bee749cdb3515bf453b5844b33a9dd1/5a190/slack-app-first-time-ngrok-warning.png 800w,\n/static/6bee749cdb3515bf453b5844b33a9dd1/bb3ba/slack-app-first-time-ngrok-warning.png 1121w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Go ahead and click the \"Visit Site\" button, then this request will reach the root of the Rails app running at <code>http://localhost:3000</code> (because ngrok is forwarding traffic there).</p>\n<p class=\"markdown-para\">This will render the Rails app homepage which is handled by the <code>WelcomeController</code>. Recall we added a StimulusJS controller to detect if a <code>code</code> parameter is in the URL, which it is right now, so the Stimulus controller will submit a POST to the <code>/api/teams</code> endpoint. At this point you should see a \"Working\" message, this is the StimulusJS controller waiting for a result from the <code>POST /api/teams</code> endpoint:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 289px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABFElEQVR42q2S207DMAyG+/5vwhMAAlQq0hXB0Likm8SuEOtOpWtH00PyoaSrVLRuMGm2HEe2Zf+/ZUdphUZj/H+trdc96nST5q0PFHZVHalxfk1UNWiNUopa1TbWeG19Y38gtDTMV9WsZMXLZs1WbpGF5DvPqeqKNEuRRUFRFpRVubei/YZaYeRjMufBveBzOWHgP/E8HBKOxwjhc3l1zft02kHdv8+G8g6lyiUkKzRYasbaYtPEoO1KH3WnRWco3tzd4gqB7/sEwYC3MMTzPILHACEEYRji3ruMXkfkMrdD+hHuEMRfMXG8JtkkzKIZURSxWC6sRfOILEtt3OQNgF7K3cCpcpDyqYd97MgdzXn17A1/AOnuqgj3IH41AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app team wait\"\n        title=\"slack app team wait\"\n        src=\"/static/660b27b7bc84e91b680f1a0d43aa6704/c969a/slack-app-team-wait.png\"\n        srcset=\"/static/660b27b7bc84e91b680f1a0d43aa6704/772e8/slack-app-team-wait.png 200w,\n/static/660b27b7bc84e91b680f1a0d43aa6704/c969a/slack-app-team-wait.png 289w\"\n        sizes=\"(max-width: 289px) 100vw, 289px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">The Rails server will show that it's processing the <code>POST /api/teams</code> request. Unfortunately it does not show the activity where it exchanges the <code>code</code> for a <code>token</code> with Slack, but this is what the <a href=\"https://github.com/slack-ruby/slack-ruby-bot-server/blob/master/lib/slack-ruby-bot-server/api/endpoints/teams_endpoint.rb#L33-L115\" class=\"markdown-link\">teams endpoint</a> provided by the <code>slack-ruby-bot-server</code> gem is doing behind the scenes. When it receives the token from Slack, it receives additional information including your Slack team name, workspace name, and the user id that activated the Slack App.</p>\n<p class=\"markdown-para\">The teams endpoint then checks if a team with the given token or Slack team_id already exists, and if not, will create one in the database. This activity can be seen in the Rails server output. Here is a simplified view:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"32\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Started POST &quot;/api/teams&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Team Load (2.2ms)  SELECT &quot;teams&quot;.* FROM &quot;teams&quot; WHERE &quot;teams&quot;.&quot;token&quot; = $1 LIMIT $2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    [[&quot;token&quot;, &quot;the-token-returned-by-slack&quot;], [&quot;LIMIT&quot;, 1]]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Team Load (1.5ms)  SELECT &quot;teams&quot;.* FROM &quot;teams&quot; WHERE &quot;teams&quot;.&quot;team_id&quot; = $1 LIMIT $2</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    [[&quot;team_id&quot;, &quot;your-slack-team-id&quot;], [&quot;LIMIT&quot;, 1]]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  TRANSACTION (3.0ms)  BEGIN</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  Team Create (4.3ms)  INSERT INTO &quot;teams&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    (&quot;team_id&quot;, &quot;name&quot;, &quot;domain&quot;, &quot;token&quot;, &quot;oauth_scope&quot;, &quot;oauth_version&quot;, &quot;bot_user_id&quot;, &quot;activated_user_id&quot;, &quot;activated_user_access_token&quot;, &quot;active&quot;, &quot;created_at&quot;, &quot;updated_at&quot;)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    RETURNING &quot;id&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    [</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;team_id&quot;, &quot;your-slack-team-id&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;name&quot;, &quot;TestBotDev&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;domain&quot;, nil],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;token&quot;, &quot;the-token-returned-by-slack&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;oauth_scope&quot;, &quot;commands,chat:write,users:read,chat:write.public&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;oauth_version&quot;, &quot;v2&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;bot_user_id&quot;, &quot;your-slack-bot-user-id&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;activated_user_id&quot;, &quot;slack-user-that-allowed-this-app&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;activated_user_access_token&quot;, &quot;the-token-returned-by-slack&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;active&quot;, true],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;created_at&quot;, &quot;2023-12-15 13:02:52.784031&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">      [&quot;updated_at&quot;, &quot;2023-12-15 13:02:52.784031&quot;]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    ]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  TRANSACTION (2.3ms)  COMMIT</span></span></code></pre>\n<p class=\"markdown-para\">When the <code>POST /api/teams</code> endpoint completes, it returns a response to the StimulusJS controller that called it. The success response will be <code>201 Created</code> with response body containing the <code>teams</code> record that was just created:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"json\" data-index=\"33\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">{</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">&quot;id&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk4\">4</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">&quot;team_id&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk12\">&quot;your-slack-team-id&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">&quot;name&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk12\">&quot;your-slack-workspace&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">&quot;active&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk4\">true</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">&quot;created_at&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk12\">&quot;2023-12-15T13:02:52.784Z&quot;</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk9 mtki\">&quot;updated_at&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk12\">&quot;2023-12-15T13:02:52.784Z&quot;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">}</span></span></span></code></pre>\n<p class=\"markdown-para\">Finally, when the StimulusJS controller receives a success response, it updates the display to a success message:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 328px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABAklEQVR42q1RDU/CMBTs//9B/gBgBbKBgaFmJRE1MSHGgDV068faM32wBczURX0v176+tNfrlQUE+BDhf0TokYy29SDrS8qIDAGAR4zwx2wVHqzFY3mANhrGGlhnqdbWwDhL66M93aqbmcUixvZpj2R6hYfnNWbZNQohsFgsMRpx3G823z75vM/i4HwN+bqD371AWw2lFFRVQpUK8l3iTUpSHQ+62hFqX7e9C4VEWDvcFncYjDnEWmA+nyHPc2RZijRNwccchSiQ8IQwHA4wmU6wull1PzkWdKPRNFe6Ovp38jMiXlpWJcGePP3sa6uwWTS/fB5d/a/8uyD8LToV/md+AMbhW6E+c6a+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app team registered\"\n        title=\"slack app team registered\"\n        src=\"/static/c92bc7be2d7993d34074f662e97e75c0/d5c60/slack-app-team-registered.png\"\n        srcset=\"/static/c92bc7be2d7993d34074f662e97e75c0/772e8/slack-app-team-registered.png 200w,\n/static/c92bc7be2d7993d34074f662e97e75c0/d5c60/slack-app-team-registered.png 328w\"\n        sizes=\"(max-width: 328px) 100vw, 328px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">You can also confirm the team was created in a Rails console <code>bin/rails c</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"34\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">team </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">Team</span><span class=\"mtk1\">.</span><span class=\"mtk5\">first</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Team Load (1.1ms)  SELECT &quot;teams&quot;.* FROM &quot;teams&quot; ORDER BY &quot;teams&quot;.&quot;id&quot; ASC LIMIT $1  [[&quot;LIMIT&quot;, 1]]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#&lt;Team:0x000000010aad10a0</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  id: 4,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  team_id: &quot;your-slack-team-id&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  name: &quot;your-slack-workspace&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  domain: nil,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  token: &quot;the-oauth-token-returned-by-slack&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  oauth_scope: &quot;commands,chat:write,users:read,chat:write.public&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  oauth_version: &quot;v2&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  bot_user_id: &quot;your-slack-bot-user-id&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  activated_user_id: &quot;slack-user-that-allowed-this-app&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  activated_user_access_token: &quot;the-oauth-token-returned-by-slack&quot;,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  active: true,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  created_at: Fri, 15 Dec 2023 13:02:52.784031000 UTC +00:00,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">#  updated_at: Fri, 15 Dec 2023 13:02:52.784031000 UTC +00:00&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">At this point, if you open your Slack desktop app, it should show that the Retro Pulse app has been added in the Apps section:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 540px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABtUlEQVR42pXSy2sTURTH8dnbWmc6d+6dmWTyxGYmQ5pMmmaaRpq26EIXpYIl6WuV+gJ3UXyAxbVCV/of2CIiBrqoglD6l30lUypSaK2LD797zj2c1dGU9PDSRRyVJeXmSbkFHDuHY2dRMvOfPDSpC2rlCp5yqZTKLN/q0Gm1CW/62IaFY0qcSYl9FSKFZoXLjBdamP5iQlZuoyp3EMESRqmDPrWQpOl3kOXFSyyhUlNo7uYnBr0NqqsvCF4dEb0cEgy+4z37Sv3NIdHrQ4LBMKlv9PcxdvbRz+t/Rn/8DWv2AVpm+yNPul1qq8+Jdn9xf++Eu++Pab37SePtEfc+HLOyd0K8+4Px/gHGoy/oD8/ZOUB/OkTM9dDE/BZmbQUr7jLRXOdatMbYTJeJRo+x+lpSX2/0MOINRrOitXWaf2ttIua3Ubkqmidd2s02RS+PnysQV+vMhNP4uSJREFL1y+SdNEo3sQ1xMV1gCxdtdCbTlVly2RKFfEAUzRGGdYKgRhwvUKs2kz9pedgqi1KZC2RPz0ZZaaRIcZamYSMmHSzT/fMe9W3pJTOjvIz2r4EzV1k2WvgbUh82bDMyLBgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app added\"\n        title=\"slack app added\"\n        src=\"/static/16c3903771703185b4c5e1d27941de83/07484/slack-app-added.png\"\n        srcset=\"/static/16c3903771703185b4c5e1d27941de83/772e8/slack-app-added.png 200w,\n/static/16c3903771703185b4c5e1d27941de83/e17e5/slack-app-added.png 400w,\n/static/16c3903771703185b4c5e1d27941de83/07484/slack-app-added.png 540w\"\n        sizes=\"(max-width: 540px) 100vw, 540px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">If you click on it and then select the \"About\" tab, Slack will display the information we entered earlier:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpklEQVR42p1TTY+bMBTkT2ybYIcYCAkbvGDAJhAUabVfiVSphx5W255aKTm1US/VXvbU/1Rpf96snhNQmuMeBtvvPc+Mn42TxFdoFiuYukXdrDCLJYZsDDby3wXHD2NcZSWiWQKpSkSxhMsFRuMQ3AssqJCfbeRn6Alpgx9GGLhjuH6IURBahwPXsyDyjtQSnYj8J3CMOXwUgXkKUmrME4MhSzGLM5jFEto0iOcpPgx4L/LxKNSB4l2OxJ0Ldokf1w94/fOEf7++4JO5wTjMUDctqrqFqZZQuUGqNFJVotA1VGFQ6IWNZcecTAvbJoeJBL/Xa/zdbfHy9IjvtxtwXyIvDPKiQpZrlKaxY6YOcyIsdd3PiZyEPDGB47Ipvj1usdvu8XP/jPXmK4SYozS1LSKXtJHW1AJaU5xAguTeLFrINLdHdxifQut7tMsN7m4/Q2XXCEIJXdHRqt4FIS+r3hHlOmfUZ3Jne0i343IfIojhiSmGTCCYxMjLQzGRHPqn7fMiQppTjQgiiGDaX4y9ZfpQYi4VLpPMKlGM1E7H81hHcvoTkMM3X70qyo0CyiYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app desktop info\"\n        title=\"slack app desktop info\"\n        src=\"/static/85167a785c4cbaf7055bc6a210ed4cbf/5a190/slack-app-desktop-info.png\"\n        srcset=\"/static/85167a785c4cbaf7055bc6a210ed4cbf/772e8/slack-app-desktop-info.png 200w,\n/static/85167a785c4cbaf7055bc6a210ed4cbf/e17e5/slack-app-desktop-info.png 400w,\n/static/85167a785c4cbaf7055bc6a210ed4cbf/5a190/slack-app-desktop-info.png 800w,\n/static/85167a785c4cbaf7055bc6a210ed4cbf/c1b63/slack-app-desktop-info.png 1200w,\n/static/85167a785c4cbaf7055bc6a210ed4cbf/29007/slack-app-desktop-info.png 1600w,\n/static/85167a785c4cbaf7055bc6a210ed4cbf/7e21b/slack-app-desktop-info.png 1626w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"style-landing-page\" style=\"position:relative;\"><a href=\"#style-landing-page\" aria-label=\"style landing page permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Style Landing Page</h2>\n<p class=\"markdown-para\">This part is optional, but makes for a nicer user experience. Up until this point, the welcome index view (i.e. the view that's rendered when navigating to the root <code>/</code> of the Rails application) displays only the Add to Slack button. This doesn't provide any information about what this app does. For this section, I've added some TailwindCSS styles for a very basic layout and appearance.</p>\n<p class=\"markdown-para\">The application layout is updated to include the application name and logo:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"erb\" data-index=\"35\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;%# app/views/layouts/application.html.erb %&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;!</span><span class=\"mtk7\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk5\">html</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">html</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">head</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">title</span><span class=\"mtk1\">&gt;RetroPulse&lt;/</span><span class=\"mtk7\">title</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">meta</span><span class=\"mtk1\"> </span><span class=\"mtk5\">name</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;viewport&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">content</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;width=device-width, initial-scale=1&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> csrf_meta_tags </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> csp_meta_tag </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> stylesheet_link_tag </span><span class=\"mtk6\">&quot;tailwind&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;inter-font&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;data-turbo-track&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;reload&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> stylesheet_link_tag </span><span class=\"mtk6\">&quot;application&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk6\">&quot;data-turbo-track&quot;</span><span class=\"mtk1\">: </span><span class=\"mtk6\">&quot;reload&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> javascript_importmap_tags </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">head</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">body</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;bg-gray-100&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">header</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;bg-blue-500 text-white py-4&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;container mx-auto flex justify-between items-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> link_to root_path, </span><span class=\"mtk4\">class:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;flex items-center&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk7\">img</span><span class=\"mtk1\"> </span><span class=\"mtk5\">src</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk5\">asset_path</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&#39;logo.jpeg&#39;</span><span class=\"mtk1\">) </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">alt</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;Retro Pulse&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;h-16 w-auto mb-2&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">          &lt;</span><span class=\"mtk7\">h1</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-xl font-bold ml-2&quot;</span><span class=\"mtk1\">&gt;Retro Pulse&lt;/</span><span class=\"mtk7\">h1</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        </span><span class=\"mtk7\">&lt;%</span><span class=\"mtk1\"> </span><span class=\"mtk7\">end</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">header</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">main</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;container mx-auto mt-8 p-5 bg-white rounded shadow&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk7\">yield</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">main</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">body</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">html</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">And the welcome index view is updated to include a description of the application:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"erb\" data-index=\"36\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">&lt;%# app/views/welcome/index.html.erb %&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;flex justify-center items-center&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-left max-w-md mx-auto&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mb-8 text-gray-700&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-xl font-semibold leading-snug&quot;</span><span class=\"mtk1\">&gt;About Retro Pulse&lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">p</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;text-base leading-relaxed&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        Retro Pulse is designed to streamline the agile retrospective process with Slack slash commands. While traditional retrospectives are often scheduled at the end of a sprint, shape up cycle, or project, Retro Pulse recognizes the need for a more fluid feedback mechanism. With Retro Pulse, team members can easily submit feedback as it arises during project development, ensuring that valuable insights are captured and not lost in the shuffle.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;/</span><span class=\"mtk7\">p</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">a</span><span class=\"mtk1\"> </span><span class=\"mtk5\">href</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_authorize_url</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">?scope=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">SlackRubyBotServer</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Config</span><span class=\"mtk1\">.</span><span class=\"mtk5\">oauth_scope_s</span><span class=\"mtk1\"> </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&amp;client_id=</span><span class=\"mtk7\">&lt;%=</span><span class=\"mtk1\"> ENV[</span><span class=\"mtk6\">&#39;SLACK_CLIENT_ID&#39;</span><span class=\"mtk1\">] </span><span class=\"mtk7\">%&gt;</span><span class=\"mtk6\">&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">img</span><span class=\"mtk1\"> </span><span class=\"mtk5\">alt</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;Add to Slack&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">height</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;40&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">width</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;139&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">src</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;https://platform.slack-edge.com/img/add_to_slack.png&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">a</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">data-controller</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;slack-team-registration&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;mt-8&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">span</span><span class=\"mtk1\"> </span><span class=\"mtk5\">data-slack-team-registration-target</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;message&quot;</span><span class=\"mtk1\">&gt;&lt;/</span><span class=\"mtk7\">span</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Resulting in a simple layout as follows:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSUlEQVR42o2RS07DMBRFsyU6YgeIEWIXfAZlwLBISIwYsIUWiW2wEwRtmjQkTQp1En/i30UxdRtaKtVPR+/Zz/fKn+Ds/BYnDxlOnzSO7xmOBhy9AevA0bvjm7yPwS/BzeMr+qMl+i8CVyOKiyHD9TNfIXA5ZG7NZ1/vI2gASKUhpYTSCkpJkLIEIQRLQtA0AtooaK1gTIuG0nKDkq7HOUddUwTWKthVtEMbjXEY4X0c4u1jgiTLMC8KZHmOb0LABIdZK7zOgnGBsqIIjDXYYKGNwewzxTRO1kyiGONphDCaIYxnaJR0Rl5ntw19s83tCeMkdUJn4IjdvDVN0gxdzUGG82KBLC+QznOHr/PFF7gQhxv6a1ecoqor91Hbwnb8faY9ht1oOEVZlZBKugfvhsHu/j+fQplwky5cNBCNdDVlfKf/HzVlzvAHXaLeYfmotRUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"retro pulse landing\"\n        title=\"retro pulse landing\"\n        src=\"/static/41124c088977a6575d8b03659fe0cbbd/5a190/retro-pulse-landing.png\"\n        srcset=\"/static/41124c088977a6575d8b03659fe0cbbd/772e8/retro-pulse-landing.png 200w,\n/static/41124c088977a6575d8b03659fe0cbbd/e17e5/retro-pulse-landing.png 400w,\n/static/41124c088977a6575d8b03659fe0cbbd/5a190/retro-pulse-landing.png 800w,\n/static/41124c088977a6575d8b03659fe0cbbd/c1b63/retro-pulse-landing.png 1200w,\n/static/41124c088977a6575d8b03659fe0cbbd/2eb79/retro-pulse-landing.png 1256w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"next-steps\" style=\"position:relative;\"><a href=\"#next-steps\" aria-label=\"next steps permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next Steps</h2>\n<p class=\"markdown-para\">We now have an authenticated Slack app added to our workspace, backed by a Rails application. The next step will be to make it do something useful. Specifically, we'd like to add a slash command so that a new retrospective can be opened from any Slack channel in the workspace. For example, suppose we're working on a project named \"Quantum Canvas\", and Sprint 3 has just started. We'd like to enter a message in a channel to tell the Retro Pulse app to open a retrospective named \"Quantum Canvas Sprint 3\":</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.499999999999996%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApElEQVR42o2POQ7CMBBFfRBEiB17vMZLFuUUNJSU3P8MH9mhQEIRKZ7+zBRP81k/aNwEnaLj6i/MhgxJDlJ7KBMaZEcM5Npc79rFduPSQCjb8gdlIciBxbJiZ0GeN8S8tD1NK8q8NVH9rjY5RGr0nNBfOJiPBSFNCGmGjxOMi3BjgfGpyQ4/+kYQRMq4Pu9VuMuqoFarNc0nT8mUAeeEIRd0rwfemgKSxQcyyfEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"slack app retro open\"\n        title=\"slack app retro open\"\n        src=\"/static/41e503bc6f16eddc97a1b0c833d4ad53/5a190/slack-app-retro-open.png\"\n        srcset=\"/static/41e503bc6f16eddc97a1b0c833d4ad53/772e8/slack-app-retro-open.png 200w,\n/static/41e503bc6f16eddc97a1b0c833d4ad53/e17e5/slack-app-retro-open.png 400w,\n/static/41e503bc6f16eddc97a1b0c833d4ad53/5a190/slack-app-retro-open.png 800w,\n/static/41e503bc6f16eddc97a1b0c833d4ad53/27b7a/slack-app-retro-open.png 804w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">See <a href=\"../rails-slack-app-part2-slash-command-with-text-response\" class=\"markdown-link\">Part 2 of this series</a> to learn how to setup your very first Slack Slash Command and handle it in Rails.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk9 { color: #66D9EF; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk10 { color: #FD971F; }\n  .monokai .mtk12 { color: #CFCFC2; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","timeToRead":23,"tableOfContents":"<ul>\n<li><a href=\"#introducing-retro-pulse\">Introducing Retro Pulse</a></li>\n<li><a href=\"#create-rails-app\">Create Rails App</a></li>\n<li><a href=\"#configure-rails-for-slack\">Configure Rails for Slack</a></li>\n<li><a href=\"#ngrok\">Ngrok</a></li>\n<li><a href=\"#create-slack-app\">Create Slack App</a></li>\n<li><a href=\"#rails-send-oauth-request\">Rails Send OAuth Request</a></li>\n<li><a href=\"#rails-receive-oauth-response\">Rails Receive OAuth Response</a></li>\n<li><a href=\"#rails-blocked-host\">Rails Blocked Host</a></li>\n<li><a href=\"#run-the-oauth-flow\">Run the OAuth Flow</a></li>\n<li><a href=\"#style-landing-page\">Style Landing Page</a></li>\n<li><a href=\"#next-steps\">Next Steps</a></li>\n</ul>","frontmatter":{"title":"Build a Rails App with Slack Part 1: OAuth","date":"01 Jul 2024","description":"Learn how to build a Slack application with Rails in this comprehensive multi-part series. Part 1 covers setting up a new Rails app, configuring OAuth for authentication, and laying the foundation for Retro Pulse, an app designed to enhance agile retrospectives on Slack. Follow along for step-by-step instructions and valuable insights into integrating Slack with Ruby on Rails.","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/6ae9893d9aefcafb60524b97d9b441ed/d730f/slack-feat-img-1-mitchell-luo-H3htK85wwnU-unsplash.jpg","srcSet":"/static/6ae9893d9aefcafb60524b97d9b441ed/b834a/slack-feat-img-1-mitchell-luo-H3htK85wwnU-unsplash.jpg 225w,\n/static/6ae9893d9aefcafb60524b97d9b441ed/21c52/slack-feat-img-1-mitchell-luo-H3htK85wwnU-unsplash.jpg 450w,\n/static/6ae9893d9aefcafb60524b97d9b441ed/d730f/slack-feat-img-1-mitchell-luo-H3htK85wwnU-unsplash.jpg 900w","sizes":"(min-width: 900px) 900px, 100vw"},"sources":[{"srcSet":"/static/6ae9893d9aefcafb60524b97d9b441ed/71a10/slack-feat-img-1-mitchell-luo-H3htK85wwnU-unsplash.webp 225w,\n/static/6ae9893d9aefcafb60524b97d9b441ed/901f1/slack-feat-img-1-mitchell-luo-H3htK85wwnU-unsplash.webp 450w,\n/static/6ae9893d9aefcafb60524b97d9b441ed/5acd1/slack-feat-img-1-mitchell-luo-H3htK85wwnU-unsplash.webp 900w","type":"image/webp","sizes":"(min-width: 900px) 900px, 100vw"}]},"width":900,"height":599}}}},"fields":{"slug":"/blog/rails-slack-app-part1-oauth/"}},"relatedP":{"edges":[{"node":{"id":"31449f25-76f9-5e7d-b0d7-3ef436dcfd4d","frontmatter":{"title":"Rails CORS Middleware For Multiple Resources","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#080808","images":{"fallback":{"src":"/static/5c6bfd7e0c120605610036c50102bba1/26528/rails-middleware-erik-witsoe-bluVshKGwKQ-unsplash.jpg","srcSet":"/static/5c6bfd7e0c120605610036c50102bba1/26528/rails-middleware-erik-witsoe-bluVshKGwKQ-unsplash.jpg 300w,\n/static/5c6bfd7e0c120605610036c50102bba1/43429/rails-middleware-erik-witsoe-bluVshKGwKQ-unsplash.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/5c6bfd7e0c120605610036c50102bba1/5d6c3/rails-middleware-erik-witsoe-bluVshKGwKQ-unsplash.webp 300w,\n/static/5c6bfd7e0c120605610036c50102bba1/68dbc/rails-middleware-erik-witsoe-bluVshKGwKQ-unsplash.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/rails-cors-middleware-multiple/"}}},{"node":{"id":"c7b23da1-58aa-5f7e-8d61-8c308e6ef0ac","frontmatter":{"title":"Setup a Rails Project with Postgres and Docker","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#583838","images":{"fallback":{"src":"/static/03714b36bbd86fee510f6b5b6ed12b0b/26528/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.jpg","srcSet":"/static/03714b36bbd86fee510f6b5b6ed12b0b/26528/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.jpg 300w,\n/static/03714b36bbd86fee510f6b5b6ed12b0b/43429/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/03714b36bbd86fee510f6b5b6ed12b0b/5d6c3/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.webp 300w,\n/static/03714b36bbd86fee510f6b5b6ed12b0b/68dbc/rails-postgres-docker-guillaume-bolduc-uBe2mknURG4-unsplash.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/rails-postgres-docker/"}}},{"node":{"id":"e7c2d55a-8f68-55c1-816f-45c791f9b011","frontmatter":{"title":"Add a Kafka Consumer to Rails","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/3a1242ce074a0db26ad4ff18f31116df/26528/rails-kafka-consumer-multiple-trains-tracks.jpg","srcSet":"/static/3a1242ce074a0db26ad4ff18f31116df/26528/rails-kafka-consumer-multiple-trains-tracks.jpg 300w,\n/static/3a1242ce074a0db26ad4ff18f31116df/43429/rails-kafka-consumer-multiple-trains-tracks.jpg 600w","sizes":"300px"},"sources":[{"srcSet":"/static/3a1242ce074a0db26ad4ff18f31116df/5d6c3/rails-kafka-consumer-multiple-trains-tracks.webp 300w,\n/static/3a1242ce074a0db26ad4ff18f31116df/68dbc/rails-kafka-consumer-multiple-trains-tracks.webp 600w","type":"image/webp","sizes":"300px"}]},"width":300,"height":170}}}},"fields":{"slug":"/blog/rails-kafka-consumer/"}}}]}},"pageContext":{"slug":"/blog/rails-slack-app-part1-oauth/","relatedPosts":["Add a Kafka Consumer to Rails","Setup a Rails Project with Postgres and Docker","Rails CORS Middleware For Multiple Resources"]}},"staticQueryHashes":["163244226"],"slicesMap":{}}