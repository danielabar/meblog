{"componentChunkName":"component---src-pages-index-js","path":"/","result":{"data":{"allMarkdownRemark":{"totalCount":54,"edges":[{"node":{"id":"dd0209de-ae67-5936-afc4-ef653de147a6","frontmatter":{"title":"Homebrew Postgresql Service not Starting Resolved","date":"October 2022","category":"PostgreSQL"},"excerpt":"This post will cover how to troubleshoot when the postgresql service installed via Homebrew on a Mac isn't starting. If you work on a Mac…","html":"<p class=\"markdown-para\">This post will cover how to troubleshoot when the postgresql service installed via Homebrew on a Mac isn't starting. If you work on a Mac, it's likely you use <a href=\"https://brew.sh/\" class=\"markdown-link\">Homebrew</a> to install packages. In addition to installing, you can also manage services using Homebrew's <a href=\"https://docs.brew.sh/Manpage#services-subcommand\" class=\"markdown-link\">services</a> subcommand, a wrapper for <code>launchctl</code>. A common usage of the services subcommand is to start and stop databases.</p>\n<h2 class=\"markdown-subtitle\" id=\"whats-running\" style=\"position:relative;\"><a href=\"#whats-running\" aria-label=\"whats running permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What's Running</h2>\n<p class=\"markdown-para\">This all started when I wanted to follow along with a Rails tutorial that required scaffolding a new project with <a href=\"https://www.postgresql.org/\" class=\"markdown-link\">Postgresql</a> as the database. For production projects, I prefer to setup all databases in <a href=\"https://www.docker.com/\" class=\"markdown-link\">Docker</a> containers, but for a simple tutorial, it's fine to use a local service, which I had installed some time ago via <code>brew install postgresql</code>.</p>\n<p class=\"markdown-para\">However, I couldn't remember whether the database server was running. To get information about services that are currently being managed by Homebrew, use the <code>list</code> option of the <code>services</code> subcommand:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">brew services list</span></span></code></pre>\n<p class=\"markdown-para\">My output showed I had mysql, postgresql, and redis as managed services, but that postgres wasn't started:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">mysql      started dbaron ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">postgresql none</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">redis      started dbaron ~/Library/LaunchAgents/homebrew.mxcl.redis.plist</span></span></code></pre>\n<p class=\"markdown-para\">So the fix should be simple enough, just start it with the <code>start</code> option of the <code>services</code> subcommand:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">brew services start postgresql</span></span></code></pre>\n<p class=\"markdown-para\">The output of this command showed it was successful:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">==&gt; Successfully started `postgresql` (label: homebrew.mxcl.postgresql)</span></span></code></pre>\n<h2 class=\"markdown-subtitle\" id=\"the-problem\" style=\"position:relative;\"><a href=\"#the-problem\" aria-label=\"the problem permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Problem</h2>\n<p class=\"markdown-para\">But before pressing the <a href=\"https://www.staples.com/Staples-Easy-Button/product_606396\" class=\"markdown-link\">easy</a> button for finding such a quick fix, I wanted to check that a connection worked. PostgreSQL comes with <a href=\"https://www.postgresql.org/docs/current/app-psql.html\" class=\"markdown-link\">psql</a>, a command line tool to interact with the database. You can connect to the default <code>postgres</code> database as follows:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">psql -d postgres</span></span></code></pre>\n<p class=\"markdown-para\">Unfortunately, the output of this command showed the database was not running:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">psql: error: connection to server on socket &quot;/tmp/.s.PGSQL.5432&quot; failed: No such file or directory</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Is the server running locally and accepting connections on that socket?</span></span></code></pre>\n<p class=\"markdown-para\">A further check with <code>lsof</code> (list open files belonging to active processes) confirmed there was no process listening on port 5432, which is the default port used by postgresql. The <code>-nP</code> options indicate not to include host and port names in the Node Name column and <code>+c 15</code> increases the command width display, which otherwise defaults to 9:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">lsof -nP +c 15 </span><span class=\"mtk7\">|</span><span class=\"mtk1\"> grep LISTEN</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># no output for 5432</span></span></span></code></pre>\n<p class=\"markdown-para\">So much for the easy button.</p>\n<h2 class=\"markdown-subtitle\" id=\"debugging\" style=\"position:relative;\"><a href=\"#debugging\" aria-label=\"debugging permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Debugging</h2>\n<p class=\"markdown-para\">The <code>info</code> command can be used to get more detailed information about a specific service. Running it for <code>postgresql</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">brew services info postgresql</span></span></code></pre>\n<p class=\"markdown-para\">The output shows that the <code>postgresql</code> service is loaded, but not running:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">postgresql (homebrew.mxcl.postgresql)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Running: ✘</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Loaded: ✓</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Schedulable: ✘</span></span></code></pre>\n<p class=\"markdown-para\">The <code>brew services list</code> command can be used again, but this time, instead of showing <code>none</code> for <code>postgresql</code>, it shows an error status and path to a plist file (because of the earlier attempt to start it which failed):</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ brew services list</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Name       Status     User   File</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">mysql      started    dbaron ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">postgresql error  256 dbaron ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">redis      started    dbaron ~/Library/LaunchAgents/homebrew.mxcl.redis.plist</span></span></code></pre>\n<p class=\"markdown-para\">The <code>.plist</code> files contain service configuration information. Let's take a look at the configuration for the postgresql service:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">cat ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist</span></span></code></pre>\n<p class=\"markdown-para\">The output shows that it's an xml file:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"xml\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;?</span><span class=\"mtk7\">xml</span><span class=\"mtk5\"> version</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;1.0&quot;</span><span class=\"mtk5\"> encoding</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;UTF-8&quot;</span><span class=\"mtk1\">?&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;!</span><span class=\"mtk7\">DOCTYPE</span><span class=\"mtk1\"> </span><span class=\"mtk10\">plist</span><span class=\"mtk1\"> PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">plist</span><span class=\"mtk1\"> </span><span class=\"mtk5\">version</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;1.0&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">dict</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;KeepAlive&lt;/</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">true</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;Label&lt;/</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;homebrew.mxcl.postgresql&lt;/</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;ProgramArguments&lt;/</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">array</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;/usr/local/opt/postgresql/bin/postgres&lt;/</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;-D&lt;/</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      &lt;</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;/usr/local/var/postgres&lt;/</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">array</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;RunAtLoad&lt;/</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">true</span><span class=\"mtk1\"> /&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;StandardErrorPath&lt;/</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;/usr/local/var/log/postgres.log&lt;/</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;StandardOutPath&lt;/</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;/usr/local/var/log/postgres.log&lt;/</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;WorkingDirectory&lt;/</span><span class=\"mtk7\">key</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;/usr/local&lt;/</span><span class=\"mtk7\">string</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">dict</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">plist</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Notice that one of the values is a path to an error file (actually its the same file used for both standard out and standard error) - <code>/usr/local/var/log/postgres.log</code>. Let's take a look at this file to see if it has any clues as to why postgresql isn't starting:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ cat /usr/local/var/log/postgres.log</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2022-06-16 15:15:04.193 EDT [69330] FATAL:  database files are incompatible with server</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">2022-06-16 15:15:04.193 EDT [69330] DETAIL:  The data directory was initialized by PostgreSQL version 13, which is not compatible with this version 14.3.</span></span></code></pre>\n<p class=\"markdown-para\">Aha, a version incompatibility error! To confirm the version of the currently installed service:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ psql --version</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">psql (PostgreSQL) 14.3</span></span></code></pre>\n<h2 class=\"markdown-subtitle\" id=\"solution\" style=\"position:relative;\"><a href=\"#solution\" aria-label=\"solution permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solution</h2>\n<p class=\"markdown-para\">When the Postgres data directory was first created, I must have been on older Postgres version 13, and at some point updated the brew formula to 14. This version mismatch makes postgresql fail to start. Fortunately, there's a homebrew <a href=\"https://github.com/Homebrew/homebrew-core/blob/master/cmd/postgresql-upgrade-database.rb\" class=\"markdown-link\">command</a> that can be run to migrate the data from a previous major version:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">brew postgresql-upgrade-database</span></span></code></pre>\n<p class=\"markdown-para\">There will be a lot of output from this command, but here are some highlights of what it does:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">brew install postgresql@13</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Upgrading postgresql data from 13 to 14..</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Moving postgresql data from /usr/local/var/postgres to /usr/local/var/postgres.old...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Migrating and upgrading data...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">==&gt; Upgraded postgresql data from 13 to 14!</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">==&gt; Your postgresql 13 data remains at /usr/local/var/postgres.old</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">==&gt; Successfully started `postgresql` (label: homebrew.mxcl.postgresql)</span></span></code></pre>\n<p class=\"markdown-para\">It installs the previous major version of postgresql (in my case, I was on 14 so previous major was 13), migrates, backs up the current data directory to <code>.old</code>, then migrates the data to the new major version. The idea being if something goes wrong with data migration, you can still access your old data with the previous major.</p>\n<p class=\"markdown-para\">Finally this command also starts up the current/latest version of the service. Let's confirm its started:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ brew services list</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Name       Status     User   File</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">mysql      started    dbaron ~/Library/LaunchAgents/homebrew.mxcl.mysql.plist</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">postgresql started    dbaron ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">redis      started    dbaron ~/Library/LaunchAgents/homebrew.mxcl.redis.plist</span></span></code></pre>\n<p class=\"markdown-para\">And re-run the <code>lsof</code> command from earlier to confirm there's a postgres process listening on 5432:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">lsof -nP +c 15 </span><span class=\"mtk7\">|</span><span class=\"mtk1\"> grep LISTEN</span></span></span></code></pre>\n<p class=\"markdown-para\">Output includes postgres, so far so good:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">COMMAND          PID   USER   FD      TYPE             DEVICE  SIZE/OFF    NODE NAME</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">postgres        1788 dbaron    7u     IPv6 0x696b8fad0ce2d7bd       0t0    TCP [::1]:5432 (LISTEN)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span></code></pre>\n<p class=\"markdown-para\">Last check is to ensure we can connect:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">$ psql -d postgres</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">psql (14.2)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Type &quot;help&quot; for help.</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">postgres=#</span></span></code></pre>\n<p class=\"markdown-para\">This time the <code>psql</code> connection command goes to the <code>postgres</code> prompt, which means connection could be established, success!</p>\n<h2 class=\"markdown-subtitle\" id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p class=\"markdown-para\">This post has walked through how to fix an issue with the postgresql service not starting on a Mac when managed by homebrew. In general when debugging homebrew services, use the <code>brew services list</code> command to get information about managed services and their plist files which contain configuration for the service. Then inspect the contents of the plist file to see if it specifies any log files. Then check the log file(s) for reason why service won't start and fix that.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk10 { color: #FD971F; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","fields":{"slug":"/blog/homebrew-postgresql-service-not-starting-resolved/"}}},{"node":{"id":"ba57bc3c-86eb-5750-ac7d-d97b060b81dd","frontmatter":{"title":"SQLite Varchar Surprise","date":"September 2022","category":"rails"},"excerpt":"I recently completed the Getting Started with Rails 6 course on Pluralsight and ran into a surprise with the use of SQLite and string column…","html":"<p class=\"markdown-para\">I recently completed the <a href=\"https://app.pluralsight.com/library/courses/getting-started-ruby-rails/table-of-contents\" class=\"markdown-link\">Getting Started with Rails 6</a> course on Pluralsight and ran into a surprise with the use of SQLite and string column lengths. SQLite is a popular choice in Rails courses as its the default database when starting an app with the <code>rails new...</code> command and very easy to use. However, I was surprised by how it handles string column lengths as this post will explain.</p>\n<h2 class=\"markdown-subtitle\" id=\"setup\" style=\"position:relative;\"><a href=\"#setup\" aria-label=\"setup permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setup</h2>\n<p class=\"markdown-para\">The course uses Ruby 2.7.2 and Rails 6.1.4 to build a Wiki application where users can create, view, and edit posts. It also assumes that <a href=\"https://formulae.brew.sh/formula/sqlite\" class=\"markdown-link\">sqlite</a> is installed on the local machine. There's a single model <code>WikiPost</code> to persist the author, title, and description.</p>\n<p class=\"markdown-para\">To get started, the <code>scaffold</code> option of the <code>generate</code> command is used to generate not just a migration for the model, but also the model class, controller, views, view helpers, styles, routes and tests. For the purpose of this post, we will only be focusing on the migration and model.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">bin/rails generate scaffold WikiPost title:string description:string author:string</span></span></code></pre>\n<p class=\"markdown-para\">Generates this migration:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">CreateWikiPosts</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">ActiveRecord::Migration</span><span class=\"mtk1\">[</span><span class=\"mtk4\">6.1</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">change</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    create_table </span><span class=\"mtk4\">:wiki_posts</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |t|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.string </span><span class=\"mtk4\">:title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.string </span><span class=\"mtk4\">:description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.string </span><span class=\"mtk4\">:author</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.timestamps</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">And this model:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">WikiPost</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">ApplicationRecord</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">After running the migration with <code>bin/rails db:migrate</code>, we can use the <a href=\"https://www.sqlite.org/cli.html\" class=\"markdown-link\">sqlite3</a> command line tool that ships with SQLite to see what schema got created for this table. To work with any SQLite database from the terminal, run <code>sqlite3</code> passing in the path to the database file. In a Rails project, it will be in <code>db/{env}.sqlite3</code>. To open the development database, the command is:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># cd to the project root</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">sqlite3 db/development.sqlite3</span></span></span></code></pre>\n<p class=\"markdown-para\">From the sqlite prompt, the <code>.schema table_name</code> command can be used to display the schema for the given table name. By default, the display is all on line line which is hard to read. Passing in the <code>--indent</code> option produces more human readable output:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"sql\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">sqlite</span><span class=\"mtk7\">&gt;</span><span class=\"mtk1\"> .</span><span class=\"mtk7\">schema</span><span class=\"mtk1\"> wiki_posts </span><span class=\"mtk3\">--indent</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">CREATE</span><span class=\"mtk1\"> </span><span class=\"mtk7\">TABLE</span><span class=\"mtk1\"> </span><span class=\"mtk7\">IF</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">EXISTS</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;wiki_posts&quot;</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;id&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">integer</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PRIMARY</span><span class=\"mtk1\"> </span><span class=\"mtk7\">KEY</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;created_at&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">datetime</span><span class=\"mtk1\">(</span><span class=\"mtk4\">6</span><span class=\"mtk1\">) </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;updated_at&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">datetime</span><span class=\"mtk1\">(</span><span class=\"mtk4\">6</span><span class=\"mtk1\">) </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;title&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">varchar</span><span class=\"mtk1\"> DEFAULT </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;description&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">varchar</span><span class=\"mtk1\"> DEFAULT </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;author&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">varchar</span><span class=\"mtk1\"> DEFAULT </span><span class=\"mtk7\">NULL</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">);</span></span></span></code></pre>\n<h2 class=\"markdown-subtitle\" id=\"limit-length\" style=\"position:relative;\"><a href=\"#limit-length\" aria-label=\"limit length permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Limit Length</h2>\n<p class=\"markdown-para\">After trying out the generated UI and adding some styles, it's determined that it would be better to limit the title length. In the course it gets set to 50 characters, but for easier demonstration purposes, I will use 10 here. To modify the table definition, we first need to generate a new migration:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">bin/rails generate migration update_wiki_post_title</span></span></code></pre>\n<p class=\"markdown-para\">We use the <code>change_column</code> method in the migration file to change the <code>title</code> column in <code>wiki_posts</code> table to have a max length of 10 characters. Note the use of <code>up</code> and <code>down</code> methods rather than <code>change</code> because otherwise if running a rollback, Rails won't know what the previous state of the column was to undo this change:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">UpdateWikiPostTitle</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">ActiveRecord::Migration</span><span class=\"mtk1\">[</span><span class=\"mtk4\">6.1</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">up</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    change_column </span><span class=\"mtk4\">:wiki_posts</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:title</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:string</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:limit</span><span class=\"mtk1\"> =&gt; </span><span class=\"mtk4\">10</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">down</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    change_column </span><span class=\"mtk4\">:wiki_posts</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:title</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">After running this migration with <code>bin/rails db:migrate</code>, run the <code>sqlite3</code> command line tool again to verify the <code>wiki_posts</code> table schema has been updated to limit the title length:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"sql\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">sqlite</span><span class=\"mtk7\">&gt;</span><span class=\"mtk1\"> .</span><span class=\"mtk7\">schema</span><span class=\"mtk1\"> wiki_posts </span><span class=\"mtk3\">--indent</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">CREATE</span><span class=\"mtk1\"> </span><span class=\"mtk7\">TABLE</span><span class=\"mtk1\"> </span><span class=\"mtk7\">IF</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">EXISTS</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;wiki_posts&quot;</span><span class=\"mtk1\">(</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;id&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">integer</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\"> </span><span class=\"mtk7\">PRIMARY</span><span class=\"mtk1\"> </span><span class=\"mtk7\">KEY</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;created_at&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">datetime</span><span class=\"mtk1\">(</span><span class=\"mtk4\">6</span><span class=\"mtk1\">) </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;updated_at&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">datetime</span><span class=\"mtk1\">(</span><span class=\"mtk4\">6</span><span class=\"mtk1\">) </span><span class=\"mtk7\">NOT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;title&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">varchar</span><span class=\"mtk1\">(</span><span class=\"mtk4\">10</span><span class=\"mtk1\">) DEFAULT </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;description&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">varchar</span><span class=\"mtk1\"> DEFAULT </span><span class=\"mtk7\">NULL</span><span class=\"mtk1\">,</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk6\">&quot;author&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">varchar</span><span class=\"mtk1\"> DEFAULT </span><span class=\"mtk7\">NULL</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">);</span></span></span></code></pre>\n<p class=\"markdown-para\">Notice the <code>title</code> column now has a column type of <code>varchar(10)</code> whereas before it was simply <code>varchar</code>. It would be expected that now any rows saved to the table can have at most 10 characters for the title.</p>\n<h2 class=\"markdown-subtitle\" id=\"the-problem\" style=\"position:relative;\"><a href=\"#the-problem\" aria-label=\"the problem permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Problem</h2>\n<p class=\"markdown-para\">Let's try this out using the <code>WikiPost</code> model in a Rails console <code>bin/rails console</code>, and try to save some invalid data, that is, a model instance with a title longer than 10 characters:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Create a new post with a title of 11 characters</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">WikiPost</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;abcdefghijk&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Try to save it to the database</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post.save</span></span></span></code></pre>\n<p class=\"markdown-para\">I was expecting an error at this point, however, the output from saving the model shows that it was successfully saved to the database:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">  TRANSACTION (0.1ms)  begin transaction</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  WikiPost Create (3.3ms)  INSERT INTO &quot;wiki_posts&quot; (&quot;created_at&quot;, &quot;updated_at&quot;, &quot;title&quot;) VALUES (?, ?, ?)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  [[&quot;created_at&quot;, &quot;2022-06-15 11:14:59.474262&quot;], [&quot;updated_at&quot;, &quot;2022-06-15 11:14:59.474262&quot;],</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  [&quot;title&quot;, &quot;abcdefghijk&quot;]]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  TRANSACTION (1.4ms)  commit transaction</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">=&gt; true</span></span></code></pre>\n<p class=\"markdown-para\">Me:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 90.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAMEBQEG/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAG45Bl1kSKmeT6EYf/EABwQAQACAgMBAAAAAAAAAAAAAAEAAgMREiEiMf/aAAgBAQABBQI1F1MbyqJUlFrXH3fG+j5//8QAFxEAAwEAAAAAAAAAAAAAAAAAAQIQMf/aAAgBAwEBPwFRBk//xAAXEQEAAwAAAAAAAAAAAAAAAAABABAR/9oACAECAQE/AVm3/8QAHhAAAQMEAwAAAAAAAAAAAAAAAAERIQIDEDEyUaH/2gAIAQEABj8C1JGxx1I9OJU/SFzH/8QAHBAAAwACAwEAAAAAAAAAAAAAAAERMWEhQXFR/9oACAEBAAE/IbPbnRepawbnRvVL1S+GWr9oVUmFUJOZBkK+LNGHw//aAAwDAQACAAMAAAAQbDBC/8QAGBEBAAMBAAAAAAAAAAAAAAAAAQAQIRH/2gAIAQMBAT8QBOsTcu//xAAXEQEBAQEAAAAAAAAAAAAAAAAAAREx/9oACAECAQE/EKRleq//xAAeEAEAAwACAgMAAAAAAAAAAAABABEhMWFxsVGBkf/aAAgBAQABPxA7kqgTjGe4a0y6jzo36lehLBHa6/Ki62XppWNndPM34lE5z5meiCl0I3OLI1X24m1daep//9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sqlite surprise huh\"\n        title=\"sqlite surprise huh\"\n        src=\"/static/637fc118fd985e597fcbf7c441b3cde2/066f9/sqlite-surprise-huh.jpg\"\n        srcset=\"/static/637fc118fd985e597fcbf7c441b3cde2/e07e9/sqlite-surprise-huh.jpg 200w,\n/static/637fc118fd985e597fcbf7c441b3cde2/066f9/sqlite-surprise-huh.jpg 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Well that was unexpected! What's the point of creating and running a migration to limit a column length if Rails ignores it and goes ahead and saves data that violates the limit?</p>\n<p class=\"markdown-para\">My first thought was maybe there was an issue with the combination of the Rails and SQLite versions used in the course. To investigate this, we can try bypassing Rails and use  <code>sqlite3</code> to try a direct insert into the database with the same too long title:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"sql\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- Try to save invalid data</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">INSERT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">INTO</span><span class=\"mtk1\"> wiki_posts(title, created_at, updated_at)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">VALUES</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;abcdefghijk&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk9\">CURRENT_TIMESTAMP</span><span class=\"mtk1\">, </span><span class=\"mtk9\">CURRENT_TIMESTAMP</span><span class=\"mtk1\">);</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- Returns control to the prompt with no error, this means it worked.</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- Verify</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">SELECT</span><span class=\"mtk1\"> title, created_at, updated_at</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">FROM</span><span class=\"mtk1\"> wiki_posts</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">ORDER BY</span><span class=\"mtk1\"> created_at </span><span class=\"mtk7\">DESC</span><span class=\"mtk1\"> </span><span class=\"mtk7\">LIMIT</span><span class=\"mtk1\"> </span><span class=\"mtk4\">1</span><span class=\"mtk1\">;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- Outputs: abcdefghijk|2022-06-16 10:54:27|2022-06-16 10:54:27</span></span></span></code></pre>\n<p class=\"markdown-para\">Surprisingly, the database allows data that violates the length constraint to be inserted. So this isn't a Rails problem, it seems to be a problem with SQLite. I did a little digging, and it turns out SQLite doesn't enforce varchar length limits. From the <a href=\"https://www.hwaci.com/sw/sqlite/faq.html\" class=\"markdown-link\">FAQ</a>:</p>\n<blockquote class=\"markdown-blockquote\">\n<p class=\"markdown-para\">SQLite does not enforce the length of a VARCHAR. You can declare a VARCHAR(10) and SQLite will be happy to store a 500-million character string there. And it will keep all 500-million characters intact. Your content is never truncated. SQLite understands the column type of \"VARCHAR(N)\" to be the same as \"TEXT\", regardless of the value of N.</p>\n</blockquote>\n<p class=\"markdown-para\">Me:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD8ElEQVQ4yx2O229TBQCHz5/gX+Az8cUnMVFjYuIbYGKCAQlRH0iUxESjiYC7wBCYQ4Zc57otbHSOjW7dpRfW9bb2dL2cnbbr6e303m5d293aXVpYIprPjIcvv7fv9wm3AmZ6Qg7+UNz0RL30JGTuplf4qxBjtJzkeTXDWDXLaC3PXKOMZ38Vz7qMmDQTiTxDDQ6w7LmPU9QwL08h3Asv8Cgu8jgV4GFK5mFOob+UYGRdZWozi6lexNBYY2a3jHFvHdtWAlfajC/QR0rsoua9xJrjR+ILHfh9wwiPlQX6VZHB7DKaXBhNQWGwFENbUdFvZ1nYW8XRrGJrVbG0qlirIbyBPuTZiyT056jZz1J3nmfVeQklqEUYSth5kvEwkpcYKYYZWYsxupljoqoy90ZYwnlQxvNvA+fuGo6NKN7EJJLrFpK9nZi3jUy4m2hyFH/eiTBZ9DFdCWLYUDBvJVhoZBk33MUweYOlnSz+wwoRWvgKAaz2CeRGHn9tCU/WwFLGiC9jIFCysVSTWKyGEea3FRx7Ku79NCtsYku46bvwLsbek/hjBtKAuGxBe/U80oqDzOEqUkGHQ/4Tq9SPLTjMYtqIeyOEazuOYN9LIbayLL8u495Q+PniZ1w4cRz9L++THDuDbOpl7vpJXLanlDkgUxdZCbfjMZ3GojvNgvE7RLkPb8WPWFcRnAdZxGaOCHXua67y9XtvcfnU20xd+YBdzXESHe/gfHAGl6gjvhEmlR+kFPuenPQlEdc5IsFOoqsGgo0YS7tphMVmDvFlgcDrKr03v+KnT45x4/NjjLd/yGLXR4g3PuXpr6dw6HvwxJ2EFA3FVBv5bCdquhu1OkuilSTYKuBpJBFs+xns+xnEf2qMWIf49sTHXD5/Fs/wNyw++gI56yO2t044L7GU9SMVzIRK4ywfsTZLqBEi9KqIv5nHtRNHmNqMc8TcQRFtyEhH9w/cvnOVFxO/Y9H9RvBllTiHKByy8t8WgVYadyOGazuMayeC+yimmce9m8a2FUXoz8sMFEMMlRU0aR/3Aia6ZrRoTEPY/E8IbERxv6pgbpYxHZQxNcuY9wvM11Xmd5Jv1l5P4t6OYa2EELqjNu4knfSqLm6nPPTkJHrzfgZzfmwlLx7VgaEoo1tfYaYcQVeJMl6LMF0NY6yEMK7LWMrLuMo+LAU3Qpt/nK7gFNfkSdqk51yWnnNF1nEzpEOrzDCnmtHGDQzHjUwmX6BV5xnMWBnLLzKTd6PPONGnbRjSFqaSJoT2wN90SmN0SKN0Bie4pui5Hp3mlqLnXlRPf2ya/rieIXUarTrLQELPg5iOgeQc4xkrEykrY+o8z46OE0b+B1JSxHP359lCAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sqlite surprise wow\"\n        title=\"sqlite surprise wow\"\n        src=\"/static/f68568ad8496dee23c19b793991992c4/5a190/sqlite-surprise-wow.png\"\n        srcset=\"/static/f68568ad8496dee23c19b793991992c4/772e8/sqlite-surprise-wow.png 200w,\n/static/f68568ad8496dee23c19b793991992c4/e17e5/sqlite-surprise-wow.png 400w,\n/static/f68568ad8496dee23c19b793991992c4/5a190/sqlite-surprise-wow.png 800w,\n/static/f68568ad8496dee23c19b793991992c4/f96df/sqlite-surprise-wow.png 849w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"a-solution\" style=\"position:relative;\"><a href=\"#a-solution\" aria-label=\"a solution permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A Solution</h2>\n<p class=\"markdown-para\">If the database won't enforce the column length limit, we could instead enhance the <code>WikiPost</code> model to use the <a href=\"https://guides.rubyonrails.org/active_record_validations.html#length\" class=\"markdown-link\">length</a> validator from ActiveRecord as follows:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">WikiPost</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">ApplicationRecord</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  validates </span><span class=\"mtk4\">:title</span><span class=\"mtk1\">, </span><span class=\"mtk4\">length:</span><span class=\"mtk1\"> { </span><span class=\"mtk4\">maximum:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">10</span><span class=\"mtk1\"> }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">Let's see how this behaves in the console (start with <code>bin/rails c</code>):</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Create a new post with a title of 11 characters</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">WikiPost</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;abcdefghijk&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Try to save it to the database - this time it fails!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post.save</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># =&gt; false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Is the object valid? No!</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post.valid?</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># =&gt; false</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Show the error</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post.errors[</span><span class=\"mtk4\">:title</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># =&gt; [&quot;is too long (maximum is 10 characters)&quot;]</span></span></span></code></pre>\n<p class=\"markdown-para\">However, this will only be enforced via the Rails app. There is no data integrity at database level. Invalid data could still be inserted by someone with access to the database.</p>\n<h2 class=\"markdown-subtitle\" id=\"postgres-comparison\" style=\"position:relative;\"><a href=\"#postgres-comparison\" aria-label=\"postgres comparison permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Postgres Comparison</h2>\n<p class=\"markdown-para\">I was curious to see how <a href=\"https://www.postgresql.org/\" class=\"markdown-link\">Postgres</a> compares in enforcing length limits on string columns. So I scaffolded another project using Postgres instead of SQLite by passing <code>-d=postgresql</code> to the <code>rails new...</code> and setup the same <code>WikiPost</code> model and migration.</p>\n<p class=\"markdown-para\">Quick reminder, here is the original migration that creates the <code>wiki_posts</code> table, and the simple model class with no ActiveRecord validations:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">CreateWikiPosts</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">ActiveRecord::Migration</span><span class=\"mtk1\">[</span><span class=\"mtk4\">6.1</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">change</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    create_table </span><span class=\"mtk4\">:wiki_posts</span><span class=\"mtk1\"> </span><span class=\"mtk7\">do</span><span class=\"mtk1\"> |t|</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.string </span><span class=\"mtk4\">:title</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.string </span><span class=\"mtk4\">:description</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.string </span><span class=\"mtk4\">:author</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      t.timestamps</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"14\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">WikiPost</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">ApplicationRecord</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">First let's see the schema that got created for this table. Connect to the Postgres database using the <a href=\"https://www.postgresql.org/docs/current/app-psql.html\" class=\"markdown-link\">psql</a> command line tool. For example, if the database name is <code>wiki</code> and Postgres is running locally:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"15\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">psql -U wiki -d wiki</span></span></span></code></pre>\n<p class=\"markdown-para\">At the database prompt, Use the <code>\\d</code> command to view a table schema. The same initial migration to create the WikiPost model results in the following table in Postgres. Notice the <code>title</code> column is of type <code>character varying</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"16\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">wiki=&gt; \\d wiki_posts</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                                          Table &quot;public.wiki_posts&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   Column    |              Type              | Collation | Nullable |                Default</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-------------+--------------------------------+-----------+----------+----------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> id          | bigint                         |           | not null | nextval(&#39;wiki_posts_id_seq&#39;::regclass)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> title       | character varying              |           |          |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> description | character varying              |           |          |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> author      | character varying              |           |          |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> created_at  | timestamp(6) without time zone |           | not null |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> updated_at  | timestamp(6) without time zone |           | not null |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Indexes:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;wiki_posts_pkey&quot; PRIMARY KEY, btree (id)</span></span></code></pre>\n<p class=\"markdown-para\">Now apply the migration that limits the <code>title</code> length to 10 characters:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"17\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">UpdateWikiPostTitle</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">ActiveRecord::Migration</span><span class=\"mtk1\">[</span><span class=\"mtk4\">6.1</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">up</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    change_column </span><span class=\"mtk4\">:wiki_posts</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:title</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:string</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:limit</span><span class=\"mtk1\"> =&gt; </span><span class=\"mtk4\">10</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">down</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    change_column </span><span class=\"mtk4\">:wiki_posts</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:title</span><span class=\"mtk1\">, </span><span class=\"mtk4\">:string</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">And check the schema again using <code>psql</code>. Notice the <code>title</code> column now has a data type of <code>character varying(10)</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"18\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">hello=&gt; \\d wiki_posts</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">                                          Table &quot;public.wiki_posts&quot;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   Column    |              Type              | Collation | Nullable |                Default</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">-------------+--------------------------------+-----------+----------+----------------------------------------</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> id          | bigint                         |           | not null | nextval(&#39;wiki_posts_id_seq&#39;::regclass)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> title       | character varying(10)          |           |          |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> description | character varying              |           |          |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> author      | character varying              |           |          |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> created_at  | timestamp(6) without time zone |           | not null |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"> updated_at  | timestamp(6) without time zone |           | not null |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Indexes:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">    &quot;wiki_posts_pkey&quot; PRIMARY KEY, btree (id)</span></span></code></pre>\n<p class=\"markdown-para\">Let's exercise the model in a Rails console. Remember, there are no ActiveRecord validations defined on the model.</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"19\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Create a new post with a title of 11 characters</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk9 mtki\">WikiPost</span><span class=\"mtk1\">.</span><span class=\"mtk7\">new</span><span class=\"mtk1\">(</span><span class=\"mtk4\">title:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;abcdefghijk&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># Try to save it to the database</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">a_post.save</span></span></span></code></pre>\n<p class=\"markdown-para\">Unlike with SQLite, the save fails when using Postgres. As shown in the output below, the transaction gets rolled back because the string title length violates the specified limit of 10:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"20\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">   (4.4ms)  BEGIN</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">  WikiPost Create (7.4ms)  INSERT INTO &quot;wiki_posts&quot; (&quot;title&quot;, &quot;created_at&quot;, &quot;updated_at&quot;) VALUES ($1, $2, $3) RETURNING &quot;id&quot;  [[&quot;title&quot;, &quot;abcdefghijk&quot;], [&quot;created_at&quot;, &quot;2022-06-15 11:11:05.725757&quot;], [&quot;updated_at&quot;, &quot;2022-06-15 11:11:05.725757&quot;]]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">   (1.9ms)  ROLLBACK</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Traceback (most recent call last):</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">        1: from (irb):4</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">ActiveRecord::ValueTooLong (PG::StringDataRightTruncation: ERROR:  value too long for type character varying(10))</span></span></code></pre>\n<p class=\"markdown-para\">Much better (and less surprising!). This is the behaviour I would expect from a table column that has a length limit.</p>\n<h2 class=\"markdown-subtitle\" id=\"mysql-comparison\" style=\"position:relative;\"><a href=\"#mysql-comparison\" aria-label=\"mysql comparison permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MySQL Comparison</h2>\n<p class=\"markdown-para\">For completeness sake, I also did a quick check on how MySQL handles string column length limits. Just focusing on direct database access as we've already learned this is not an issue with Rails. I'm using the <a href=\"https://dev.mysql.com/doc/refman/8.0/en/mysql.html\" class=\"markdown-link\">MySQL Command-Line client</a>.</p>\n<p class=\"markdown-para\">Running the two migrations to create the <code>wiki_posts</code> table and modify the <code>title</code> column to have a length of 10 results in the following table schema created. Notice the <code>title</code> column has a data type of <code>varchar(10)</code>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"21\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">mysql -u root -D wiki</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">mysql&gt; DESCRIBE wiki_posts;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+-------------+--------------+------+-----+---------+----------------+</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">| Field       | Type         | Null | Key | Default | Extra          |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+-------------+--------------+------+-----+---------+----------------+</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">| id          | bigint(20)   | NO   | PRI | NULL    | auto_increment |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">| title       | varchar(10)  | YES  |     | NULL    |                |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">| description | varchar(255) | YES  |     | NULL    |                |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">| author      | varchar(255) | YES  |     | NULL    |                |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">| created_at  | datetime     | NO   |     | NULL    |                |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">| updated_at  | datetime     | NO   |     | NULL    |                |</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">+-------------+--------------+------+-----+---------+----------------+</span></span></code></pre>\n<p class=\"markdown-para\">And trying to insert a title that's greater than 10 characters long results in an error, which is what we would expect:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"sql\" data-index=\"22\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">mysql</span><span class=\"mtk7\">&gt;</span><span class=\"mtk1\"> </span><span class=\"mtk7\">INSERT</span><span class=\"mtk1\"> </span><span class=\"mtk7\">INTO</span><span class=\"mtk1\"> wiki_posts(title, created_at, updated_at)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">VALUES</span><span class=\"mtk1\">(</span><span class=\"mtk6\">&quot;abcdefghijk&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk9\">CURRENT_TIMESTAMP</span><span class=\"mtk1\">(), </span><span class=\"mtk9\">CURRENT_TIMESTAMP</span><span class=\"mtk1\">());</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\">-- ERROR 1406 (22001): Data too long for column &#39;title&#39; at row 1</span></span></span></code></pre>\n<aside class=\"markdown-aside\">\nThroughout this post, I've been using command line tools provided by the databases such as <a class=\"markdown-link\" href=\"https://www.sqlite.org/cli.html\">sqlite3</a>, <a class=\"markdown-link\" href=\"https://www.postgresql.org/docs/current/app-psql.html\">psql</a>, and <a class=\"markdown-link\" href=\"https://dev.mysql.com/doc/refman/8.0/en/mysql.html\">mysql</a>. This isn't usually part of Rails courses or tutorials as all access to the database is handled by ActiveRecord. However, I started my career before <a class=\"markdown-link\" href=\"https://stackoverflow.com/a/1279678/3991687\">ORMs</a> were a thing, and have developed the habit of always going one level deeper than the application to check what's going on directly in the database.\n</aside>\n<h2 class=\"markdown-subtitle\" id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p class=\"markdown-para\">This post has covered some troubleshooting techniques you can use when getting an unexpected result from ActiveRecord by interacting directly with the database. SQLite may be an ok choice of database for a demo/learning app or for something where data integrity is not such a big concern. But otherwise consider something more robust such as Postgres or MySQL.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk9 { color: #66D9EF; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","fields":{"slug":"/blog/sqlite-varchar-surprise/"}}},{"node":{"id":"31e8cce4-5682-5c17-8f35-c677650c8622","frontmatter":{"title":"Capybara Webdriver Element not Clickable Resolved","date":"August 2022","category":"rails"},"excerpt":"This post will walk you through how to troubleshoot the \"Element is not clickable at point... Other element would receive the click\" error…","html":"<p class=\"markdown-para\">This post will walk you through how to troubleshoot the \"Element is not clickable at point... Other element would receive the click\" error when running Selenium based tests with Capybara. I encountered this recently when a feature test that had been passing for years, suddenly started breaking when running as part of the Continuous Integration checks on a project I'm working on, which is run with a Github Actions workflow.</p>\n<h2 class=\"markdown-subtitle\" id=\"test-failure\" style=\"position:relative;\"><a href=\"#test-failure\" aria-label=\"test failure permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Test Failure</h2>\n<p class=\"markdown-para\">This was the error message:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">element click intercepted:</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Element &lt;label class=&quot;forward-toggle&quot;&gt;...&lt;/label&gt; is not clickable at point (700, 225).</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Other element would receive the click: &lt;div class=&quot;row&quot;&gt;...&lt;/div&gt;</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">(Session info: headless chrome=101.0.4951.54)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">(Selenium::WebDriver::Error::ElementClickInterceptedError)</span></span></code></pre>\n<p class=\"markdown-para\">The error message was coming from this line in the test:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">find(</span><span class=\"mtk6\">&quot;label&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;FORWARDING&quot;</span><span class=\"mtk1\">).click</span></span></span></code></pre>\n<p class=\"markdown-para\">Which means find an html element <code>&#x3C;label>...&#x3C;/label></code> on the page that contains the text <code>FORWARDING</code> and click on it. The Capybara documentation has more details about the <a href=\"https://rubydoc.info/github/teamcapybara/capybara/master/Capybara/Node/Finders#find-instance_method\" class=\"markdown-link\">find</a> method.</p>\n<p class=\"markdown-para\">Here is the UI that is exercised for this test. This app allows users to manage email mailboxes and optionally update forward settings:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA30lEQVQoz52P2UrEQBBF8//fIj74ASL4IpLdhcQIwkwmu2mGLJ006RxJCAqK41JwnurWqSrj8uoay3a5NW1My8F2PDz/HvcPOK5PED5xdn6BkaQZYRiw2+2Iogghav5bD48BRnxIaNsWIQRVVdH3PVprpmn6NUqpVWi7PsZ+H5NlKXVdUxQFUsq1Oc/zyWvmLbOwSJdyvTuMLC++hrfgd/B5mZ4/hPkmXN58H+CEDFB6ohkHxNBTdA1pc6RDY3vLy/FhlQ3DwDiOP6JGRSslr21DchS81CXPZU4pO25Mizc4mBdV2QpC4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara edit forward 1\"\n        title=\"capybara edit forward 1\"\n        src=\"/static/dbe3c92d145a8cf45f9c6ad524992fce/5a190/capybara-edit-forward-1.png\"\n        srcset=\"/static/dbe3c92d145a8cf45f9c6ad524992fce/772e8/capybara-edit-forward-1.png 200w,\n/static/dbe3c92d145a8cf45f9c6ad524992fce/e17e5/capybara-edit-forward-1.png 400w,\n/static/dbe3c92d145a8cf45f9c6ad524992fce/5a190/capybara-edit-forward-1.png 800w,\n/static/dbe3c92d145a8cf45f9c6ad524992fce/c1b63/capybara-edit-forward-1.png 1200w,\n/static/dbe3c92d145a8cf45f9c6ad524992fce/29007/capybara-edit-forward-1.png 1600w,\n/static/dbe3c92d145a8cf45f9c6ad524992fce/eee07/capybara-edit-forward-1.png 1628w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">After the test clicks the forwarding toggle, the expected result is that the UI updates to allow entering an email address to forward to and saving changes:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABG0lEQVQoz52R20rDQBRF89++CIKg3yKiQqRe8IJP0qZJtWGizcWmaemEmEAl15nJloTEWqzFumExnJd9FmekM7kDbfCMx66CrqJC6Wv1vA2q9oShTnBxdQPpdWTCti04jg3btuFTiv9mTn1IhjFClmaIoghBECCOYwghwDn/M4yxuvBtPIGk6SqcOcF7EIJSWhdum0qgijvxIOmEwJu5cBwHYRhisfhAkiT11qJoaAzKslzLSqHxYsKnPkzTqg3TNEWW50uyHHGSrBiVDVwIMMG/Fo5dr/oUqx6qW7Tb1vHd6LdMp7OfhZsQzVtwhpwznOh97F6f4vD+HAcPHSgGWRa2d9iU1q3gHClnOBr2sHN5jP1bGXt3MnqE4BMnBazZfw9zkgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara edit forward 2\"\n        title=\"capybara edit forward 2\"\n        src=\"/static/f6c99222f00a6d468874ec68e0973545/5a190/capybara-edit-forward-2.png\"\n        srcset=\"/static/f6c99222f00a6d468874ec68e0973545/772e8/capybara-edit-forward-2.png 200w,\n/static/f6c99222f00a6d468874ec68e0973545/e17e5/capybara-edit-forward-2.png 400w,\n/static/f6c99222f00a6d468874ec68e0973545/5a190/capybara-edit-forward-2.png 800w,\n/static/f6c99222f00a6d468874ec68e0973545/c1b63/capybara-edit-forward-2.png 1200w,\n/static/f6c99222f00a6d468874ec68e0973545/29007/capybara-edit-forward-2.png 1600w,\n/static/f6c99222f00a6d468874ec68e0973545/5c263/capybara-edit-forward-2.png 1636w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">It was very strange that this test started failing, as the mailbox management area of the code hadn't changed in years, <em class=\"markdown-emphasis\">and</em> the test was passing when run locally on my laptop.</p>\n<p class=\"markdown-para\">At this point, those in a hurry can jump straight to the <a href=\"../capybara-selenium-webdriver-element-not-clickable#solution\" class=\"markdown-link\">solution</a>. Otherwise, read on for step by step debugging of this issue.</p>\n<h2 class=\"markdown-subtitle\" id=\"testing-stack\" style=\"position:relative;\"><a href=\"#testing-stack\" aria-label=\"testing stack permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Testing Stack</h2>\n<p class=\"markdown-para\">Before getting further into troubleshooting, a brief description of this projects' testing stack:</p>\n<p class=\"markdown-para\">This is a Rails project which uses <a href=\"http://teamcapybara.github.io/capybara/\" class=\"markdown-link\">Capybara</a> to write the feature tests. Capybara is capable of launching a real browser (either visual or headless), navigating to pages of the application, interacting with elements just like a human user would, and executing assertions to verify that expected elements or text is displayed on the page.</p>\n<p class=\"markdown-para\">Capybara requires a <a href=\"https://github.com/teamcapybara/capybara#drivers\" class=\"markdown-link\">driver</a> to control the browser. By default, it uses the <code>:rack_test</code> driver, which is fast, but only suitable for pure fullstack Rails projects (i.e. no front end JavaScript). Since this project uses React for the front end, the <a href=\"https://www.selenium.dev/projects/\" class=\"markdown-link\">Selenium</a> driver is used instead. Specifically, <code>:selenium_chrome</code> when running the tests against visual Chrome, and <code>:selenium_chrome_headless</code> for running against headless Chrome.</p>\n<p class=\"markdown-para\">In order to use Selenium with Capybara, the <a href=\"https://github.com/SeleniumHQ/selenium/tree/trunk/rb\" class=\"markdown-link\">selenium-webdriver</a> gem, which provides Ruby bindings, is required. It also requires that the browser-specific drivers are installed on the machine where the tests are running. For example, if running tests against Chrome, then Selenium expects to find <a href=\"https://chromedriver.chromium.org/\" class=\"markdown-link\">ChromeDriver</a> installed, whose version must be compatible with the version of the Chrome browser that the tests are running against. To avoid developers having to manually install and maintain browser driver versions, this project uses the <a href=\"https://github.com/titusfortner/webdrivers/\" class=\"markdown-link\">webdrivers</a> gem, which automatically installs and updates the browser drivers.</p>\n<h2 class=\"markdown-subtitle\" id=\"whats-changed\" style=\"position:relative;\"><a href=\"#whats-changed\" aria-label=\"whats changed permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What's Changed?</h2>\n<p class=\"markdown-para\">When encountering this type of situation (test fails on CI but passes locally), the first thing to do is determine what's different between CI and laptop setup. My first thought went to browser and driver versions. The code itself hadn't changed, but browser/driver versions are updated constantly so this is a likely culprit.</p>\n<p class=\"markdown-para\">Looking more closely at the error message, it indicates that Chrome 101 is being used on the Github Action runner:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">(Session info: headless chrome=101.0.4951.54)</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">...</span></span></code></pre>\n<p class=\"markdown-para\">The next question to ask is: What version is being used locally on my laptop? Recall this test was passing locally. The tests are run against a headless Chrome browser which requires a local installation of chromedriver. The <a href=\"https://github.com/titusfortner/webdrivers/\" class=\"markdown-link\">webdrivers</a> gem automatically downloads the latest version of the driver for the browser being used by the tests. This gem by default downloads drivers to the <code>~/.webdrivers</code> directory so you can check what it installed. From my laptop:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"bash\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">ls </span><span class=\"mtk7\">~</span><span class=\"mtk1\">/.webdrivers</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">chromedriver chromedriver.version</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">cat </span><span class=\"mtk7\">~</span><span class=\"mtk1\">/.webdrivers/chromedriver.version</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">100.0.4896.60</span></span></span></code></pre>\n<p class=\"markdown-para\">Aha! My local had one version (100) older of chromedriver. In order for webdriver to update to the latest, I opened Chrome on my laptop and selected from the menu: Chrome -> About Google Chrome, which triggered an update to the latest 101. Yes Chrome is auto updating, but sometimes it requires a little \"kick\" to get going to the next version.</p>\n<p class=\"markdown-para\">I then ran the test locally, and this time the webdrivers gem detected Chrome 101, and installed an updated driver for this version. This caused the test to fail, with the same error message as was displayed on CI. This was progress, at least there was consistent behaviour between my laptop and the CI system.</p>\n<h2 class=\"markdown-subtitle\" id=\"coordinates\" style=\"position:relative;\"><a href=\"#coordinates\" aria-label=\"coordinates permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Coordinates</h2>\n<p class=\"markdown-para\">The next step was to dig in more into the error, I was curious about the specific point reference:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"4\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Element &lt;label class=&quot;forward-toggle&quot;&gt;...&lt;/label&gt; is not clickable at point (700, 225).</span></span></code></pre>\n<p class=\"markdown-para\">This means the test is trying to click at <code>x</code> position <code>700</code> and <code>y</code> position <code>225</code> on the page and not finding anything clickable such as an input or link. None of the tests use co-ordinates to select elements because it would be too brittle. Any design change or layout shift would break a test that expected an element to be in a specific location on the page. So why was the test reporting an error about a specific point reference?</p>\n<p class=\"markdown-para\">To find where this point was on the page, I installed the <a href=\"https://chrome.google.com/webstore/detail/coordinates/bpflbjmbfccblbhlcmlgkajdpoiepmkd\" class=\"markdown-link\">coordinates</a> Chrome extension, navigated to the Email Forwarding area of the app and enabled the extension. Here is where point <code>(700, 225)</code> occurs on the page:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAA+UlEQVQoz52QYUvDMBCG+/9/iiD4RRD8LKPdpmy2E9zExm2W0mo30zY25PJKjqUbnSB48HJc7njuvQTXN7cIoynuRiFG4ZgVTe4RTR4O+W+F4ylm8xgXl1cI1pstVqslhBAQaYpFkqCqKvwnnpcvCFLxhqapGVKWJaSU6LSGMYZFRCCyff2btNYMnMcLBK+pQJZlDMvzHEopblprObvhtm372oc9zDgZIn57TJ4QbLbvZ9b9oAvnuCgKdtIvGsB9HZ8Cj+dRDzwFu+x72hjI7huValE0Ernco7YGszg5Amm4deDYn8nfQAb7TqFoa6y/dkh3H/g0HQN/AEwqFildb5hvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara edit forward click point\"\n        title=\"capybara edit forward click point\"\n        src=\"/static/a80a896b8dae6302f9eda236da55eaf3/5a190/capybara-edit-forward-click-point.png\"\n        srcset=\"/static/a80a896b8dae6302f9eda236da55eaf3/772e8/capybara-edit-forward-click-point.png 200w,\n/static/a80a896b8dae6302f9eda236da55eaf3/e17e5/capybara-edit-forward-click-point.png 400w,\n/static/a80a896b8dae6302f9eda236da55eaf3/5a190/capybara-edit-forward-click-point.png 800w,\n/static/a80a896b8dae6302f9eda236da55eaf3/c1b63/capybara-edit-forward-click-point.png 1200w,\n/static/a80a896b8dae6302f9eda236da55eaf3/29007/capybara-edit-forward-click-point.png 1600w,\n/static/a80a896b8dae6302f9eda236da55eaf3/c4842/capybara-edit-forward-click-point.png 1634w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Indeed this is a point of \"white space\" with nothing clickable in that area. The actual toggle that should be clicked occurs way more to the left and slightly above this point. So that explains why the test reports <code>not clickable at point (700, 225)</code>. But <em class=\"markdown-emphasis\">why</em> is the test trying to click at this specific point rather than the toggle that is selected by the test?</p>\n<h2 class=\"markdown-subtitle\" id=\"markup\" style=\"position:relative;\"><a href=\"#markup\" aria-label=\"markup permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Markup</h2>\n<p class=\"markdown-para\">To investigate further, I needed to take a closer look at the markup for the element the test is trying to click:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 214px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtklEQVQoz6WPzQqEMAyE+/4Po1APKoIe7Lk3fyqKXqQgXisq6CwNKC67uAsGQpoZ8tFheFD7vn9obF1X5HmOtm1R1zWapkHXdTSrqkJRFKQrpVCWJWl2aq1P6BXMpmlCkiQIggBhGMLzPKQiRZZliOMYvu/DcRzyoygC5xyu60JK+R14PIwxsPDHkZdlIVDf9xBCYJ5nMrZtowM7j77uV9jbD+1iIeM4YhiG0zyi3PVt5F9R/q0XGK8abVyOVQkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara toggle close up\"\n        title=\"capybara toggle close up\"\n        src=\"/static/861f16d5e6afaf0131e078382250071d/a48b3/capybara-toggle-close-up.png\"\n        srcset=\"/static/861f16d5e6afaf0131e078382250071d/772e8/capybara-toggle-close-up.png 200w,\n/static/861f16d5e6afaf0131e078382250071d/a48b3/capybara-toggle-close-up.png 214w\"\n        sizes=\"(max-width: 214px) 100vw, 214px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">This toggle control is not a native element. The implementation to achieve this effect is to use native <code>&#x3C;label>...&#x3C;/label></code> and <code>&#x3C;input type=\"checkbox\">...&#x3C;/input></code> elements, hide the input element, and then style the label to appear like a toggle. Here's the markup for this control:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"html\" data-index=\"5\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;row&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;forward-toggle&quot;</span><span class=\"mtk1\">&gt; </span><span class=\"mtk3\">&lt;!-- test tries to click this element --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;caption&quot;</span><span class=\"mtk1\">&gt;Enable Forwarding&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt; </span><span class=\"mtk3\">&lt;!-- styled as upper case --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;</span><span class=\"mtk7\">div</span><span class=\"mtk1\"> </span><span class=\"mtk5\">class</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;onoff_slide&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">input</span><span class=\"mtk1\"> </span><span class=\"mtk5\">type</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;checkbox&quot;</span><span class=\"mtk1\"> </span><span class=\"mtk5\">id</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;forward&quot;</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        &lt;</span><span class=\"mtk7\">label</span><span class=\"mtk1\"> </span><span class=\"mtk5\">for</span><span class=\"mtk1\">=</span><span class=\"mtk6\">&quot;forward&quot;</span><span class=\"mtk1\">&gt;...&lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt; </span><span class=\"mtk3\">&lt;!-- toggle styles applied here --&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    &lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  &lt;/</span><span class=\"mtk7\">label</span><span class=\"mtk1\">&gt;</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">&lt;/</span><span class=\"mtk7\">div</span><span class=\"mtk1\">&gt;</span></span></span></code></pre>\n<p class=\"markdown-para\">Recall that the test is trying to click on the <code>&#x3C;label></code> element that contains \"FORWARDING\" text. Let's see what this element looks like when selected in Chrome Developer Tools:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABD0lEQVQoz53QW0sCURSG4f3//0AXEUFEEAjWTWBWHlAzZTSbPECeyhlnb8dkhtFmnINvZNBdWS14+C4WLD6W2Ns/xBgrDMPG99+YWpJsrkA2X/yU2+3ypkC+VOHg6AShNe4JghWBvySOQmZK4izm/Gee+gNEqVLFtF26oyntvkFvbGHOPaTj/9p0scLxE5qtR0S5WiOjv3JceuH01iRVk5w356Q1m3TjG5r9tT9r2KTqiuueR/OhjahUa9u6QRgRxQlhnLCOYsIfJcTxZpsf1mG8vdHS24i7uvbnX22AZbTGDQOU72EuXbxNhN7pIi4yVziOiyUVUs12UsrGlIqBYfA0mdB5HqOPhgylRa5Y5h0ECgNuEv3oaAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara label selected in dev tools\"\n        title=\"capybara label selected in dev tools\"\n        src=\"/static/7c3300b705479696144edec3dc3142db/5a190/capybara-label-selected-in-dev-tools.png\"\n        srcset=\"/static/7c3300b705479696144edec3dc3142db/772e8/capybara-label-selected-in-dev-tools.png 200w,\n/static/7c3300b705479696144edec3dc3142db/e17e5/capybara-label-selected-in-dev-tools.png 400w,\n/static/7c3300b705479696144edec3dc3142db/5a190/capybara-label-selected-in-dev-tools.png 800w,\n/static/7c3300b705479696144edec3dc3142db/c1b63/capybara-label-selected-in-dev-tools.png 1200w,\n/static/7c3300b705479696144edec3dc3142db/29007/capybara-label-selected-in-dev-tools.png 1600w,\n/static/7c3300b705479696144edec3dc3142db/807a0/capybara-label-selected-in-dev-tools.png 1652w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Well that's a surprise, look how wide it is! But actually, this makes sense given the markup. The label is contained in a div that's styled as a row, so it's taking up the entire width of its parent container (together with some other styles in the css that make this happen).</p>\n<p class=\"markdown-para\">It was at this point that I started to wonder whether the larger than expected size of the label element might have something to do with Capybara reporting there was nothing clickable here.</p>\n<h2 class=\"markdown-subtitle\" id=\"position-and-size\" style=\"position:relative;\"><a href=\"#position-and-size\" aria-label=\"position and size permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Position and Size</h2>\n<p class=\"markdown-para\">Next I wanted to understand where the coordinates from the error message <code>is not clickable at point (700, 225)</code> fit in with respect to the label element selected by the test.</p>\n<p class=\"markdown-para\">Capybara can provide more details about a selected element using the <a href=\"https://rubydoc.info/github/teamcapybara/capybara/master/Capybara/Node/Element#rect-instance_method\" class=\"markdown-link\">rect</a> method. This method returns the <code>x</code> and <code>y</code> coordinates of the top left corner of the element, along with its width and height. Here's a temporary modification of the test to output the results of the <code>rect</code> method:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"6\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># temporary debug code to learn more about the element</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">label_elem </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> find(</span><span class=\"mtk6\">&quot;label&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;FORWARDING&quot;</span><span class=\"mtk1\">)</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">pp label_elem.rect</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># original test line that causes test to fail</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">find(</span><span class=\"mtk6\">&quot;label&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;FORWARDING&quot;</span><span class=\"mtk1\">).click</span></span></span></code></pre>\n<p class=\"markdown-para\">Here's the output in console from running the test:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"7\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">#&lt;struct Selenium::WebDriver::Rectangle</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">x=365,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">y=205.2578125,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">width=670,</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">height=40&gt;</span></span></code></pre>\n<p class=\"markdown-para\">The output is showing that the top left position of the label element occurs at <code>x</code> position <code>365</code> and <code>y</code> position <code>205</code>. Further, the element is <code>670</code> wide by <code>40</code> tall.</p>\n<aside class=\"markdown-aside\">\nThe Capybara docs link for the <a class=\"markdown-link\" href=\"https://rubydoc.info/github/teamcapybara/capybara/master/Capybara/Node/Element#rect-instance_method\">rect</a> method doesn't have any details about what this method does. It can be deduced from running it on an element as I've done above and inspecting the output. However, if you're curious as to what it actually does, see the <a class=\"markdown-link\" href=\"../capybara-selenium-webdriver-element-not-clickable/#appendix--rect-method\">Appendix</a> at the end of this post.\n</aside>\n<p class=\"markdown-para\">Here's a visual putting this all together, along with the point the text is actually clicking on:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABS0lEQVQoz4XQb0vjQBDH8bz/13LcAzkQD6HYnPbfNU2jtQ3FiJ61tmnMmt3sJmm236MJiNAHDnxght/Mk3HOf13gdly6HZeryyuGg79Mb2f4wR3eZErP7TUGN0P6f/r0rwdMJkGT+9OW5wfMwyU/fp7hROGSeRDwFD0Qzu4QyY6Tqmuwlu9qNl/gPCwjYqHZiJzXRLLLDGm+J1UVaV7xUVjid9UQxrZZo2p2hK55236QxJJrt4cTRi+cj9f89rdceBs6sxQ3zOguWm4o6d4Luvdp2y+yE8ebUaTpXLo4r6s1ZW7QSmOUQUuNlnlLaVSasXtek65jciGb3EhNoY4MpTIUUsP+gDf2cTbb+Nvf2H3N4csP64Ml31eI0hAbxSbPMBzwprc4/15WWGspioKiLE+UR1VFWVafszKaREpW4p3HJGYZv7E1iv5ozH8obQoffQVs7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara edit forward with points\"\n        title=\"capybara edit forward with points\"\n        src=\"/static/fbdda7af7dfca9c7e46c0da3a7387509/5a190/capybara-edit-forward-with-points.png\"\n        srcset=\"/static/fbdda7af7dfca9c7e46c0da3a7387509/772e8/capybara-edit-forward-with-points.png 200w,\n/static/fbdda7af7dfca9c7e46c0da3a7387509/e17e5/capybara-edit-forward-with-points.png 400w,\n/static/fbdda7af7dfca9c7e46c0da3a7387509/5a190/capybara-edit-forward-with-points.png 800w,\n/static/fbdda7af7dfca9c7e46c0da3a7387509/c1b63/capybara-edit-forward-with-points.png 1200w,\n/static/fbdda7af7dfca9c7e46c0da3a7387509/29007/capybara-edit-forward-with-points.png 1600w,\n/static/fbdda7af7dfca9c7e46c0da3a7387509/eee07/capybara-edit-forward-with-points.png 1628w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">It <em class=\"markdown-emphasis\">looks</em> like the test is clicking in the center of the element, but is it really? Some quick arithmetic shows that it is. Starting at the left, the <code>x</code> position of <code>365</code>, plus half the width (670 / 2 = 335) is 700. And starting at the top, the <code>y</code> position of <code>205</code>, plus half the height (40 / 2 = 20) is 225. Recall the error message:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"8\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Element &lt;label class=&quot;forward-toggle&quot;&gt;...&lt;/label&gt; is not clickable at point (700, 225).</span></span></code></pre>\n<p class=\"markdown-para\">So this explains where the point co-ordinates in the error message come from. The next question is <em class=\"markdown-emphasis\">why</em> does the test click in the center of the element? Recall the line of the test that performs the click is:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"9\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">find(</span><span class=\"mtk6\">&quot;label&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;FORWARDING&quot;</span><span class=\"mtk1\">).click</span></span></span></code></pre>\n<p class=\"markdown-para\">The <code>find</code> method returns an instance of <code>Capybara::Node::Element</code>, and then the test invokes the <code>click</code> method on the found element. Let's see what the Capybara API docs say about the <a href=\"https://rubydoc.info/github/teamcapybara/capybara/master/Capybara%2FNode%2FElement:click\" class=\"markdown-link\">Capybara::Node::Element#click</a> method:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABRElEQVQoz22RiY7DIAxE8/+/WKnbNpBDOQg35JqVoUHdaiM9mYAZj3HFB4kfPoBiNxv0i0s0o0S3RDCxgS8rmFgxuxMqAjIAKuRI6Ah0akevVlRN06JmDMuywFoLrQ2MtXDOpWitg/Me3ocU89rDh5DxAdblnOM4UfV9j65rwRjD8/EA5xx1XafIGUPTNKmYUqpA/4SUEsaYZIQ4jgPV/X5PYnQ4z3NJpjXtTfOMaZoSQog3uQCdk8jnVw3DAHJJlWKMiRBCiVd1Oie01ti3tQicxHkWqtfrldqiRLpAzi4nV4u0X1p2EdKtECbChS2LvsWSQxK83W54Pp8JEr9c02AupyENwCOuG9b9SOzHWQRLy13bYhpHaK0wjQOM1qXVz0GQS3rbbdv+vNmnWHbIO4zSQ4cdi92gbYAQeSD/Xfh+s2+Hv28wtaSvegh4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara click api docs\"\n        title=\"capybara click api docs\"\n        src=\"/static/da5baef2413ba181f7852af0f3b9b19a/5a190/capybara-click-api-docs.png\"\n        srcset=\"/static/da5baef2413ba181f7852af0f3b9b19a/772e8/capybara-click-api-docs.png 200w,\n/static/da5baef2413ba181f7852af0f3b9b19a/e17e5/capybara-click-api-docs.png 400w,\n/static/da5baef2413ba181f7852af0f3b9b19a/5a190/capybara-click-api-docs.png 800w,\n/static/da5baef2413ba181f7852af0f3b9b19a/c83ae/capybara-click-api-docs.png 1180w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Aha! Another mystery solved, the documentation states that the element will be clicked in the middle unless offsets are specified:</p>\n<blockquote class=\"markdown-blockquote\">\n<p class=\"markdown-para\">Both x: and y: must be specified if an offset is wanted, if not specified the click will occur at the middle of the element.</p>\n</blockquote>\n<h2 class=\"markdown-subtitle\" id=\"solution\" style=\"position:relative;\"><a href=\"#solution\" aria-label=\"solution permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Solution</h2>\n<p class=\"markdown-para\">Now finally we're in a position to solve the problem. If we want the test to click on an element on anywhere other than the center position, the <code>x</code> and <code>y</code> offsets must be provided to the click method, where <code>x</code> is the number of pixels to the right, starting from the left-most edge, and <code>y</code> is the number of pixels down from the top of the element.</p>\n<p class=\"markdown-para\">Since the particular UI this test is driving has the actual toggle input near the top left corner, a small amount of offset from this point should resolve this:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"10\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">find(</span><span class=\"mtk6\">&quot;label&quot;</span><span class=\"mtk1\">, </span><span class=\"mtk4\">text:</span><span class=\"mtk1\"> </span><span class=\"mtk6\">&quot;FORWARDING&quot;</span><span class=\"mtk1\">).click(</span><span class=\"mtk4\">x:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">5</span><span class=\"mtk1\">, </span><span class=\"mtk4\">y:</span><span class=\"mtk1\"> </span><span class=\"mtk4\">5</span><span class=\"mtk1\">)</span></span></span></code></pre>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABWklEQVQoz4XQbU/aUBjG8X7/z7LsxbJkcXFp1ooghFoqD9bGMhUtUOmpPafntIXyXwCzLPGFd/LLlet+eVk/vp9xYbs4tsvvXw79gcdoGuKPZ3jBhG6nT9fpcnXZp3fRo9e54vo6wA/G+KMTzw+YhRFfvn7DisOI6XjMwzwmvAnIFw+gMjASpACZQ9uefHKT2S1WfBcjlimrp4Tkz4LXdYbIJEKoY74VhjQrSTNFblpEuX3XIFRDrncs129sUknH7WJF94+cd+f8HCac+Sn2NMe9UzihPHKjEmcqjtzD77b4wJ4IBrHGPnexXl4SKl1jlMEojZYluihPqTRKFLw+JogkpcwlWmqM1FTqwFArQyU1bPd4Qx9rtU4/3abd7tj/t+Fu31JuG/LakBrFqiww7PFGN1hPi2fatqWqKqq6/qA+aBrquvnXldFspOQ5z5hvUqJ0ydooeoMhfwHC9Ak+h7wVtwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara edit forward click solution\"\n        title=\"capybara edit forward click solution\"\n        src=\"/static/dc8db00980dc81e9786a4653129b63bb/5a190/capybara-edit-forward-click-solution.png\"\n        srcset=\"/static/dc8db00980dc81e9786a4653129b63bb/772e8/capybara-edit-forward-click-solution.png 200w,\n/static/dc8db00980dc81e9786a4653129b63bb/e17e5/capybara-edit-forward-click-solution.png 400w,\n/static/dc8db00980dc81e9786a4653129b63bb/5a190/capybara-edit-forward-click-solution.png 800w,\n/static/dc8db00980dc81e9786a4653129b63bb/c1b63/capybara-edit-forward-click-solution.png 1200w,\n/static/dc8db00980dc81e9786a4653129b63bb/29007/capybara-edit-forward-click-solution.png 1600w,\n/static/dc8db00980dc81e9786a4653129b63bb/eee07/capybara-edit-forward-click-solution.png 1628w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">And indeed, running the test with this updated code, both locally and the continuous integration workflow passed.</p>\n<aside class=\"markdown-aside\">\nWhen dealing with the vertical y co-ordinate, note that it starts at 0 at the top of the page, and increases in a downwards direction. This is different from the graphs taught in elementary school math class where the 0 position starts at the bottom and increases upwards. The reason for this has to do with the <a class=\"markdown-link\" href=\"https://gamedev.stackexchange.com/questions/83570/why-is-the-origin-in-computer-graphics-coordinates-at-the-top-left\">history</a> of CRTs.\n</aside>\n<h2 class=\"markdown-subtitle\" id=\"unexplained\" style=\"position:relative;\"><a href=\"#unexplained\" aria-label=\"unexplained permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Unexplained</h2>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAByjNaysio3//EABoQAAIDAQEAAAAAAAAAAAAAAAECAAMREiH/2gAIAQEAAQUCqbmB9HQlPpjth//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/Aaf/xAAZEAADAAMAAAAAAAAAAAAAAAAAARAhMYH/2gAIAQEABj8C0JmZ2f/EABoQAQADAAMAAAAAAAAAAAAAAAEAESFRcaH/2gAIAQEAAT8hF34gCmM6DLvqVxBqow6Gf//aAAwDAQACAAMAAAAQXC//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQMBAT8QsY//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8Qhr//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFhUf/aAAgBAQABPxASi20A1ouEg6V9iLVPgkNoStHqKlzw0mDIGLP/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"one missing piece of puzzle\"\n        title=\"one missing piece of puzzle\"\n        src=\"/static/2db1e60f31c44efa7e822a55600cb337/4b190/capybara-puzzle-sigmund-B-x4VaIriRc-unsplash.jpg\"\n        srcset=\"/static/2db1e60f31c44efa7e822a55600cb337/e07e9/capybara-puzzle-sigmund-B-x4VaIriRc-unsplash.jpg 200w,\n/static/2db1e60f31c44efa7e822a55600cb337/066f9/capybara-puzzle-sigmund-B-x4VaIriRc-unsplash.jpg 400w,\n/static/2db1e60f31c44efa7e822a55600cb337/4b190/capybara-puzzle-sigmund-B-x4VaIriRc-unsplash.jpg 800w,\n/static/2db1e60f31c44efa7e822a55600cb337/a2510/capybara-puzzle-sigmund-B-x4VaIriRc-unsplash.jpg 1000w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">There does remain one unexplained piece of this puzzle.</p>\n<p class=\"markdown-para\"><em class=\"markdown-emphasis\">Why</em> was this test passing on all older Chrome versions up to 100, and only started failing on 101? Is it possible that older versions of ChromeDriver were actually clicking at the top left of elements, and that center clicking was only implemented in v101? It's not clear from the <a href=\"https://chromedriver.chromium.org/downloads\" class=\"markdown-link\">release notes</a>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"11\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Supports Chrome version 101</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Resolved issue 4046: DCHECK hit when appending empty fenced frame [Pri-]</span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\">Resolved issue 4080: Switching to nested frame fails [Pri-]</span></span></code></pre>\n<p class=\"markdown-para\">If anyone has an explanation, I would be very interested to hear about it.</p>\n<h2 class=\"markdown-subtitle\" id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p class=\"markdown-para\">This post has covered how to debug and solve the \"Element is not clickable at point... Other element would receive the click\" error when running Selenium based tests with Capybara. The process was to compare dependency versions on CI vs local, setup the conditions to reproduce the issue locally, inspect the co-ordinates reported by the failing test, compare this to the markup and element in developer tools, and some careful review of the Capybara documentation to understand the nuances of the click method.</p>\n<h2 class=\"markdown-subtitle\" id=\"appendix--rect-method\" style=\"position:relative;\"><a href=\"#appendix--rect-method\" aria-label=\"appendix  rect method permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Appendix:  Rect Method</h2>\n<p class=\"markdown-para\">As part of debugging this issue, the <code>Capybara::Node::Element#rect</code> method was helpful in identifying details of the element selected by the test. However, the Capybara documentation for this <a href=\"https://rubydoc.info/github/teamcapybara/capybara/master/Capybara/Node/Element#rect-instance_method\" class=\"markdown-link\">method</a> only contains links to the source, without any further details:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 359px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 31%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2ElEQVQY05WOS0sDMRRG8///kYLgoi6kIgWVatXWzsPpvDpNJplHM8mRTsGVLfWDszh3cbjCOs/gwQHWwd7x6wOwHzy9dfTWX4SICs3N/TO30xceXkNWRcfV5JHruxmT2TvzsCLREElHJD2xOo9Q7UCUK4J0x6ZqKGpLmEk+w3S8H1x2jFQtlMZTGncSodueQ7SzHtM7lGlRpkO27uiNZVv35LJD6Qa8w3t/EhGlW96+FUGuWWWGxXrDMs6Zx4plWvOVaT6Smqdgxzopj0EY+WuCf26MnfnwB2tAz4G1RJ/UAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara rect doc empty\"\n        title=\"capybara rect doc empty\"\n        src=\"/static/1ccea2dfef396f1b828b908edd787dbc/f5eb6/capybara-rect-doc-empty.png\"\n        srcset=\"/static/1ccea2dfef396f1b828b908edd787dbc/772e8/capybara-rect-doc-empty.png 200w,\n/static/1ccea2dfef396f1b828b908edd787dbc/f5eb6/capybara-rect-doc-empty.png 359w\"\n        sizes=\"(max-width: 359px) 100vw, 359px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Intuitively it can be understood from calling it that it returns size and positioning details of the element, but my curiosity was piqued as to exactly what it does so I went down a little rabbit hole to trace it through.</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBP/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAFjUzVO4P8A/8QAGRABAQADAQAAAAAAAAAAAAAAAQIAAyIS/9oACAEBAAEFAthGbOcNfouRb7ZkD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AVf/xAAXEAEBAQEAAAAAAAAAAAAAAAABEBEC/9oACAEBAAY/AhEWbyzWf//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVFh/9oACAEBAAE/IVmxGYLhd2WRyw+37DS3RzjE4e9HyGwJ/9oADAMBAAIAAwAAABCrz//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAwEBPxDUf//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAECAQE/EIP/xAAbEAEAAwEAAwAAAAAAAAAAAAABABExUSFBof/aAAgBAQABPxAD68uLPksAYHQe8gPllB0nsRl7Fpao7DFhYFAvJj2169n/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara rabbit hole\"\n        title=\"capybara rabbit hole\"\n        src=\"/static/a7b52ee9c295a0bf24f0ceb2d424ff5e/4b190/capybara-rabbit-hole.jpg\"\n        srcset=\"/static/a7b52ee9c295a0bf24f0ceb2d424ff5e/e07e9/capybara-rabbit-hole.jpg 200w,\n/static/a7b52ee9c295a0bf24f0ceb2d424ff5e/066f9/capybara-rabbit-hole.jpg 400w,\n/static/a7b52ee9c295a0bf24f0ceb2d424ff5e/4b190/capybara-rabbit-hole.jpg 800w,\n/static/a7b52ee9c295a0bf24f0ceb2d424ff5e/a2510/capybara-rabbit-hole.jpg 1000w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">Following the <a href=\"https://github.com/teamcapybara/capybara/blob/master/lib/capybara/node/element.rb#L380\" class=\"markdown-link\">View on Github</a> link from the Capybara documentation site led to the following code:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"12\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">module</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Capybara</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">module</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Node</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Element</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">Base</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">def</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">        synchronize { base.rect }</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">      </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\"><code>synchronize</code> is a method defined in the <a href=\"https://github.com/teamcapybara/capybara/blob/d08e88dadd44b7572b1ae37f44649d42180e8000/lib/capybara/node/base.rb#L76\" class=\"markdown-link\">base class</a> to resolve timing issues but will not dig into this as its not related to the <code>rect</code> method. I found the implementation of the rect method in <a href=\"https://github.com/teamcapybara/capybara/blob/98e367d9f9f4b56652b3e7dd41996c9a1d5ae26a/lib/capybara/selenium/node.rb#L216\" class=\"markdown-link\">Capybara::Selenium::Node</a>:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"13\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">class</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtku\">Capybara::Selenium::Node</span><span class=\"mtk1\"> </span><span class=\"mtk7\">&lt;</span><span class=\"mtk1\"> </span><span class=\"mtk5 mtki mtku\">Capybara::Driver::Node</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">def</span><span class=\"mtk1\"> </span><span class=\"mtk5\">rect</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">    native.rect</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">end</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># ...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">end</span></span></span></code></pre>\n<p class=\"markdown-para\">According to <a href=\"https://github.com/teamcapybara/capybara/issues/2419#issuecomment-832076535\" class=\"markdown-link\">this discussion</a>, <code>native</code> is an instance of <code>::Selenium::WebDriver::Element</code>, so to understand what the <code>rect</code> method does requires finding this implementation. However, this class isn't in the Capybara project, it's defined in the <a href=\"https://github.com/SeleniumHQ/selenium/tree/trunk/rb\" class=\"markdown-link\">selenium-webdriver</a> gem that is a required dependency when using Capybara with Selenium.</p>\n<p class=\"markdown-para\">Looking in the selenium-webdriver's <a href=\"https://www.selenium.dev/selenium/docs/api/rb/Selenium/WebDriver/Element.html#rect-instance_method\" class=\"markdown-link\">api documentation</a>, there is some information about the <code>::Selenium::WebDriver::Element#rect</code> method, although rather brief:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 456px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdElEQVQoz6WQS2/bMBCE9f//T089tWgBI0CBJH5JSqw0kmPHqSVTEimSevArSCdBD2566AKDmeXOAjuMamUR0iD1QKNHKjkgujFoj9rjj16aCWUdyk4X4Ih+xAXfr1MW2TOLreTT9S++JIKrh5abbcfVg+RrKvh2V/N5WZEcLPvW8dR4TDzVr2gmdo0jsiOYwQX0EwyOwP7da8++18MZXhuv+ynotx3v070jStOE+/s78vyRxXxOksQkcUz++JNssyHLNqRJzHq1DOy926JgvV6FnfntbfAXeY6vqG1bVNchpUIqhZQycKc1SnVorcPMa+/zbK3FGPM6kyilQu8cRLPZLFy2nN8wDj3/U845IiEEWXFglVfsKsVBaMrW8Cw0+fHc76qO/bHGuSks/Q0hMky0SnNsLSfZc5KWWvWUreWlNhwbw/6kKWvlbwix3pYvVbTZ17zUlm3ZUYr240jnXB96ImV6tB1RZsD0w/tfXI707wt/A3j3AxHohGVDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara webdriver rect doc\"\n        title=\"capybara webdriver rect doc\"\n        src=\"/static/9d16b1fe96cd2cd650a72e79e2318ad9/7f664/capybara-webdriver-rect-doc.png\"\n        srcset=\"/static/9d16b1fe96cd2cd650a72e79e2318ad9/772e8/capybara-webdriver-rect-doc.png 200w,\n/static/9d16b1fe96cd2cd650a72e79e2318ad9/e17e5/capybara-webdriver-rect-doc.png 400w,\n/static/9d16b1fe96cd2cd650a72e79e2318ad9/7f664/capybara-webdriver-rect-doc.png 456w\"\n        sizes=\"(max-width: 456px) 100vw, 456px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">I was also able to find more detailed documentation for the <a href=\"https://www.selenium.dev/documentation/\" class=\"markdown-link\">Selenium Browser Automation Project</a>. Navigating through WebDriver -> Elements -> Information -> <a href=\"https://www.selenium.dev/documentation/webdriver/elements/information/#size-and-position\" class=\"markdown-link\">Size and Position</a> leads to this more detailed explanation:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB10lEQVQoz3WR227UMBCG814gxFWFCioIVHEBoqAVF7wgVOy24gG44hIBbdHuJs7ZdmLHySYfsvcgTrX0acZj5x/Pn2h2ccLz8/s8e383cHp+j6cf7jC7POHl/Ah/Prt4zIuPR7z7dMrrxUPO5secLY55s3gU4qv5g1B7e/mE6Ev2mR/yK6mJKUzGtbjmJr3mKrni+/obqRLoQSJdhXJ1iJ76t1i78pBHta4ZpoHNNMAEjWrRskGrBlVr2sYGbNvhuh5rXIi3rSjOY0pd0m0sm3GDsRapFErrgM+rug7R9Y5xHBmnkWma/ku0FCtM3+LGjomJrusQaYpIM/KioJZyK1ptRffrVkFRCLTVW8HJCzrKsqKsaowx/4zk77D7mL8IgnmdU8giCPpR+tHhJoubOrqNwQwtdrAoJ7GDCRxeSLB9u997uE7X3Kx/Bg+DYN+jdYNuGlpjcM7R9y7Uh35gGP7E1/f4fZTkCbnMg4++Z1VVrFYxaRFTyJhSJZQyRjVV8NfbYIzdRYO19oBvHiWFCK/zI/u/rLUmEYI4ESxXa5bLNVmRk+YpicioahkoKxl8bts2NDoIZlWGMop+J+i7Nk0T0FqhlMKYFmOacOZHCzbsrPD5Hn/2CyhtNrEpfvjMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"capybara selenium webdriver rect doc\"\n        title=\"capybara selenium webdriver rect doc\"\n        src=\"/static/485d241244aac51aa0402609771af2a2/5a190/capybara-selenium-webdriver-rect-doc.png\"\n        srcset=\"/static/485d241244aac51aa0402609771af2a2/772e8/capybara-selenium-webdriver-rect-doc.png 200w,\n/static/485d241244aac51aa0402609771af2a2/e17e5/capybara-selenium-webdriver-rect-doc.png 400w,\n/static/485d241244aac51aa0402609771af2a2/5a190/capybara-selenium-webdriver-rect-doc.png 800w,\n/static/485d241244aac51aa0402609771af2a2/c1b63/capybara-selenium-webdriver-rect-doc.png 1200w,\n/static/485d241244aac51aa0402609771af2a2/7e11a/capybara-selenium-webdriver-rect-doc.png 1235w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">And that ultimately explains what the rect method returns. It matches my intuition about it from seeing the returned result from invoking this method in a test, but it was good to confirm this with the official documentation.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtku {\n    text-decoration: underline;\n    text-underline-position: under;\n  }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk5 { color: #A6E22E; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","fields":{"slug":"/blog/capybara-selenium-webdriver-element-not-clickable/"}}},{"node":{"id":"f173b5c7-e7ec-527a-917e-85c12f384e84","frontmatter":{"title":"Dependabot PRs Need Their Secrets","date":"July 2022","category":"github"},"excerpt":"A few months ago I noticed all the Github Dependabot pull requests were failing the required continuous integration (CI) check on a project…","html":"<p class=\"markdown-para\">A few months ago I noticed all the Github Dependabot pull requests were failing the required continuous integration (CI) check on a project I'm working on. This check is implemented as a Github Action workflow that runs the build, linting, unit, and end-to-end tests on every push. It's a required check, which means any pull request to the mainline must pass CI before it can be merged, including the <a href=\"https://docs.github.com/en/code-security/dependabot/dependabot-security-updates/about-dependabot-security-updates\" class=\"markdown-link\">Dependabot</a> PRs. This is critical because sometimes a dependency update to fix a security vulnerability can unintentionally break an existing feature.</p>\n<aside class=\"markdown-aside\">\nForcing all PRs to run a certain check before being allowed to be merged to the mainline in Github, requires configuring a <a class=\"markdown-link\" href=\"https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/defining-the-mergeability-of-pull-requests/managing-a-branch-protection-rule?ref=hackernoon.com\">Branch Protection Rule</a>. This can specify which branch(es) should be protected and what checks are required to be passing before any code can be merged to said branch.\n</aside>\n<h2 class=\"markdown-subtitle\" id=\"the-failures\" style=\"position:relative;\"><a href=\"#the-failures\" aria-label=\"the failures permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Failures</h2>\n<p class=\"markdown-para\">However, if <em class=\"markdown-emphasis\">all</em> the Dependabot PRs are failing CI, it's unlikely that every single dependency update is breaking something in the project, especially if they're all failing in the same way. Here's the error I was seeing on test failures from these PRs:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"\" data-index=\"0\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\">Braintree::ConfigurationError: Braintree::Configuration.merchant_id needs to be set</span></span></code></pre>\n<p class=\"markdown-para\">Indeed, this project does use Braintree to process payments, with a <a href=\"https://developer.paypal.com/braintree/articles/get-started/try-it-out#sandbox-vs.-production\" class=\"markdown-link\">sandbox</a> environment being used for tests. An initializer is used to configure Braintree, and the values are populated from environment variables. Even in test mode, it's good practice to avoid hard-coding 3rd party configuration. Note this is a Rails project:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"1\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># config/initializers/braintree.rb</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Braintree</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Configuration</span><span class=\"mtk1\">.merchant_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> ENV[</span><span class=\"mtk6\">&quot;BRAINTREE_MERCHANT_ID&quot;</span><span class=\"mtk1\">]</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># populate other Braintree config...</span></span></span></code></pre>\n<h2 class=\"markdown-subtitle\" id=\"populating-environment-variables\" style=\"position:relative;\"><a href=\"#populating-environment-variables\" aria-label=\"populating environment variables permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Populating Environment Variables</h2>\n<p class=\"markdown-para\">To understand why the tests were complaining about Braintree configuration not being set requires understanding how environment variables are populated on this project.</p>\n<p class=\"markdown-para\">Locally, the values of all environment variables come from a git ignored <code>.env</code> file that developers populate on their laptops during project setup.</p>\n<p class=\"markdown-para\">For the Continuous Integration workflow that runs with Github Actions, environment variables are populated in Github repository secrets. Secrets can be set in Github by anyone with administrator access to the project by going to Settings -> Secrets -> Actions, and then clicking on the \"New repository secret\" button. For example to add a secret named <code>SOME_SECRET</code>:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 773px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABZElEQVQ4y52TyW7CMBCGI4G6eYsdx9kITiChlABFVYuqVn2EnnvkVqnv/wB/FdMdVAUOn+bg8eeZse3JeAQzuoG2C+hiibBcwdgGZd3AVjOU9RxF1UAECahvwGT0L146HMOOJjinPghTILwlwDn7TReZE3IVYzi+QjqskBU1zohE74Sif8bQP/0J/aJ3QnB64YPJeOcgj6sIygwgdQpfJ6AiBBEahP9H4HKoH/7BwBuUUxSXKxCZgqoULMgcPMwhzBAi7ELuIg8yeDqfYrK8R9XcYrJYu1jP19BZBd4mG9sZmU7gyaSCinLXsjLZBwNwGbn2d9vaTzsGPy5b4RhUxiBudt90vdVPWqkfj7ZCpva/MXqIUHQQHldhWoPrBEwZMBU58VEIjbY4TygLyiwIzcFFARmP3cLhVFuhvisxe3vE7PUB9uUaLIjdD2DqcNzD1qsC880DrjdPsM8LEBmCHdl2u+8dw0BbcNr9QzMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github Add Secret\"\n        title=\"Github Add Secret\"\n        src=\"/static/44498b1287f092ff2d214d11ddacc635/612f7/github-add-secret.png\"\n        srcset=\"/static/44498b1287f092ff2d214d11ddacc635/772e8/github-add-secret.png 200w,\n/static/44498b1287f092ff2d214d11ddacc635/e17e5/github-add-secret.png 400w,\n/static/44498b1287f092ff2d214d11ddacc635/612f7/github-add-secret.png 773w\"\n        sizes=\"(max-width: 773px) 100vw, 773px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">After saving it, it will be displayed as follows:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 18.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAo0lEQVQY04WOWw6CMBBFuwAJLc8+bCmUWgwqkJi4/5Vd0xK+1PhxMudmJpNL/LzBXRcM4ZFo1IBa9j+J++Pm8J09k+n2hJ82jGGFC8ufhxYl71DxLnmcrNGohEXBOxTCgmS8RW4kci0SGW2RsU9OtAGrFWTnwbXb3XjM6yvlyXqM9gJCuQSVCkwpRP/27IBWErWILQ3yUqBVPYZwT23NeYDWDm/GKWi4rgeEwgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github Repo Secret Example\"\n        title=\"Github Repo Secret Example\"\n        src=\"/static/6062ad3c1d32f5a06cc41905c8fc3694/5a190/github-repo-secret-example.png\"\n        srcset=\"/static/6062ad3c1d32f5a06cc41905c8fc3694/772e8/github-repo-secret-example.png 200w,\n/static/6062ad3c1d32f5a06cc41905c8fc3694/e17e5/github-repo-secret-example.png 400w,\n/static/6062ad3c1d32f5a06cc41905c8fc3694/5a190/github-repo-secret-example.png 800w,\n/static/6062ad3c1d32f5a06cc41905c8fc3694/715a3/github-repo-secret-example.png 830w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">These secrets can then be used to populate environment variables in Github Action workflows by using the <a href=\"https://docs.github.com/en/enterprise-server@3.3/actions/using-workflows/workflow-syntax-for-github-actions#env\" class=\"markdown-link\">env</a> section, for example:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"yml\" data-index=\"2\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># .github/workflows/ci.yml</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">name</span><span class=\"mtk1\">: </span><span class=\"mtk6\">CI</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk4\">on</span><span class=\"mtk1\">: </span><span class=\"mtk6\">push</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">env</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">SOME_SECRET</span><span class=\"mtk1\">: </span><span class=\"mtk6\">${{ secrets.SOME_SECRET }}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk7\">BRAINTREE_MERCHANT_ID</span><span class=\"mtk1\">: </span><span class=\"mtk6\">${{ secrets.BRAINTREE_MERCHANT_ID }}</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># other env vars...</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk7\">jobs</span><span class=\"mtk1\">:</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk1\">  </span><span class=\"mtk3\"># build, lint, test, etc...</span></span></span></code></pre>\n<p class=\"markdown-para\">Given the above, any code that runs as part of the workflow on the Github Action runner will have access to <code>ENV[\"BRAINTREE_MERCHANT_ID\"]</code> and <code>ENV[\"SOME_SECRET\"]</code>, which is the Ruby syntax for accessing environment variables.</p>\n<h2 class=\"markdown-subtitle\" id=\"dependabot-secrets\" style=\"position:relative;\"><a href=\"#dependabot-secrets\" aria-label=\"dependabot secrets permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dependabot Secrets</h2>\n<p class=\"markdown-para\">However, it turns out, Dependabot doesn't have permission to read the main repository secrets. This means when any Dependabot PR is running the Continuous Integration check and attempts to run initializers, it's as if the code had the following:</p>\n<pre class=\"grvsc-container gatsby-highlight monokai\" data-language=\"ruby\" data-index=\"3\"><code class=\"grvsc-code\"><span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk9 mtki\">Braintree</span><span class=\"mtk1\">::</span><span class=\"mtk9 mtki\">Configuration</span><span class=\"mtk1\">.merchant_id </span><span class=\"mtk7\">=</span><span class=\"mtk1\"> </span><span class=\"mtk4\">nil</span></span></span>\n<span class=\"grvsc-line\"><span class=\"grvsc-source\"><span class=\"mtk3\"># other config...</span></span></span></code></pre>\n<p class=\"markdown-para\">Which would cause all tests that need to communicate with the Braintree sandbox to fail. Essentially, anywhere <code>ENV[\"SOMETHING\"]</code> is referenced would return <code>nil</code>.</p>\n<p class=\"markdown-para\">The solution is to specify a set of secrets specifically for Dependabot. This can be done in the Github UI by going to your repository's Settings, then in the Secrets section, selecting Dependabot. Note that the secrets specified in the Actions section are only available to your own PRs. Anything that the Dependabot PRs need to run must be specified in the Dependabot section.</p>\n<p class=\"markdown-para\">The UI to add a secret in the Dependabot section is the same as adding in the Actions section, for example:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 377px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7ElEQVQoz5WRW0+DMBiGe+mEAQKDMgrjMClEdHPxkGWaecoOmcuiXuj//yOv6WdIvNrYxZOvad48fdsyx48Q5xWirIRIJcJBQbN75kO3PJr7UBnTCWC5fVozHuWoJ1PU1/eYv23w+LLG7GkBw+athUrm8PhP2Gw2aGYPJ7rdSvZf2uSZZrrodB3k5RVupnOMbx/ghSlODRe62aMD2kIN/ViCixTq6l4/IXyRkZSL7CjUW7LyboEkl5g9r/D++YPX9Q6bj28st1+Q9QSZvKT2hxhWI9ieAOODkuxhUiA5v6AfbwjiITUPWqByquEvCRG5rjo8YSIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github Dependabot Secrets\"\n        title=\"Github Dependabot Secrets\"\n        src=\"/static/8c3175f71d8342f2dbda2f6de82188b6/6146e/github-dependabot-secrets.png\"\n        srcset=\"/static/8c3175f71d8342f2dbda2f6de82188b6/772e8/github-dependabot-secrets.png 200w,\n/static/8c3175f71d8342f2dbda2f6de82188b6/6146e/github-dependabot-secrets.png 377w\"\n        sizes=\"(max-width: 377px) 100vw, 377px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABC0lEQVQoz52Sy07DMBBFvSnqw0mclz15NXECpFFDu2hAAokF8CX8Av8vXUhoBUUJbbM48sKa47njYW66AVXPCOsXUPkIVT4hKu+x3jZY1TtUmwaWG4ALCcNWJ2FBUsAL0n0B7S/orOJeoUdLxNktwuU1FqaLydTE1czEpIe56XVF7eN9dEJHxjAdwpQ7mBlux8LyezkUDcnakyU3W+hqhyivERd3CPUagnIIpS+HcjAnKCDDFJQUoDiHDLNfXfztZnh23PK/ha15bjjdfA78F20wbitUGkyQBhf+8WtnivqFKgfvulIwhBq9Lj+RAw07KWDHIz/iiAwsel2h+XhD+f4AQxK4JcfH/lqbT/KeEInkRrz9AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github Add Depbot Secret\"\n        title=\"Github Add Depbot Secret\"\n        src=\"/static/ed217a510903a3ad7ced01f4739d86e6/5a190/github-add-depbot-secret.png\"\n        srcset=\"/static/ed217a510903a3ad7ced01f4739d86e6/772e8/github-add-depbot-secret.png 200w,\n/static/ed217a510903a3ad7ced01f4739d86e6/e17e5/github-add-depbot-secret.png 400w,\n/static/ed217a510903a3ad7ced01f4739d86e6/5a190/github-add-depbot-secret.png 800w,\n/static/ed217a510903a3ad7ced01f4739d86e6/d69c4/github-add-depbot-secret.png 1002w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABBklEQVQY021R226DMAzlcd1aLoWSkISUpECoCJW6dtr/f9mZ7ME0TXs4suPb8XESN8y4Lk9M8QE/RozzHU17we5QYp/XjLfsxNgTKLbaboi43j4Q4gPT8oTQHkmtHPR5gDoPMN2I1gUI7XCsDYqTXmFQivbX+zvW2B6tn9C6iS31JLRVvH8ixHcYF6BszwRujDBdYJ+KfViYTNmV2E+sRBrPPbRQVjZIqKHrZ2ahYgJtQJI3qa9pxdh8ym0x8ndphZf1RElaSmSiQS4VCqmZJT3Kf3EoBOdJfl4plMKy7FpYKNVxTZJWEplWyK1Gppufj/gLGkaWBgnj+V70CT7coLXD5dyz5C+KhptsFSe3/QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github List Depbot Secrets\"\n        title=\"Github List Depbot Secrets\"\n        src=\"/static/b6770d0b521c0196f3235776d5bc3357/5a190/github-list-depbot-secrets.png\"\n        srcset=\"/static/b6770d0b521c0196f3235776d5bc3357/772e8/github-list-depbot-secrets.png 200w,\n/static/b6770d0b521c0196f3235776d5bc3357/e17e5/github-list-depbot-secrets.png 400w,\n/static/b6770d0b521c0196f3235776d5bc3357/5a190/github-list-depbot-secrets.png 800w,\n/static/b6770d0b521c0196f3235776d5bc3357/00d43/github-list-depbot-secrets.png 1000w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p class=\"markdown-para\">In the example above, the Dependabot PRs will now have access to <code>SOME_SECRET</code>. After specifying all the actual secrets needed, re-run the failed Dependabot checks and this time they should pass.</p>\n<h2 class=\"markdown-subtitle\" id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p class=\"markdown-para\">This post has covered a simple reason why your Dependabot PRs may be failing required checks on Github, and how to fix it by configuring secrets specifically for Dependabot.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n  .monokai {\n    background-color: #272822;\n    color: #f8f8f2;\n  }\n  .monokai .mtki { font-style: italic; }\n  .monokai .mtk3 { color: #75715E; }\n  .monokai .mtk9 { color: #66D9EF; }\n  .monokai .mtk1 { color: #F8F8F2; }\n  .monokai .mtk7 { color: #F92672; }\n  .monokai .mtk6 { color: #E6DB74; }\n  .monokai .mtk4 { color: #AE81FF; }\n  .monokai .grvsc-line-highlighted::before {\n    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));\n    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));\n  }\n</style>","fields":{"slug":"/blog/dependabot-secrets/"}}},{"node":{"id":"96eb1f89-0ad8-5ee0-a06a-adc7083019fe","frontmatter":{"title":"You Can Have Your Browser Tabs and Use Them Too","date":"June 2022","category":"productivity"},"excerpt":"I decided to write this after hearing a discussion about the difficulties of managing multiple browser tabs on one of the programming…","html":"<p class=\"markdown-para\">I decided to write this after hearing a discussion about the difficulties of managing multiple browser tabs on one of the programming podcasts I listen to. The idea being that during web development, you'd have one tab open for the app you're building, something like <code>http://localhost:8000</code>, and then numerous other tabs for every problem you encounter. If you're doing fullstack development, this can get especially large as you may have run into issues with the database, server side framework/language, client side JavaScript, CSS, etc. The tendency is not to close these tabs just in case they're needed again. But after a while, the tab icons become so small and so numerous, it can get difficult to navigate to the one you want and will inevitably click on the wrong one, wasting some time.</p>\n<p class=\"markdown-para\">On the podcast I was listening to, the hosts suggestion was to close the tabs when you're done with them as you can always find them again later if they're really needed. In this post, I'd like to suggest an alternative solution that supports managing as many tabs as you'd like to have open, while being able to easily and accurately navigate to them. Note that I'm using the Chrome browser.</p>\n<h2 class=\"markdown-subtitle\" id=\"a-mess-of-tabs\" style=\"position:relative;\"><a href=\"#a-mess-of-tabs\" aria-label=\"a mess of tabs permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>A Mess of Tabs</h2>\n<p class=\"markdown-para\">To start, suppose you currently have a tab open at <code>http://localhost:8000</code>  for local development, with many other tabs that you've opened for various research and problem solving. The top of your browser will look something like this - a whole mess of tiny tabs, the more you open, the \"squishier\" they appear to try and fit in:\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f2e8fbaa036f05afb646beacaf9b347d/6f92b/multiple-browser-tabs-top.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 5.499999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAASElEQVQI1wXBCQ6AIAwAQR+jlFIuORJjIP7/VevMMWajWmSNwayduzZUI9fpCVZwEhBT0iXk0omxopIxDTjnMSs872btDw2JH8H/HrDPXAdmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Multiple Browser Tabs Top\"\n        title=\"Multiple Browser Tabs Top\"\n        src=\"/static/f2e8fbaa036f05afb646beacaf9b347d/5a190/multiple-browser-tabs-top.png\"\n        srcset=\"/static/f2e8fbaa036f05afb646beacaf9b347d/772e8/multiple-browser-tabs-top.png 200w,\n/static/f2e8fbaa036f05afb646beacaf9b347d/e17e5/multiple-browser-tabs-top.png 400w,\n/static/f2e8fbaa036f05afb646beacaf9b347d/5a190/multiple-browser-tabs-top.png 800w,\n/static/f2e8fbaa036f05afb646beacaf9b347d/c1b63/multiple-browser-tabs-top.png 1200w,\n/static/f2e8fbaa036f05afb646beacaf9b347d/6f92b/multiple-browser-tabs-top.png 1501w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"search-tabs\" style=\"position:relative;\"><a href=\"#search-tabs\" aria-label=\"search tabs permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Search Tabs</h2>\n<p class=\"markdown-para\">One of these tabs is for some GraphQL documentation and now you'd like to switch to that one. Instead of mousing over the tiny icons trying to guess which tab it is, you can use a feature called \"Search Tabs\". The keyboard shortcut is: <kbd class=\"markdown-kbd\">Cmd</kbd> + <kbd class=\"markdown-kbd\">Shift</kbd> + <kbd class=\"markdown-kbd\">A</kbd>, or <kbd class=\"markdown-kbd\">Ctrl</kbd> for Windows users.</p>\n<p class=\"markdown-para\">After using this shortcut, you will see a selection menu open up at the top right of the browser window, containing a vertical listing all the open tabs. The tab you're currently on will appear at the very end of the list. Each selection in the menu displays the tab title, url, and when it was last accessed (eg: 5 minutes ago or 2 days ago). Tabs are listed in order of most recent use. For example:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 361px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2eb2baaaa628d5269872c2ef2601807b/39d76/multiple-browser-tabs-select.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 287.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA6CAYAAACwL3lLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIYklEQVRYw4VYaXPbRhLlf4hlWbwvECR43/d93xKpK/KWt7J2rNjOJpYcZ7OV3aocm/3bL/UaGAiUXZUPTcwMBo3p7tevG3T5/EH4fAH4A2F4PH4Rry8It8cPnz8k60oCwQiCoahc1Rr3eLzm81EtDldYM5CvzxCOxFCptVCuNJDNl1BvdhDTDVuJEuecYy2WQK3RQa5QljUXf/RkEeGIjlQmL6LpBtKZPCJa/OBUzrG68iCpdE7mo9EULi56PD7QdLfbB4/Xb5riC35yus+J7AlG8MWTY7y+fQtXKKyh1RmIia3uAPliRRQ6T/VXQh1Pj924//AvuKKaaaqRyiKZykKPp+xNj0/zuTWaTD+euH2mwk63j2arg25vgMVyjdl8ieVqg9F4KvPlamuvT2cLrNZba32D+WIl+3r9IWr1Jn759X9w8ebPP/9HNnz1j1d4+fUt3t/9gJevXuPr2zd49+13eP3NW7z99jvcfvNO5rdv3uHF37/Cm3f/xGZ7ht35JfqDEX797Q+4+Nbnf3shbz09O8fu/Aqnu3Oc7S+xXG8xt9a3Z3vsz6+wWp+KNYPhWJSMxhM5NU/52+//hyudyQneeM1k8wIBQkYJ5861VDqLfKGEXL4oks2ZoukJ/PTv/5o4LJaqorTTHaDbG6LR7GAyXaDXH2E4mmI0nsm9+XKD8WQuWaSyg5lCHU+OnuH93Ue49LiB7XYnb+/0Ruj2xxiOZ+gNxhiMpuj2R2i0uiiUqnJvMJxKRqUzBRsNjPTTZx7cffjRBDbfyLeFwjGEIjEEQ5oFCd3GGvPbb42Zs7zvtvKeY+Lw7v5HuIjySFSXt+TyJWRzBeQLZRnr8aSMuUY/cY2WcI1uqlQbyGQLgl9bYTKVkShncgXxz8XVDS4ub7A53Yt59OVyfYrFcivCOfdNZ0tM5yvU6i1RfOLx4/39R7h4MmYJ0Z7JFZEvVIQ5Uum8zGlOUqJcQDpbECZSQfmsyQHy4IlbElxFTfxlcSGdzoe5xrHyKfdxrnjySCkMaQZirR30RAaz+UoAfba7EBATLhSC/fzyS2zFDROc7S8kJWeLNfYX17LOlwpsQhEdscoM4WgctUZbWIfwaHeHMi4UqyhXG2i2e6jWW6g3u8jmShJEBpOuMpIZh8nBMLwer22G8FtYExOF6smXlsliXihqlwglXLcVhsJRJGIJRKM6SuWawIOQaBLMxYpE0JQ6SuUqWu0uqrWm7FERJpSePD0xgZ3SdPzx/Euk4gZmy434aGj5bb7YCDSYcoTRyIILr+PJAtuzc/EjXWUrDIWiMBJJiZiRzAqECBmOSbzpbFHgk0hmkDDSAnbCJJ5Ii3Av5Ugp9Fuppxj4cbl0ipOlFXurfLZhw7wkHfHNDP9iuRGTlDmcc32z3QkXDkczGZOFmDEc9wdj84RUyNCTB6m40TKhwdys1dsybrb7qNbbAhHu4ZWiWIZrhI6wzb3FNgoiXl/oIa28ARsuHgsmnLMYPTvx2nBRHcYD29AvVuVqtXtCqvVGW8aETrc/lHG13jTnvaGYSHMJ6HanLzA6UBhLFxHVDWEXMgt9Z7LzAtP5GuvtHuPpAp3eEIvVVnzMPfVGRwi4P5g8mBwMRQT9olhPik8IB7YjsXhS1ggZBZNwVBfTzX0pqeOEmA2boAMiOpXohu1oFQCOGQSu8z7xyDU1556jB5PNXOUizbm8upHrbn+J84trgcV6cyYZwuwhyyhy7Q8nAiX6mL3N/QfLh/5ASN5WqjQEIuVqUyBTLNdQKNXEVJJusVyXNe5TSaA408E2EXh8IbsQKaiosXOuoKNIWAmftRWGIxqqxQJYTgkBkgOhQ3gIEYxnUqd5j1kzX6wlS0gg3Ms9hJmdKbFYHC/OFjCSafEJIcH6zExptfvyIOe8xwdJb6QrEgYzipWQle9YYPPRNPnEEzCjyMha6cUa7bP8I5HWDTFVssTtOyhUBwRLxmakKYSAIZhLIaYn5CSGRVtKVI/D0/EehcRi45BcuG1VQV5k+HdWkaKfVLfFrGHxIoToM46nsxUm06W4hMxuKyRA86mMmEholCp1gQf7l1yhImPCiPU4X6yK+SRdzhWUpC6r1KP9z7xBO1tOHP4RdrGYhWP6T92nPykcC8GqKHNSSJmpRbjQREJFtXLMEtV6KNjwPpmHcGLmsFDxZXdmK6JhVDJzU9VkMshgNJN6zAJEpiGEZosNKrWmXVsYRDajvB47CdbjNwnCbOWiNoTkc80bMNNMPnJ0MZMPK9N5soNMEQWhKCLRmN3GEai8MnpqzjpMUPNErMcEOes4hRCyo8yolSs1IQfCgz4Zjc0ixbGZajMhVDIMYbKy2IfMTX/ypYcnDGsi2XzZbtn4RcX04jhmkW1WTlsUxglYHaxyySO2CX7CNs6r34LIY4ZR9EWFNsGGwxoquaJEbTJbCkzIImzT1tudNO5cY+fKLwGSr6rFhBMzi2Y/1OWwhmqhKj5sdfroDSYSHBNCI2nj+qOpBIPQ4ovNXDdLgcr1A9i4vX7bBKdZqoXzByIHdZkPq3vqO+WwjEZTiLLhrLfMGmy1a9Vaw27tmA08ObODpvOkyn/ynaIUxmMZXA2+hx5LC2x2+yvJDMp6s5PrbG7WaX4MTSy2IYWp0z0o/Gj9RaClBTY662wiJdAgRBJGBnEjLVlC/3FMYZ1Wp3Mq/PDDT2znwjj2nAjBqgbo8X8MCqdKHv/3wGeOnrrx8tUtXDEtiVn9Brqelsxgt08YkHX4Wcsr6zFhQvhwzFT0+YIHf2QQNhcX13BFowaGlT00zRBmaTS7aHcH6MhHY0/WzFyuoVpryV8qFOdJlcLr6+dmTXH7vJ90qc4OVXW1Thc450rh1dUN/gTm1zm7042GUwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Multiple Browser Tabs Select\"\n        title=\"Multiple Browser Tabs Select\"\n        src=\"/static/2eb2baaaa628d5269872c2ef2601807b/39d76/multiple-browser-tabs-select.png\"\n        srcset=\"/static/2eb2baaaa628d5269872c2ef2601807b/772e8/multiple-browser-tabs-select.png 200w,\n/static/2eb2baaaa628d5269872c2ef2601807b/39d76/multiple-browser-tabs-select.png 361w\"\n        sizes=\"(max-width: 361px) 100vw, 361px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"markdown-para\">For those that don't want to memorize yet another keyboard shortcut, you can also click the down caret icon at the top right of the browser window to open the Search Tabs feature:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 398px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e729cbe55cac0cf8071951be90e281a3/692d4/multiple-browser-tabs-down-caret.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 116.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEO0lEQVQ4y2VVaW7bZhD1GRIl3mRR3ERxE0Xtm7VY+745dmIYiR3XQNAWiJ2uKIoiLXqBoAcJepe4lur8S+/xihmKjt3+eBh+Q2m+eTNvhmtqtgu31IZpmBiMpiiWKrDsONqdHkzLQblSw3g8R9Qy0c3so5UfQ7csqFETuhOHGVRQ3Iyi3e1jr97CWtR0oZsOwqIMVdWgKBoEQYIWNdkqqgbdsCGIMnTVQTRiIywrsCQdOdnGwClimNxFtV5Hvd7AWiCwjgcPApBUujEPRY3CTWZgWnE4bgqabiG4E0Y4rCAohCEJMvJhC2nRhLwjw81kMD08xHA0RrFYwtr793/i3bs/IKs6IkYCaiSKuJuGbsaYelS3IIRlhEUFgqhAFlUooopgWEJIlBEKSdA0k9+VShWsAcCnT/9AklUIgsh/3AmJCAnSrSWfD2EF8Y5PlFQ8eryJV19+7QX88OEKasRAoVRFNr+L4m4NkqxxMMqO7C1CHnZW8C5U8TCwjos333kBl8u/YcfiMGwbMcfl7hpmDLphMWUfBpfB+R/smMtZfv/DT17Am4836HVGmHaeYjSZ4vTlF9h/coij4+f8fHJ6hhenZ5jO9lFvtNBsddBottFstdn2+kNUqnv49bffVxneLDHvH+GryY8YTiY4O3+F4+eneHZ0jBcnZzh5eY7Ts3NMZvscjDTaanfR7nT5PJs/4Yve+gFvbj4iVygikU6hUNxFNldELl9COpNHOpNDJptfnXOMVDqLVNp/9t7H3SR+/uWtF/D6+pqFHIu5bAvFMiOTLbDdLdc4ID2TrdYa7KOpKlf2UChVuMsXl9/6Xf6AbK6Aw6dHiBo2mu0emu0+6s0OKtUGSuUaGq0eGi2i2ONAcTfF8DLNY2MziIs3q4CL5ZL1tB0UPG1Jqqe5lWQ2t0O3sqFu0u9oehhBgf2coS+bxWLBIycr3tzSjW4izVl7NSpwXdPpHFOOOYnPl9P0KJH7Aa+urjhAp9vnH3f7Y+w12uj2RwwqQaPZZaqjyZzfWbYLSY5wQLL/yXDJTqJIlGhq6ExQIjr7aAx5SUgqJEXj5lGWfqaBRxufA14vFlAjOiKawRNB2VLBiaZpxuDEk3xOprJwnASz4FLkip4vnsTm1s79LpOmxuMZb5jp/AD7B8944db2mmg0O+gPJoxOb4havcV+AimALtvaDuG1H5CaIjNliZujagZDVqJMORgSvdWleO9oGRDFx+tbWN/Y5lI8DGzg8m6XqS4hUYWmGZwlLQuytCj8M4Ho0pmyomeyiWTG06Gf4fVfV4jEslBKczhOHIPRDIPhlGkTxXK1jtF4junsAO3ugAXeavdQqdb5OzIcTbk5ry++uZOhHEEorDAlK+bCdpKIOUmYtsvbW5QiMEwHph1nPwWguvkipxJc3peNyh8lkg5JxEdotbVvF+3K729qAg2Er8N/AR1tNw4iUbhzAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Multiple Browser Tabs Down Caret\"\n        title=\"Multiple Browser Tabs Down Caret\"\n        src=\"/static/e729cbe55cac0cf8071951be90e281a3/692d4/multiple-browser-tabs-down-caret.png\"\n        srcset=\"/static/e729cbe55cac0cf8071951be90e281a3/772e8/multiple-browser-tabs-down-caret.png 200w,\n/static/e729cbe55cac0cf8071951be90e281a3/692d4/multiple-browser-tabs-down-caret.png 398w\"\n        sizes=\"(max-width: 398px) 100vw, 398px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 class=\"markdown-subtitle\" id=\"select-tabs\" style=\"position:relative;\"><a href=\"#select-tabs\" aria-label=\"select tabs permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Select Tabs</h2>\n<p class=\"markdown-para\">To make use of the tab selection menu, you can use the mouse to click on the tab title you want to open from this menu, <em class=\"markdown-emphasis\">or</em> simply start typing. Your text will appear next to the magnifying glass icon. For example typing \"graph\" will filter the list down to tab titles or urls that match what you typed in:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 359px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a5219e6937f861711fbd8512cd5c0eb2/f5eb6/multiple-browser-tabs-type.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACW0lEQVQ4y42TeU9TURDF34dgKXR/XWlLl9e+bq/be93pBqVQlorSQiQoKIaYaNTET/4z92IVIhr/OJmZM/eezJ07o7jcKg6HE6fLw8amk7X1TRwON4J3ury4fkL4bo+K6gvi9vh+59xeeVfw/kAYRQQJ3cQfjKGls1j1FtFYApdLxeP1/wEh9lfe4xOCKpFEnkA4TqVq0ukOiETjsoLlwcd4jlvyQkuxO33yyXa7i3WbnZVVm3zuv6p5vkIVfzCCsulQ0TI5CkaVTLZINm/8l9DTMwHsDje5QuWhwlg8RVLT2U5oxJNpWaGAuLS0j/3HnIBXDciP1PNllKSWp2QUKRQM2cNypYZpNTGtBjWzLv1qzZK5eqP1hBO+sEapQqFo0O3tohSLZRqze6zehPl8wfu7ez59/sLXb9+5uLzifH7B7bs7Ptx/5Ob2jvPFJddvb7l+c8Prq2v2xhMGoz12en16gzFKu9OjsTuj2R0y3p9weHTK7OWcs1cLDqYnTA6PGAz3JD+eTDk+fUGvP6TRbNNsdSSEYLuzw/jgGGV6dEIkEiajZ0mmMsQTKVJaBi2tk0hqv6xAStMlEsm0PJvRc6QzOWlj2wlOZmcorXaHkFcj4Iti1ZuMdvdptrpk9LzsVS5vyFgMvOBK5ZqM9WxR/uxyxFbXNugNdlEarSZDY4EWK1ExLcb7U9rdAVajQ7vbp97sYJSqmFYLs96mWmvQ7Y3kVCzFxNrZNhwMRmOUfn/EypoNj+rH5w/JfQyFo4Qj2wSCWwRDEdzeh5kLhqMP+a3Yk9ERYyOWQvTyB1gsn3RNaXF4AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Multiple Browser Tabs Type\"\n        title=\"Multiple Browser Tabs Type\"\n        src=\"/static/a5219e6937f861711fbd8512cd5c0eb2/f5eb6/multiple-browser-tabs-type.png\"\n        srcset=\"/static/a5219e6937f861711fbd8512cd5c0eb2/772e8/multiple-browser-tabs-type.png 200w,\n/static/a5219e6937f861711fbd8512cd5c0eb2/f5eb6/multiple-browser-tabs-type.png 359w\"\n        sizes=\"(max-width: 359px) 100vw, 359px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"markdown-para\">In the example above, two results are matched. At this point, you can either keep typing, for example \"ql\" to match exactly, or use the down arrow and hit <kbd class=\"markdown-kbd\">Enter</kbd> to action the selection:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 355px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/14aec641f83085cef093b30eac4052a8/526ee/multiple-browser-tabs-down-arrow.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHElEQVQ4y52RW2/aQBCF/TOaBNtgDLhcjY3BgG0w95sxhpRAuAVKRZWQlFR5baX+8lPtUlDUJ9qHTzs7Mzp7ZpZhuQB4vwiOD+D6hqOQmOOF/4LxB0JQim0EQ1E0Wx24gxE+RhO06A+I/wzDcgJCUhKCKEFOq0jJGQjBMHh/kDaQ8xJIL3VIBFmWB8v5zyO/F7vUGRGLSDEwHB+EWapSytUmDKtCGwJC6GIx0kv+gkx3HDksQQxJtEA+6OTUx/opNz7+zPv737VkSj0KEhEynpzOIKPp0PMG8gUTaUVDSlZpTlGz0LJ5JJJpqJkczZEaiUk+HIkinkwffznW2UGIqrDtKrzRGIvlBpvtDr2+B8Oy4bhDjG7v6NlodVFvdlBvtFG2a6jVW3C9W2omFpfBiGIEnCCB7JK8QGzrBQuaXkRSVuk9GJIQT6QpspKFIEbw4cpH13J1zZ4h7plSuQJFU5DT839G05DRcpRTrGV1qJnsOSZ92Vweer54htQqtSYYx3ExcXbotgf49vodP37+wuPTMx7Wn7F/PmD7ZYf9ywFP+xfMFyvsvj7i8PqG9WaLWr2JeqOFTteh9AdDMCRYe2/otoYYT++xWG0wX64ps8UKk+kcn8ZT3I6nmNwvcDedYTpbUgEiWK010O310Xc9OK5HBHvIFXQYlgWrZFPsSg1lu0oplW0YZgmmVQZZz4miYcK0ShTDtFAoGNTtb4b8n53MjZSMAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Multiple Browser Tabs Down Arrow\"\n        title=\"Multiple Browser Tabs Down Arrow\"\n        src=\"/static/14aec641f83085cef093b30eac4052a8/526ee/multiple-browser-tabs-down-arrow.png\"\n        srcset=\"/static/14aec641f83085cef093b30eac4052a8/772e8/multiple-browser-tabs-down-arrow.png 200w,\n/static/14aec641f83085cef093b30eac4052a8/526ee/multiple-browser-tabs-down-arrow.png 355w\"\n        sizes=\"(max-width: 355px) 100vw, 355px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"markdown-para\">At this point, the browser will switch to the tab you selected from the Search Tabs menu.</p>\n<h2 class=\"markdown-subtitle\" id=\"most-recent-tab\" style=\"position:relative;\"><a href=\"#most-recent-tab\" aria-label=\"most recent tab permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Most Recent Tab</h2>\n<p class=\"markdown-para\">Suppose you want to switch back to the <code>localhost</code> tab. This is a very common workflow toggling between localhost and several other tabs for research. Hit the Search Tabs shortcut again <kbd class=\"markdown-kbd\">Cmd</kbd> + <kbd class=\"markdown-kbd\">Shift</kbd> + <kbd class=\"markdown-kbd\">A</kbd>. Notice now <code>localhost</code> is at the top. Chrome remembers the most recently used tab, as that's where you're most likely to want to go back to:</p>\n<p class=\"markdown-para\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 351px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/313c7ee4ed4007baff23eb20b5eff3b4/7c2a6/multiple-browser-tabs-remember-previous.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 294.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAA7CAYAAAB7c6ruAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIPklEQVRYw4WY2ZLbRhJF+Q+2pF64LyBAAiRBcN93Etyb7EXdsj0xtkZjqSVbfnfMr9+Jm0RBYIc985BRQKFQrMw6ebPAUDyRBi0aSyIciSMSTSAaTch1LJ6SZ6oNWvBZxHsvkcwgpJsOTKcP0yqiNxijXGnALtfQ7PSR0Qz5oZeTBSdNpbNodQao1JqIxhIIJVNZaDlbXrYKZeiGiUw2h7xZQjKl/eXqghNyVUa+gFRGh+PUEBJXw1FEonFcXUc8V5Piwv+aLDgp7fWbK6zWO4SyhonBaIZ6s4v+aIZCyZHJgoP/n9GTV68vcf/2HUJ01bRscZVLT2uGt7Lzl/gDfJEuvrR0RsfFZfg0YW8wRKvbwWg0xXyxxGzuirnL9ZlNZwsMhmMMhhOvPdlwNBFrNNv4+PwFoXv3J3w9/gfueo3PX77i/Ydf8fTuJ3z89Bm//f4H/v3xGc+ff8f9wyPGkxkm0/mZjcZTHI730n56/g2hrXuLd+tfsFiuZMkPjz/gcHuP1XqL2/tHuWbfarOTldML5Ylqt7sbWeXzl68IFWwbhpWHU6mhWCqjULRhFUqwCjYKBRuWVUKhWIZpeX1FW5hVfaY8t2HkTPzz538hpOt5VKoNaNkchqMp+oOxtI1mF8PxDLP5UuI2Gs+k5bOFu5Hr8XQhz3v9Eb77/o14FGp3+nj//oMQP5rMJVvm7hq9/hid7hDt7gB97+XJzJV7u1yV1bItOzWxi4tr3D08IRRlLnp5qOl5yRKiQxTYF5X00gUZPucPX11H5R0mAY3JIRzKhLEkrsOx0wvZnLzAllyyJadsjZyFrDfhS8Hgu69fX55WyKWTs7xZhLvcYLO9kbjsD3dwV1tsdgestzeYTF3cHO7EMlruLP1UpsiE/OVOdyArabb7qNbbqDXaaLR6cu1Um5JJWd2UaxrVpWhXxFWG5WyFjAETmy7QdRpjxJbPVJ9/7T3jGJrSTT+GXCEZzOULmM5cTKYLcZ1YVGtN6SMyxIV9RIRjSMJiuUGr3RNjLssKa/UWHp9+kB2cLVYSr7m7wXjqCjatTl94JDaD0VSunUpdfoyianrgX15FPGxkl+OCSdYTV8ZT8MkYfpy4EVo2L7Gkq5yARvc55vtXFyeX4/EkYtETNjKRx6AmE+qCClsan3EckWK/Mt6/UWCni21og0eYeROH2wdsdwfc3r2VNJovVpjOl/LLx9sH3N0/YTyZY7c/ijozjqvNXibiKvleKKFZSJl1pDNZVBtEpiNxa7Z7cKoNlOyqxInxcioNQYv3QVUn7P4u8wFrSSyePkspFR9es5+7+BIr1UpNURzqmgHHLPhq02x10e0NBRcCTyMqvCceDAMFharEcSNv11+pTRk7Ffx5vEEiY2C13ovKEA1Jt5l7Upmpi+V6J9jwmoozniwkNRnHZqv3bUIikfKKj6Ahu2YJInrOksJlFsqnnRdx0CUsHMtrjmEN9ydUHDKwoiYpzVcchYtMFkDKx4bMejj5m0I5L5XKIpjsoNIwLnf3j1i4a3GdmBCn9WYv2CxXWxlHIz6Mr89hVrQvL+4QCdupiZTZTl3KgOBTaZydcf6qXlNg/NSTE1cs6aeUUhKFRdBUP8fxPfZFPMW+U5sSS6RFbYgH0SEeRIPGPqLTaHYEKSoOkaHiUBTYx/F+DJNaDmnTkTJItdlsD1LVKE0sWsv1HtvdUVKQBYwxYz/HUY3YdxZDFRPGgYgQF2JAdKg+eauEnFkUD9gqbLjbRu7UxzGiNjzbnCZMexwagowy/ogKetw7QBEfijL7lHGsvylc3dVVBFaxjO3+KEWIeLx9+lHOOMSGyBCh/c0tdje34jbvmYauFxofbDkjR+MCqipMPCs2Wl1BqFJrSVawKLF48bhcb3b8c7kSYF8cZMJYUuKoCjdjpCzYp9RH1XJVuKJBbNJpDYZuCNhUDyKgEDkpzRC1ehP1Rss/43R6Q0GHY4kZV+zHsFOv4R/HFTK6KTGceSrdavcxHJ1Uh8pC5Rl48sYCxZayxUzi/UUQGy6Zp3giQHRo/DrgM1EePY9C0ZGwKKFVAqxE2Xc5HE0i/OJbJHgiSHjYKFbJHzFRrbr2M6VaLKJbMpHWchgMxoINyacRF/+sQ2T2R0GF7cQ7GzKudN/f5artoG5ZSGZ0KU5tSacJOr2RqE+3PxaFZqyIkipY3Aje8x2u0N+UMHHwKlgQB/Xtp7CQYhVQG8Wg+kDyY5hMsQRkRKGpLkSFxxPuILEgHrynW0qB2M/TK4/SHM+x/gpLeQOTqoV0No/pbCnFSBWnwXAKd7mVYk6UeBAgh5yc0kWjy3IkVocl2cVkWrAxC7YUnVy+KAWe6CgVovLw45JCwpdVBin3fZdP8TmdsXkd8xDiYFEiL04ixJ7kq6MykVEq5WOjZQ3kzYLUEX4RUWmIA88yRIb3CiEqDIsUXedzPuMYiobvsnw8mkVRFCJCHBiX/nAqWBCdUrl6UplGx+9jVnG1CvCzInXtHWul4Pgq801x1NE3EvjrQCGlitU3bBgD75OCCDDR6422KA9Vh2goBVLXNI7hWBYxovSt0BsW+vW27C4/Iag2VBWiQjWWM6B35uEEQRaJD1OQP+7HMJ5gGc1IHPg1L/8fpHUxXhOhQqkiuLys0S9d5ldrKBJL4CoSlgCzFES9VAr+7RIOx/72PwelSlwhPQpZeg298hY508Lh+HASWS8riAXrMxGhqhARxunlCZaTXl3H0O70mHpNzJtvkdayojBEhxLPSqY+K0p2BeVKXe6pOuwLfu+dJoyi2xvQ5TguI9f+0lMB4VR/WijBVWPI7t9N+F8N8Eq4+3EPZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Multiple Browser Tabs Remember Previous\"\n        title=\"Multiple Browser Tabs Remember Previous\"\n        src=\"/static/313c7ee4ed4007baff23eb20b5eff3b4/7c2a6/multiple-browser-tabs-remember-previous.png\"\n        srcset=\"/static/313c7ee4ed4007baff23eb20b5eff3b4/772e8/multiple-browser-tabs-remember-previous.png 200w,\n/static/313c7ee4ed4007baff23eb20b5eff3b4/7c2a6/multiple-browser-tabs-remember-previous.png 351w\"\n        sizes=\"(max-width: 351px) 100vw, 351px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p class=\"markdown-para\">Simply hit <kbd class=\"markdown-kbd\">Enter</kbd> to action the highlighted tab. This will switch the browser back to the <code>localhost</code> tab.</p>\n<h2 class=\"markdown-subtitle\" id=\"close-tabs-or-not\" style=\"position:relative;\"><a href=\"#close-tabs-or-not\" aria-label=\"close tabs or not permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Close Tabs Or Not</h2>\n<p class=\"markdown-para\">Hovering over any tab listing in the Search Tabs menu will display an <code>X</code> icon beside it, clicking this will close the tab. If you accidentally close a tab that you still needed, hit <kbd class=\"markdown-kbd\">Cmd</kbd> + <kbd class=\"markdown-kbd\">Shift</kbd> + <kbd class=\"markdown-kbd\">T</kbd> to re-open it.</p>\n<h2 class=\"markdown-subtitle\" id=\"other-tab-management\" style=\"position:relative;\"><a href=\"#other-tab-management\" aria-label=\"other tab management permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Other Tab Management</h2>\n<p class=\"markdown-para\">There are some other ways to manage browser tabs including <a href=\"https://www.lifewire.com/group-tabs-in-chrome-5221144\" class=\"markdown-link\">tab groups</a>, <a href=\"https://www.digitaltrends.com/computing/why-every-browser-needs-veritcal-tabs/\" class=\"markdown-link\">vertical tabs</a>, or <a href=\"https://www.howtogeek.com/207887/HOW-TO-USE-VERTICAL-TREE-STYLE-TABS-IN-YOUR-WEB-BROWSER/\" class=\"markdown-link\">tree tabs</a>. What works best for each person will be a matter of preference.</p>\n<p class=\"markdown-para\">I find tab groups too much overhead as it requires use of the mouse and manual management. Such as thinking about what to name the tab groups, what tab belongs in what group, and then remembering what I put where! The kind of research required for fullstack dev is too fluid to fit into the group model.</p>\n<p class=\"markdown-para\">As for vertical or tree style tabs, while this improves the ability to visually scan a list of tabs, I find the search feature more useful than being concerned about how the tabs are laid out. Essentially, the search tabs feature is creating a searchable vertical listing on demand.</p>\n<h2 class=\"markdown-subtitle\" id=\"conclusion\" style=\"position:relative;\"><a href=\"#conclusion\" aria-label=\"conclusion permalink\" class=\"markdown-header-link before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Conclusion</h2>\n<p class=\"markdown-para\">This post has covered how to use Chrome's Search Tabs feature to manage multiple tabs. I've found this to be an optimal solution as it requires zero mental overhead. Just open as many tabs as you want, don't worry about organizing them or how they're laid out, then use a simple keyboard shortcut to access any of them nearly instantaneously.</p>\n<style class=\"grvsc-styles\">\n  .grvsc-container {\n    overflow: auto;\n    position: relative;\n    -webkit-overflow-scrolling: touch;\n    padding-top: 1rem;\n    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));\n    padding-bottom: 1rem;\n    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));\n    border-radius: 8px;\n    border-radius: var(--grvsc-border-radius, 8px);\n    font-feature-settings: normal;\n    line-height: 1.4;\n  }\n  \n  .grvsc-code {\n    display: table;\n  }\n  \n  .grvsc-line {\n    display: table-row;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n  }\n  \n  .grvsc-line > * {\n    position: relative;\n  }\n  \n  .grvsc-gutter-pad {\n    display: table-cell;\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  .grvsc-gutter {\n    display: table-cell;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter::before {\n    content: attr(data-content);\n  }\n  \n  .grvsc-source {\n    display: table-cell;\n    padding-left: 1.5rem;\n    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));\n    padding-right: 1.5rem;\n    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));\n  }\n  \n  .grvsc-source:empty::after {\n    content: ' ';\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    user-select: none;\n  }\n  \n  .grvsc-gutter + .grvsc-source {\n    padding-left: 0.75rem;\n    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);\n  }\n  \n  /* Line transformer styles */\n  \n  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {\n    content: ' ';\n    position: absolute;\n    width: 100%;\n  }\n  \n  .grvsc-line-diff-add::before {\n    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));\n  }\n  \n  .grvsc-line-diff-del::before {\n    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));\n  }\n  \n  .grvsc-line-number {\n    padding: 0 2px;\n    text-align: right;\n    opacity: 0.7;\n  }\n  \n</style>","fields":{"slug":"/blog/you-can-have-multiple-browser-tabs/"}}}]}},"pageContext":{}},"staticQueryHashes":["163244226"]}