<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.490b7167ab7f2e669d51.css">a,abbr,acronym,address,applet,article,aside,audio,b,big,blockquote,body,canvas,caption,center,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,u,ul,var,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}table{border-collapse:collapse;border-spacing:0}a{color:inherit;text-decoration:inherit}button,input,textarea{border-radius:0;-webkit-border-radius:0}button,input{-webkit-appearance:none}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;-ms-text-size-adjust:100%}:root{--brand:#81439c;--brand-lighten-10:#9c5ab8;--brand-lighten-20:#b17ec7;--brand-lighten-30:#c7a1d7;--brand-lighten-40:#dcc5e6;--brand-lighten-50:#f1e9f5;--brand-lighten-55:#fcfafd;--brand-darken-10:#633478;--brand-darken-20:#462455;--brand-darken-30:#281531;--brand-darken-35:#1a0d1f;--brand-darken-40:#0b060d;--brand-saturate-5:#833da2;--brand-desaturate-35:#726a75;--brand-desaturate-35-transp-50:rgba(114,106,117,0.5);--brand-complement:#9c8f43;--brand-complement-lighten-45:#eeead7;--brand-triadic-middle:#5e9c43;--link-color:#5d93ff;--inactive-color:#bbb;--post-link-color:var(--brand-lighten-10);--post-link-color-brighten:var(--brand-saturate-5);--post-link-color-hover:#999;--base-font-color:var(--brand-darken-35);--base-font-family:-apple-system,system-ui,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{background-color:var(--brand-lighten-55);color:var(--base-font-color);color-adjust:exact!important;font-family:var(--base-font-family);font-size:1rem;font-weight:400;line-height:26px;margin:10px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;-webkit-print-color-adjust:exact!important}.layout-module--container--zLeA4{margin:0 auto;max-width:900px}@media (max-width:768px){.layout-module--container--zLeA4{margin:0 16px}}@media (max-width:640px){.layout-module--container--zLeA4{margin:0 16px}}.header-module--container--18lpt{align-items:center;display:flex;justify-content:space-between}.header-module--logo--3gu8x{align-items:center;display:flex}.header-module--profile-wrapper--3R-fl{border:1px solid var(--brand-lighten-40);border-radius:50%;height:70px;overflow:hidden;position:relative;width:70px}.header-module--profile-img--wnp-Z{height:100%;left:0;-o-object-fit:cover;object-fit:cover;-o-object-position:center center;object-position:center center;position:absolute;top:0;width:100%}.header-module--header-item--17b7u{color:var(--brand);font-size:22px}.header-module--title--2iLmX{font-weight:600;margin-left:10px}.header-module--nav-list--2ganu{display:flex;flex-direction:row}.header-module--nav-item--2eEcY{font-weight:500;margin-left:15px}.nav-menu-responsive-module--nav-open--2t7ry{align-items:center;background:var(--brand-complement-lighten-45);display:flex;height:100%;justify-content:center;left:0;opacity:.95;position:absolute;top:0;width:100%;z-index:100}.nav-menu-responsive-module--nav-list--hVoy5{display:flex;flex-direction:column;text-align:center;width:100%}.nav-menu-responsive-module--header-item--2yJoY{color:var(--brand-saturate-5);font-size:22px}.nav-menu-responsive-module--nav-item--13nmf{box-shadow:5px 5px 5px 5px var(--brand-desaturate-35-transp-50);font-weight:500;margin-bottom:20px;margin-left:25px;margin-right:45px}.nav-menu-responsive-module--menu-button--3YgxZ{background-color:transparent;border-color:transparent;cursor:pointer;height:55px;width:55px}.nav-menu-responsive-module--menu-button-close--30tLV{position:absolute;right:10px;top:10px}.nav-menu-responsive-module--nav-link--1vE6I{font-size:1.8rem;font-weight:600;line-height:2.5;padding:15px 40%}.nav-menu-responsive-module--active--1EDSg{color:var(--brand-darken-10)}.nav-menu-module--nav-list--2gVNM{display:flex;flex-direction:row}.nav-menu-module--header-item--3ofg1{color:var(--brand);font-size:22px}.nav-menu-module--nav-item--1lKPw{font-weight:500;margin-left:15px}.nav-menu-module--active--31h8g{color:var(--brand-darken-20);cursor:inherit}.footer-module--container--2iXoO{margin-top:50px;text-align:center}.footer-module--sep--1iHNN{margin-bottom:30px;opacity:.2}.footer-module--copy--7yIGn{font-size:1.1rem;opacity:.7}.footer-module--social--3cljd{margin-top:25px}.footer-module--social--3cljd a{display:inline-block;margin-left:15px}.footer-module--social--3cljd a:first-child{margin-left:0}.footer-module--footer-icon--2phyq{color:var(--base-font-color);font-size:1.7em;opacity:.7;transition:all .3s ease}.footer-module--footer-icon--2phyq:hover{color:var(--brand-saturate-5);opacity:1}@media (max-width:768px){.footer-module--social--3cljd a{margin-left:25px}.footer-module--footer-icon--2phyq{font-size:2em}}.about-module--container--1ewHF{margin-top:30px;font-size:1.2em;font-weight:300;line-height:1.6}.about-module--header--2Gxwb{font-size:4rem;font-weight:300;letter-spacing:-1.5px;line-height:60px;margin:20px 0}.about-module--subheader--2z5zZ{font-size:1.8rem;font-weight:400;letter-spacing:-.5px;line-height:2.5rem;margin-bottom:15px}.about-module--para--S2W1Q{margin-top:10px;margin-bottom:25px}.about-module--link--5uLO_{text-decoration:none;background:linear-gradient(180deg,var(--post-link-color-hover) 0,var(--post-link-color-hover));background-position:0 100%;background-repeat:repeat-x;background-size:3px 3px;transition:background-size .4s;color:var(--post-link-color);padding:3px;border-radius:4px}.about-module--link--5uLO_:hover{text-decoration:none;color:var(--post-link-color-brighten);background-size:4px 50px}.intro-module--container--3fIA5{margin-bottom:30px;line-height:1.4;font-weight:300;font-size:1.1em}.article-module--container--1HbcQ{margin-top:25px;padding-right:150px}.article-module--title--2aaH5{font-size:1.5rem;font-weight:600;line-height:40px}.article-module--title--2aaH5:hover{border-bottom:1px solid var(--base-font-color)}.article-module--subheader--6GQfW{display:flex;font-size:.9em;font-weight:600;text-transform:uppercase}.article-module--date--A0OoP{margin-right:10px}.article-module--category--2qtxG{color:var(--brand-lighten-10)}.article-module--read--1fqTc{color:var(--link-color)}.article-module--read--1fqTc:hover{border-bottom:1px solid var(--link-color)}@media (max-width:768px){.article-module--container--1HbcQ{padding-right:50px}}@media (max-width:640px){.article-module--container--1HbcQ{padding-right:0}}.all-link-module--all-link--3uPzS{color:var(--brand-darken-30);display:inline-block;height:35px;padding:0 25px;line-height:35px;text-align:center;border:1px solid var(--brand-lighten-40);border-radius:20px}.all-link-module--all-link--3uPzS:hover{border-color:var(--brand-lighten-30)}._404-module--container---hXYv{align-items:center;display:flex;flex-direction:column;margin:30px 0}._404-module--main--D8CXV{font-size:15rem;font-weight:200;line-height:1.3;opacity:.7}._404-module--submain--3Ekrs{font-size:2.5rem;font-weight:500;line-height:1;margin-bottom:20px;opacity:.7}._404-module--message--2zDzP{font-size:1.5rem;font-weight:300;line-height:1;opacity:.7;text-transform:uppercase}@media (max-width:768px){._404-module--container---hXYv{margin:5px 0}._404-module--main--D8CXV{font-size:9rem;line-height:1.1}._404-module--submain--3Ekrs{font-size:2rem}._404-module--message--2zDzP{font-size:1.3rem}}.pagination-module--container--SLFjv{height:30px;margin:20px 0}.pagination-module--pagination--2HR3A{color:var(--brand-lighten-10);font-size:26px;font-weight:700;line-height:26px;text-transform:uppercase}.pagination-module--pagination--2HR3A:hover{color:var(--link-color)}.pagination-module--inactive--28Bzs{color:var(--inactive-color);pointer-events:none}.pagination-module--prev--1zJqU{float:left}.pagination-module--next--3GNag{float:right}.post-module--title--_4a8P{font-size:4rem;font-weight:300;letter-spacing:-1.5px;line-height:60px;margin:20px 0}.post-module--published--OKKle{font-style:italic;font-weight:300;margin:15px 0}.post-module--feature-image--1GQvY{margin-bottom:20px}.post-module--content--2Opks{font-size:1.2rem;line-height:30px}.post-module--content--2Opks h2{font-size:1.8rem;font-weight:400;letter-spacing:-.5px;line-height:2.5rem;margin-bottom:15px}.post-module--content--2Opks h3{font-size:1.4rem;font-weight:500;margin-bottom:5px}.post-module--content--2Opks p{margin-bottom:20px}.post-module--content--2Opks a{text-decoration:none;background:linear-gradient(180deg,var(--post-link-color-hover) 0,var(--post-link-color-hover));background-position:0 100%;background-repeat:repeat-x;background-size:3px 3px;transition:background-size .4s;color:var(--post-link-color);padding:3px;border-radius:4px}.post-module--content--2Opks a:hover{text-decoration:none;color:var(--post-link-color-brighten);background-size:4px 50px}.post-module--content--2Opks ol{list-style:decimal;margin-bottom:15px;margin-left:20px}.post-module--content--2Opks ul{list-style-type:"\2192";margin-bottom:15px;margin-left:20px}.post-module--content--2Opks li{padding-left:5px}.post-module--content--2Opks blockquote{border-left:3px solid var(--brand-triadic-middle);font-size:.9em;font-style:italic;font-weight:200;padding-left:15px}.post-module--content--2Opks kbd{display:inline-block;margin:0 .1em;padding:.1em .6em;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:14px;line-height:1.4;color:#000;text-shadow:0 1px 0 #fff;background-color:#e4e6e8;border:1px solid #9fa6ad;border-radius:3px;box-shadow:0 1px 1px rgba(12,13,14,.15),inset 0 1px 0 0 #fff;white-space:nowrap}.post-module--content--2Opks code{background-color:rgba(27,31,35,.05);border-radius:6px;font-size:85%;margin:0;padding:.2em .4em}.post-module--content--2Opks code,.post-module--content--2Opks pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.post-module--content--2Opks pre{font-size:1rem;margin-bottom:20px;padding-top:25px}.post-module--content--2Opks pre[data-language]:before{background:#f7df1e;border-radius:4px;color:#000;font-size:.75rem;font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;letter-spacing:.075em;line-height:1;position:absolute;text-align:right;text-transform:uppercase;top:0;left:0;padding:3px}.post-module--content--2Opks pre[data-language=bash]:before{content:"bash"}.post-module--content--2Opks pre[data-language=js]:before{content:"js"}.post-module--content--2Opks pre[data-language=ruby]:before{content:"ruby"}.post-module--content--2Opks pre[data-language=yml]:before{content:"yml"}.post-module--content--2Opks pre[data-language=json]:before{content:"json"}.post-module--content--2Opks pre[data-language=html]:before{content:"html"}.post-module--content--2Opks pre[data-language=markdown]:before{content:"markdown"}.post-module--content--2Opks pre[data-language=sql]:before{content:"sql"}@media (max-width:1280px){.post-module--content--2Opks ul{list-style-type:disc;list-style-position:inside}}@media (max-width:768px){.post-module--title--_4a8P{font-size:2.3rem;line-height:40px}}@media (max-width:640px){.post-module--title--_4a8P{font-size:2rem;line-height:40px}}</style><meta name="generator" content="Gatsby 2.23.21"/><title data-react-helmet="true">Debug Github Actions · Daniela Baron</title><link data-react-helmet="true" rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png"/><link data-react-helmet="true" rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"/><link data-react-helmet="true" rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"/><link data-react-helmet="true" rel="manifest" href="/manifest.json"/><meta data-react-helmet="true" name="description" content="How to use tmate to debug a github action for running CI with Rails and Postgres"/><meta data-react-helmet="true" name="image" content="https://danielabaron.me/static/bc9cf9fe62735cdf137667e63704ac8c/14b42/computer-bug.jpg"/><meta data-react-helmet="true" property="og:url" content="https://danielabaron.me/blog/debug-github-action/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Debug Github Actions"/><meta data-react-helmet="true" property="og:description" content="How to use tmate to debug a github action for running CI with Rails and Postgres"/><meta data-react-helmet="true" property="og:image" content="https://danielabaron.me/static/bc9cf9fe62735cdf137667e63704ac8c/14b42/computer-bug.jpg"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@DanielaMBaron"/><meta data-react-helmet="true" name="twitter:title" content="Debug Github Actions"/><meta data-react-helmet="true" name="twitter:description" content="How to use tmate to debug a github action for running CI with Rails and Postgres"/><meta data-react-helmet="true" name="twitter:image" content="https://danielabaron.me/static/bc9cf9fe62735cdf137667e63704ac8c/14b42/computer-bug.jpg"/><meta data-react-helmet="true" name="msapplication-TileColor" content="#ffffff"/><meta data-react-helmet="true" name="msapplication-TileImage" content="/ms-icon-144x144.png"/><meta data-react-helmet="true" name="theme-color" content="#ffffff"/><link as="script" rel="preload" href="/webpack-runtime-246df12a576c78d030e3.js"/><link as="script" rel="preload" href="/framework-95b680cb3190aa9bfe59.js"/><link as="script" rel="preload" href="/app-259f8badab9829128140.js"/><link as="script" rel="preload" href="/styles-89fd2ae28bdf06750a71.js"/><link as="script" rel="preload" href="/1bfc9850-5d16e0a00245e09d73c3.js"/><link as="script" rel="preload" href="/252f366e-4b8dd868f7f9c2a7ee52.js"/><link as="script" rel="preload" href="/commons-b7f0eac7930a2fe953ac.js"/><link as="script" rel="preload" href="/component---src-templates-post-js-6c8dc3de4250d0615bc4.js"/><link as="fetch" rel="preload" href="/page-data/blog/debug-github-action/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-module--container--zLeA4"><header class="header-module--container--18lpt"><a href="/"><div class="header-module--logo--3gu8x"><div class="header-module--profile-wrapper--3R-fl"><img class="header-module--profile-img--wnp-Z" src="/images/profile.png" alt="Profile"/></div><div class="header-module--header-item--17b7u header-module--title--2iLmX">Daniela Baron</div></div></a><nav><ul class="nav-menu-module--nav-list--2gVNM"><li class="nav-menu-module--header-item--3ofg1 nav-menu-module--nav-item--1lKPw"><a href="/">Home</a></li><li class="nav-menu-module--header-item--3ofg1 nav-menu-module--nav-item--1lKPw"><a href="/blog">Blog</a></li><li class="nav-menu-module--header-item--3ofg1 nav-menu-module--nav-item--1lKPw"><a href="/about">About</a></li></ul></nav></header><div><div><h1 class="post-module--title--_4a8P">Debug Github Actions</h1><div class="post-module--published--OKKle">Published <!-- -->15 Feb 2021</div><div class="post-module--feature-image--1GQvY gatsby-image-wrapper" style="position:relative;overflow:hidden"><div aria-hidden="true" style="width:100%;padding-bottom:56.33802816901409%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIFAQT/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABn9EtpnBBr//EABkQAAMBAQEAAAAAAAAAAAAAAAABAgMQEf/aAAgBAQABBQLGZZrlEyxM95//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwFX/8QAFREBAQAAAAAAAAAAAAAAAAAAEBL/2gAIAQIBAT8Bk//EABgQAAIDAAAAAAAAAAAAAAAAAAEhAAIg/9oACAEBAAY/AmYrjP8A/8QAGBABAQEBAQAAAAAAAAAAAAAAAQARUWH/2gAIAQEAAT8hVwD1tQjyBsnZXZv/2gAMAwEAAgADAAAAECgf/8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAEDAQE/EFdj/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAECAQE/EN0rF//EABoQAQADAAMAAAAAAAAAAAAAAAEAESFhcaH/2gAIAQEAAT8QpSU4juLG9YHX2AdMIYiPKVUTc//Z" alt="" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/bc9cf9fe62735cdf137667e63704ac8c/f836f/computer-bug.jpg 200w,
/static/bc9cf9fe62735cdf137667e63704ac8c/2244e/computer-bug.jpg 400w,
/static/bc9cf9fe62735cdf137667e63704ac8c/14b42/computer-bug.jpg 800w,
/static/bc9cf9fe62735cdf137667e63704ac8c/38bc6/computer-bug.jpg 852w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/bc9cf9fe62735cdf137667e63704ac8c/f836f/computer-bug.jpg 200w,
/static/bc9cf9fe62735cdf137667e63704ac8c/2244e/computer-bug.jpg 400w,
/static/bc9cf9fe62735cdf137667e63704ac8c/14b42/computer-bug.jpg 800w,
/static/bc9cf9fe62735cdf137667e63704ac8c/38bc6/computer-bug.jpg 852w" src="/static/bc9cf9fe62735cdf137667e63704ac8c/14b42/computer-bug.jpg" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><div class="post-module--content--2Opks"><p>A few weeks ago I was setting up CI (continuous integration) for a Rails project that uses Sidekiq, Redis, and Postgres. Pretty straightforward, just needed to run a build, install and configure the services (Postgres and Redis), initialize the database, then run linting and tests.</p>
<p>Prior to the general release of Github Actions, I would have reached for Travis CI or Circle CI to set this up, which involves giving a 3rd party service access to your Github repo. But ever since <a href="https://github.com/features/actions">Github Actions</a> has been available, its no longer necessary to integrate a 3rd party solution. Github Actions support running any workflow on any event such as push to a branch, merge a PR etc. The configuration is done via a yaml file in the <code>.github/workflows</code> directory in your project. No need to install anything, as soon as you push a branch with a workflow yaml in the directory Github looks for, it will start running the jobs and steps specified in the file. By default, the action will run on Github hosted machines but it's also possible to configure a self-hosted runner. For this post, we will be using the Github action runner.</p>
<p>As great as Github Actions are, sometimes something will go wrong with the workflow, and the console output from the runner will not be sufficient to figure out what the issue is. This post will walk you through a debugging technique you can use to troubleshoot your workflow.</p>
<h2>First Attempt</h2>
<p>The <code>ci.yml</code> file shown below was my first attempt at getting a build going for my Rails project. This file specifies the services that are needed (Postgres and Redis) which are defined in the same syntax as a docker-compose file. The next section specifies all the steps that should be run in sequence. These include checking out the project, setting up the necessary Ruby and Node versions, installing the project dependencies with <code>bundle install</code> and <code>yarn install</code>, then initializing the database with <code>rake db:reset</code>, and finally running the linter (rubocop) and RSpec tests.</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="yml" data-index="0"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3"># .github/workflows/ci.yml</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">CI</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">on</span><span class="mtk1">: </span><span class="mtk6">push</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">env</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">RAILS_ENV</span><span class="mtk1">: </span><span class="mtk6">test</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">RACK_ENV</span><span class="mtk1">: </span><span class="mtk6">test</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">DATABASE_HOST</span><span class="mtk1">: </span><span class="mtk6">&quot;127.0.0.1&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">REDIS_URL</span><span class="mtk1">: </span><span class="mtk6">&quot;redis://127.0.0.1&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">jobs</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">ci</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">runs-on</span><span class="mtk1">: </span><span class="mtk6">ubuntu-latest</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">services</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">db</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">image</span><span class="mtk1">: </span><span class="mtk6">postgres:13</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">env</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk7">POSTGRES_PASSWORD</span><span class="mtk1">: </span><span class="mtk6">its_a_secret</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk7">POSTGRES_USER</span><span class="mtk1">: </span><span class="mtk6">postgres</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">ports</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          - </span><span class="mtk6">5432:5432</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">volumes</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          - </span><span class="mtk6">/home/runner/work/myapp/myapp/init.sql:/docker-entrypoint-initdb.d/init.sql</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">redis</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">image</span><span class="mtk1">: </span><span class="mtk6">redis:6</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">ports</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          - </span><span class="mtk6">6379:6379</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">steps</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Checkout source</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">uses</span><span class="mtk1">: </span><span class="mtk6">actions/checkout@v1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Setup Ruby 2.7</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">uses</span><span class="mtk1">: </span><span class="mtk6">actions/setup-ruby@v1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">with</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk7">ruby-version</span><span class="mtk1">: </span><span class="mtk6">&#39;2.7&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Setup Node</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">uses</span><span class="mtk1">: </span><span class="mtk6">actions/setup-node@v2-beta</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">with</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk7">node-version</span><span class="mtk1">: </span><span class="mtk6">&#39;12&#39;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">bundle install</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">run</span><span class="mtk1">: </span><span class="mtk6">bundle install</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">yarn install</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">run</span><span class="mtk1">: </span><span class="mtk6">yarn</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Initialize database</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">run</span><span class="mtk1">: </span><span class="mtk6">bundle exec rake db:reset</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Run linter</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">run</span><span class="mtk1">: </span><span class="mtk6">rubocop</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Run tests</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">run</span><span class="mtk1">: </span><span class="mtk6">bundle exec rspec</span></span></span></code></pre>
<p>But after pushing this file and monitoring the Actions output (as soon as you push a valid workflow file, Github will run in and display the results in a new <code>Actions</code> tab displayed on your project page on github.com), the workflow failed with the following error displayed under the <code>Initialize database</code> step:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="1"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">PG::ConnectionBad: could not connect to server: Connection refused</span></span>
<span class="grvsc-line"><span class="grvsc-source">Is the server running on host &quot;127.0.0.1&quot; and accepting</span></span>
<span class="grvsc-line"><span class="grvsc-source">TCP/IP connections on port 5432?</span></span>
<span class="grvsc-line"><span class="grvsc-source">/opt/hostedtoolcache/Ruby/2.7.2/x64/bin/bundle:23:in `load&#39;</span></span>
<span class="grvsc-line"><span class="grvsc-source">/opt/hostedtoolcache/Ruby/2.7.2/x64/bin/bundle:23:in `&lt;main&gt;&#39;</span></span>
<span class="grvsc-line"><span class="grvsc-source">Tasks: TOP =&gt; db:reset =&gt; db:drop =&gt; db:check_protected_environments</span></span>
<span class="grvsc-line"><span class="grvsc-source">(See full trace by running task with --trace)</span></span>
<span class="grvsc-line"><span class="grvsc-source">Error: Process completed with exit code 2.</span></span></code></pre>
<p>According to the error message, the rake task to initialize the database could not run because the database server wasn't running. This seemed strange as I had the same services configured locally via a <code>docker-compose.yml</code> file and it worked perfectly on my laptop. What I needed was a way to "inspect" the Github runner host machine where this flow was running, to investigate why the database failed to start up.</p>
<h2>Add Tmate Debugger</h2>
<p>Fortunately, there's a relatively easy way to do this via a community action named <a href="https://github.com/mxschmitt/action-tmate">tmate</a>. This action can be added as a step anywhere in the workflow. It outputs a temporary hostname that you can ssh to and you will be connected to the runner machine. Here's the modified workflow with tmate added just after checking out sources:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="yml" data-index="2"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3"># .github/workflows/ci.yml</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">CI</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk4">on</span><span class="mtk1">: </span><span class="mtk6">push</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">env</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">RAILS_ENV</span><span class="mtk1">: </span><span class="mtk6">test</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">RACK_ENV</span><span class="mtk1">: </span><span class="mtk6">test</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">DATABASE_HOST</span><span class="mtk1">: </span><span class="mtk6">&quot;127.0.0.1&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">REDIS_URL</span><span class="mtk1">: </span><span class="mtk6">&quot;redis://127.0.0.1&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">jobs</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">ci</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">runs-on</span><span class="mtk1">: </span><span class="mtk6">ubuntu-latest</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">services</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">db</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">image</span><span class="mtk1">: </span><span class="mtk6">postgres:13</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">env</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk7">POSTGRES_PASSWORD</span><span class="mtk1">: </span><span class="mtk6">its_a_secret</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          </span><span class="mtk7">POSTGRES_USER</span><span class="mtk1">: </span><span class="mtk6">postgres</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">ports</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          - </span><span class="mtk6">5432:5432</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">volumes</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          - </span><span class="mtk6">/home/runner/work/myapp/myapp/init.sql:/docker-entrypoint-initdb.d/init.sql</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">redis</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">image</span><span class="mtk1">: </span><span class="mtk6">redis:6</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">ports</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">          - </span><span class="mtk6">6379:6379</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">steps</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Checkout source</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">uses</span><span class="mtk1">: </span><span class="mtk6">actions/checkout@v1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Setup tmate session</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">        </span><span class="mtk7">uses</span><span class="mtk1">: </span><span class="mtk6">mxschmitt/action-tmate@v3</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk3"># rest of the steps...</span></span></span></code></pre>
<p>After pushing this change and monitoring the action runner again, when it got to the <code>Setup tmate session</code> step, the following was displayed:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="3"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">SSH: ssh HghSLAQZ6JqNEQjPEHTu5prMM@nyc1.tmate.io</span></span></code></pre>
<h2>Debugging in Runner</h2>
<p>To make use of this, open a terminal tab (I use iTerm) and enter:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="bash" data-index="4"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">ssh HghSLAQZ6JqNEQjPEHTu5prMM@nyc1.tmate.io</span></span></span></code></pre>
<p>This opens a temporary ssh session on the Github action runner, that is now paused at the last step it was running. In this case, I put the tmate action just after checking out sources but before the setup Ruby step.</p>
<p>Recall the error said that the rake task to initialize the database had been unable to connect to Postgres. Since Postgres is supposed to be running in a Docker container (that's what the <code>services</code> section of <code>ci.yml</code> specifies), I listed all the active docker processes with the <code>docker ps</code> command (reminder, I'm on the Github Action runner machine here):</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="5"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">runner@fv-az139-674:~/work/myapp/myapp$ docker ps</span></span>
<span class="grvsc-line"><span class="grvsc-source">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span></span>
<span class="grvsc-line"><span class="grvsc-source">4336ebfbbd89        redis:6             &quot;docker-entrypoint.s…&quot;   4 minutes ago       Up 4 minutes        0.0.0.0:6379-&gt;6379/tcp   d04eb80007624ff19d2b34cb344cf4fd_redis6_d9fced</span></span></code></pre>
<p>Well that's clearly a problem, only the Redis container is running, so what happened to the Postgres container? To get the answer to this question, list the docker processes again but this time with the <code>-a</code> flag to list <em>all</em> processes, not just the running processes:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="6"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">runner@fv-az139-674:~/work/myapp/myapp$ docker ps -a</span></span>
<span class="grvsc-line"><span class="grvsc-source">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS                    NAMES</span></span>
<span class="grvsc-line"><span class="grvsc-source">4336ebfbbd89        redis:6             &quot;docker-entrypoint.s…&quot;   5 minutes ago       Up 4 minutes               0.0.0.0:6379-&gt;6379/tcp   d04eb80007624ff19d2b34cb344cf4fd_redis6_d9fced</span></span>
<span class="grvsc-line"><span class="grvsc-source">3ce2dda6db40        postgres:13         &quot;docker-entrypoint.s…&quot;   5 minutes ago       Exited (1) 5 minutes ago                            d9f1a3d336094b2d8b26703081b78d99_postgres13_67885a</span></span></code></pre>
<p>Ah, so a Postgres container was started, but something went wrong and it exited shortly after starting. In order to get a clue as to what went wrong, we can check the containers logs using the <code>docker logs</code> command, passing in the container name:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="7"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">runner@fv-az139-674:~/work/myapp/myapp$ docker logs d9f1a3d336094b2d8b26703081b78d99_postgres13_67885a</span></span>
<span class="grvsc-line"><span class="grvsc-source">The files belonging to this database system will be owned by user &quot;postgres&quot;.</span></span>
<span class="grvsc-line"><span class="grvsc-source">This user must also own the server process.</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">The database cluster will be initialized with locale &quot;en_US.utf8&quot;.</span></span>
<span class="grvsc-line"><span class="grvsc-source">The default database encoding has accordingly been set to &quot;UTF8&quot;.</span></span>
<span class="grvsc-line"><span class="grvsc-source">The default text search configuration will be set to &quot;english&quot;.</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">Data page checksums are disabled.</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">fixing permissions on existing directory /var/lib/postgresql/data ... ok</span></span>
<span class="grvsc-line"><span class="grvsc-source">creating subdirectories ... ok</span></span>
<span class="grvsc-line"><span class="grvsc-source">selecting dynamic shared memory implementation ... posix</span></span>
<span class="grvsc-line"><span class="grvsc-source">selecting default max_connections ... 100</span></span>
<span class="grvsc-line"><span class="grvsc-source">selecting default shared_buffers ... 128MB</span></span>
<span class="grvsc-line"><span class="grvsc-source">selecting default time zone ... Etc/UTC</span></span>
<span class="grvsc-line"><span class="grvsc-source">creating configuration files ... ok</span></span>
<span class="grvsc-line"><span class="grvsc-source">running bootstrap script ... ok</span></span>
<span class="grvsc-line"><span class="grvsc-source">performing post-bootstrap initialization ... ok</span></span>
<span class="grvsc-line"><span class="grvsc-source">syncing data to disk ... ok</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">Success. You can now start the database server using:</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">    pg_ctl -D /var/lib/postgresql/data -l logfile start</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">initdb: warning: enabling &quot;trust&quot; authentication for local connections</span></span>
<span class="grvsc-line"><span class="grvsc-source">You can change this by editing pg_hba.conf or using the option -A, or</span></span>
<span class="grvsc-line"><span class="grvsc-source">--auth-local and --auth-host, the next time you run initdb.</span></span>
<span class="grvsc-line"><span class="grvsc-source">waiting for server to start....2021-01-31 18:52:53.451 UTC [47] LOG:  starting PostgreSQL 13.1 (Debian 13.1-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit</span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-01-31 18:52:53.461 UTC [47] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-01-31 18:52:53.463 UTC [48] LOG:  database system was shut down at 2021-01-31 18:52:52 UTC</span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-01-31 18:52:53.467 UTC [47] LOG:  database system is ready to accept connections</span></span>
<span class="grvsc-line"><span class="grvsc-source"> done</span></span>
<span class="grvsc-line"><span class="grvsc-source">server started</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">/usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql</span></span>
<span class="grvsc-line"><span class="grvsc-source">psql:/docker-entrypoint-initdb.d/init.sql: error: could not read from input file: Is a directory</span></span></code></pre>
<p>This reveals another clue, so the database fails to start because it tried to run <code>init.sql</code> but was unable to find it. So what is this file? The <code>postgres:13</code> Docker image has support for running one-time initialization sql files. The first time the database is being created, if any files are found in directory <code>/docker-entrypoint-initdb.d</code>, then they will be run.</p>
<p>For this project, <code>init.sql</code> is located in the project root and is only intended to be used for development and CI where Postgres is run in a container:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="sql" data-index="8"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3">-- init.sql</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">create</span><span class="mtk1"> </span><span class="mtk7">role</span><span class="mtk1"> myapp </span><span class="mtk7">with</span><span class="mtk1"> createdb </span><span class="mtk7">login</span><span class="mtk1"> </span><span class="mtk7">password</span><span class="mtk1"> </span><span class="mtk6">&#39;thepasswordgoeshere&#39;</span></span></span></code></pre>
<p>Looking back at the service definition, a <a href="https://docs.docker.com/storage/bind-mounts/">bind mount</a> is used to mount <code>init.sql</code> from the project root into the Postgres container:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="yml" data-index="9"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3"># .github/workflows/ci.yml</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">services</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">db</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">image</span><span class="mtk1">: </span><span class="mtk6">postgres:13</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">env</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">POSTGRES_PASSWORD</span><span class="mtk1">: </span><span class="mtk6">its_a_secret</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">POSTGRES_USER</span><span class="mtk1">: </span><span class="mtk6">postgres</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">ports</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk6">5432:5432</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">volumes</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk6">/home/runner/work/myapp/myapp/init.sql:/docker-entrypoint-initdb.d/init.sql</span></span></span></code></pre>
<h2>Second Attempt</h2>
<p>So why couldn't it find <code>init.sql</code>? Doing some searching led me to a suggestion to try mounting to a folder rather than specific file like this:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="yml" data-index="10"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3"># .github/workflows/ci.yml</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">services</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">db</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">image</span><span class="mtk1">: </span><span class="mtk6">postgres:13</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">env</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">POSTGRES_PASSWORD</span><span class="mtk1">: </span><span class="mtk6">its_a_secret</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">POSTGRES_USER</span><span class="mtk1">: </span><span class="mtk6">postgres</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">ports</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk6">5432:5432</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">volumes</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk6">/home/runner/work/myapp/myapp:/docker-entrypoint-initdb.d/</span></span></span></code></pre>
<p>So I pushed this change, leaving the debug tmate action in place, triggering another run of the action runner. Then once again used the ssh command provided by tmate to connect to the runner (it provides a different address each time), then ran <code>docker ps</code> to see if this time the Postgres container was running. This time it did look like Postgres started successfully:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="11"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">runner@fv-az121-980:~/work/myapp/myapp$ docker ps</span></span>
<span class="grvsc-line"><span class="grvsc-source">CONTAINER ID   IMAGE         COMMAND                  CREATED         STATUS         PORTS                    NAMES</span></span>
<span class="grvsc-line"><span class="grvsc-source">42a987ae5e27   redis:6       &quot;docker-entrypoint.s…&quot;   3 minutes ago   Up 3 minutes   0.0.0.0:6379-&gt;6379/tcp   fe73cffdfe5a474cb4844f6018b151f8_redis6_db473b</span></span>
<span class="grvsc-line"><span class="grvsc-source">f96addde3fe1   postgres:13   &quot;docker-entrypoint.s…&quot;   3 minutes ago   Up 3 minutes   0.0.0.0:5432-&gt;5432/tcp   aeaf1d3eae4b46948276077399135246_postgres13_3406a2</span></span></code></pre>
<p>But it was too early to declare success. The question is - was it able to locate the <code>init.sql</code> file and run it to create the <code>myapp</code> role? A check of the logs revealed that did not happen (it would otherwise output <code>CREATE ROLE</code> in the logs). Also note the logs indicate its ignoring the docker entrypoint script:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="12"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">runner@fv-az121-980:~/work/myapp/myapp$ docker logs aeaf1d3eae4b46948276077399135246_postgres13_3406a2</span></span>
<span class="grvsc-line"><span class="grvsc-source">/usr/local/bin/docker-entrypoint.sh: ignoring /docker-entrypoint-initdb.d/*</span></span>
<span class="grvsc-line"><span class="grvsc-source">[snip]</span></span>
<span class="grvsc-line"><span class="grvsc-source">PostgreSQL init process complete; ready for start up.</span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-02-15 16:45:09.125 UTC [1] LOG:  starting PostgreSQL 13.2 (Debian 13.2-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit</span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-02-15 16:45:09.126 UTC [1] LOG:  listening on IPv4 address &quot;0.0.0.0&quot;, port 5432</span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-02-15 16:45:09.126 UTC [1] LOG:  listening on IPv6 address &quot;::&quot;, port 5432</span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-02-15 16:45:09.129 UTC [1] LOG:  listening on Unix socket &quot;/var/run/postgresql/.s.PGSQL.5432&quot;</span></span>
<span class="grvsc-line"><span class="grvsc-source">2021-02-15 16:45:09.135 UTC [1] LOG:  database system is ready to accept connections</span></span></code></pre>
<p>Hmm... so the folder mount didn't work. So what is the containers view of the <code>/docker-entrypoint-initdb.d</code> directory? To answer this question, you can use <code>docker exec container_name command</code> to run a command in the container. Let's run bash so we can run further shell commands inside the Postgres container:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="" data-index="13"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source">runner@fv-az121-980:~/work/myapp/myapp$ docker exec -it aeaf1d3eae4b46948276077399135246_postgres13_3406a2 bash</span></span>
<span class="grvsc-line"><span class="grvsc-source">root@f96addde3fe1:/# ls -al /docker-entrypoint-initdb.d</span></span>
<span class="grvsc-line"><span class="grvsc-source">[no output - empty dir]</span></span></code></pre>
<p>So the <code>/docker-entrypoint-initdb.d</code> directory is empty, which is strange because in the workflow file <code>.github/workflows/ci.yml</code> it's mounted to the project root, so you would think all the project files would be listed.</p>
<p>And here is where I had a big AHA! moment. Looking at the order in which Github processes the workflow file, the containers are started BEFORE the project source is checked out. This means a bind mount to any file in the project will never work because the project sources don't yet exist on the host (i.e. Github Action runner).</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 800px;"
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/07bf4b46f29724ffefd08baca207aaef/bc3ae/github-actions-order.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 68.76971608832807%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSUlEQVQ4y5WT2W6DMBREkdqEsG9mpxCySFFTpVIeqv7/j009NzUvkSLzcGUD9vj4zuDs/ARekCLNGwRRDj/MpLwgg+vF4HfXS2T+GF+Xww1BXOB2/0Xd7VG1E9rhgLRo8Lbxsd2FuiLrcgxFUfZCGCZKysx5GNdw8YPydQlhqDddv3+gqgH9eNSEM8pm1PMTmn6WFlgLGsKqHYUmiAo5gIR83vnpImYjuvTw8nUXQtIZQvYyySq8bwN7QUPIzXFaLk6TkmOk3626shBqkdPlBlUPIlz/O113E4bprClrbNzQvofM4bB/bGQPSRUlpaZUEh0jZn1lP8wxnz6Rl524yixyzIp2WbjKZU/3aDpcJMyxNoFGcG7CulqQTZ/PV+Sq0+5+oKh6idEaoSdBVwKu5I/hVTPVatcrazOerswsMjbMH0XpOI1ZK/gHm4NEfzLMSvQAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="github action order"
        title="github action order"
        src="/static/07bf4b46f29724ffefd08baca207aaef/5a190/github-actions-order.png"
        srcset="/static/07bf4b46f29724ffefd08baca207aaef/772e8/github-actions-order.png 200w,
/static/07bf4b46f29724ffefd08baca207aaef/e17e5/github-actions-order.png 400w,
/static/07bf4b46f29724ffefd08baca207aaef/5a190/github-actions-order.png 800w,
/static/07bf4b46f29724ffefd08baca207aaef/c1b63/github-actions-order.png 1200w,
/static/07bf4b46f29724ffefd08baca207aaef/bc3ae/github-actions-order.png 1268w"
        sizes="(max-width: 800px) 100vw, 800px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
      />
  </a>
    </span></p>
<h2>Solution</h2>
<p>So now that we know the root cause of the issue, the problem can be solved. The solution is to use <code>docker exec</code> to run a <code>psql</code> client inside the container to create the role rather than relying on a bind mount. However, in order to run <code>docker exec</code> the container name must be known. As can be seen from the earlier output, by default, the name is dynamically generated. This can be resolved by passing the <code>--name</code> flag in the service options which assigns the container a predictable name:</p>
<pre class="grvsc-container gatsby-highlight monokai" data-language="yml" data-index="14"><code class="grvsc-code"><span class="grvsc-line"><span class="grvsc-source"><span class="mtk3"># .github/workflows/ci.yml</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">services</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">db</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">image</span><span class="mtk1">: </span><span class="mtk6">postgres:13</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">env</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">POSTGRES_PASSWORD</span><span class="mtk1">: </span><span class="mtk6">its_a_secret</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      </span><span class="mtk7">POSTGRES_USER</span><span class="mtk1">: </span><span class="mtk6">postgres</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">ports</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">      - </span><span class="mtk6">5432:5432</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk3"># volume for bind mount removed!</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk3"># assign the container a predictable name</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk7">options</span><span class="mtk1">: </span><span class="mtk6">--name myapp_db</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">redis</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">    </span><span class="mtk3"># same as before...</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk7">steps</span><span class="mtk1">:</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Checkout source</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">uses</span><span class="mtk1">: </span><span class="mtk6">actions/checkout@v1</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  - </span><span class="mtk7">name</span><span class="mtk1">: </span><span class="mtk6">Create role</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk7">run</span><span class="mtk1">: </span><span class="mtk6">docker exec myapp_db bash -c &quot;PGPASSWORD=shhhhh psql -U postgres -c \&quot;create role myapp with createdb login password &#39;myapp&#39;\&quot;&quot;</span></span></span>
<span class="grvsc-line"><span class="grvsc-source"></span></span>
<span class="grvsc-line"><span class="grvsc-source"><span class="mtk1">  </span><span class="mtk3"># remainder of the steps...</span></span></span></code></pre>
<p>And this time the workflow did run successfully. The database was initialized with the role so <code>bundle exec rake:db_reset</code> could complete successfully.</p>
<h2>Conclusion</h2>
<p>If you get stuck on a Github Action workflow not running as you would expect, try adding the <a href="https://github.com/mxschmitt/action-tmate">tmate</a> action to your workflow file, ssh to the runner machine, and see what you can find. Happy debugging!</p>
<style class="grvsc-styles">
  .grvsc-container {
    overflow: auto;
    position: relative;
    -webkit-overflow-scrolling: touch;
    padding-top: 1rem;
    padding-top: var(--grvsc-padding-top, var(--grvsc-padding-v, 1rem));
    padding-bottom: 1rem;
    padding-bottom: var(--grvsc-padding-bottom, var(--grvsc-padding-v, 1rem));
    border-radius: 8px;
    border-radius: var(--grvsc-border-radius, 8px);
    font-feature-settings: normal;
    line-height: 1.4;
  }
  
  .grvsc-code {
    display: table;
  }
  
  .grvsc-line {
    display: table-row;
    box-sizing: border-box;
    width: 100%;
    position: relative;
  }
  
  .grvsc-line > * {
    position: relative;
  }
  
  .grvsc-gutter-pad {
    display: table-cell;
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  .grvsc-gutter {
    display: table-cell;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter::before {
    content: attr(data-content);
  }
  
  .grvsc-source {
    display: table-cell;
    padding-left: 1.5rem;
    padding-left: var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem));
    padding-right: 1.5rem;
    padding-right: var(--grvsc-padding-right, var(--grvsc-padding-h, 1.5rem));
  }
  
  .grvsc-source:empty::after {
    content: ' ';
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  .grvsc-gutter + .grvsc-source {
    padding-left: 0.75rem;
    padding-left: calc(var(--grvsc-padding-left, var(--grvsc-padding-h, 1.5rem)) / 2);
  }
  
  /* Line transformer styles */
  
  .grvsc-has-line-highlighting > .grvsc-code > .grvsc-line::before {
    content: ' ';
    position: absolute;
    width: 100%;
  }
  
  .grvsc-line-diff-add::before {
    background-color: var(--grvsc-line-diff-add-background-color, rgba(0, 255, 60, 0.2));
  }
  
  .grvsc-line-diff-del::before {
    background-color: var(--grvsc-line-diff-del-background-color, rgba(255, 0, 20, 0.2));
  }
  
  .grvsc-line-number {
    padding: 0 2px;
    text-align: right;
    opacity: 0.7;
  }
  
  .monokai {
    background-color: #272822;
    color: #f8f8f2;
  }
  .monokai .mtk3 { color: #75715E; }
  .monokai .mtk7 { color: #F92672; }
  .monokai .mtk1 { color: #F8F8F2; }
  .monokai .mtk6 { color: #E6DB74; }
  .monokai .mtk4 { color: #AE81FF; }
  .monokai .grvsc-line-highlighted::before {
    background-color: var(--grvsc-line-highlighted-background-color, rgba(255, 255, 255, 0.1));
    box-shadow: inset var(--grvsc-line-highlighted-border-width, 4px) 0 0 0 var(--grvsc-line-highlighted-border-color, rgba(255, 255, 255, 0.5));
  }
</style></div></div><div style="margin-top:30px"><a class="all-link-module--all-link--3uPzS" href="/blog">All Articles</a></div></div><footer class="footer-module--container--2iXoO"><hr class="footer-module--sep--1iHNN"/><p class="footer-module--copy--7yIGn">All materials © Daniela Baron 2020</p><div class="footer-module--social--3cljd"><a href="https://twitter.com/DanielaMBaron" class="footer-module--footer-icon--2phyq"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a href="https://github.com/danielabar" class="footer-module--footer-icon--2phyq"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a><a href="https://codepen.io/danielabar" class="footer-module--footer-icon--2phyq"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 512 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M502.285 159.704l-234-156c-7.987-4.915-16.511-4.96-24.571 0l-234 156C3.714 163.703 0 170.847 0 177.989v155.999c0 7.143 3.714 14.286 9.715 18.286l234 156.022c7.987 4.915 16.511 4.96 24.571 0l234-156.022c6-3.999 9.715-11.143 9.715-18.286V177.989c-.001-7.142-3.715-14.286-9.716-18.285zM278 63.131l172.286 114.858-76.857 51.429L278 165.703V63.131zm-44 0v102.572l-95.429 63.715-76.857-51.429L234 63.131zM44 219.132l55.143 36.857L44 292.846v-73.714zm190 229.715L61.714 333.989l76.857-51.429L234 346.275v102.572zm22-140.858l-77.715-52 77.715-52 77.715 52-77.715 52zm22 140.858V346.275l95.429-63.715 76.857 51.429L278 448.847zm190-156.001l-55.143-36.857L468 219.132v73.714z"></path></svg></a><a href="https://www.linkedin.com/in/danielabaron/" class="footer-module--footer-icon--2phyq"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 448 512" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/debug-github-action/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-259f8badab9829128140.js"],"component---src-pages-404-js":["/component---src-pages-404-js-8ca39113c3eed1cf43be.js"],"component---src-pages-about-js":["/component---src-pages-about-js-e5413481af6451153bf0.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d136d8fa61ba2e95f4c2.js"],"component---src-templates-blog-list-js":["/component---src-templates-blog-list-js-0fd517719f7bdebe4c8c.js"],"component---src-templates-post-js":["/component---src-templates-post-js-6c8dc3de4250d0615bc4.js"]};/*]]>*/</script><script src="/component---src-templates-post-js-6c8dc3de4250d0615bc4.js" async=""></script><script src="/commons-b7f0eac7930a2fe953ac.js" async=""></script><script src="/252f366e-4b8dd868f7f9c2a7ee52.js" async=""></script><script src="/1bfc9850-5d16e0a00245e09d73c3.js" async=""></script><script src="/styles-89fd2ae28bdf06750a71.js" async=""></script><script src="/app-259f8badab9829128140.js" async=""></script><script src="/framework-95b680cb3190aa9bfe59.js" async=""></script><script src="/webpack-runtime-246df12a576c78d030e3.js" async=""></script></body></html>